!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var a=e();for(var i in a)("object"==typeof exports?exports:t)[i]=a[i]}}(window,(function(){return function(t){var e={};function a(i){if(e[i])return e[i].exports;var c=e[i]={i:i,l:!1,exports:{}};return t[i].call(c.exports,c,c.exports,a),c.l=!0,c.exports}return a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)a.d(i,c,function(e){return t[e]}.bind(null,c));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=2)}([function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;var Ycc=function a(b){this.ctx=null,this.canvasDom=null,this.layerList=[],this.photoManager=null,this.layerManager=null,this.ticker=null,this["debugger"]=null,this.loader=new a.Loader(this),this.ajax=new a.Ajax,this.baseUI=null,this.gesture=null,this.config=a.utils.extend({debugDrawContainer:!1,appenv:"h5"},b||{}),this.isMobile=a.utils.isMobile(),this.stageW=0,this.stageH=0,this.dpi=this.getSystemInfo().devicePixelRatio};if(Ycc.prototype.getStageWidth=function(){return this.canvasDom.width},Ycc.prototype.getStageHeight=function(){return this.canvasDom.height},Ycc.prototype.bindCanvas=function(a){return this.canvasDom=a,this.ctx=a.getContext("2d"),this.ctx.canvas.getBoundingClientRect=this.ctx.canvas.getBoundingClientRect?this.ctx.canvas.getBoundingClientRect:function(){return{left:0,top:0}},this.layerList=[],this.photoManager=new Ycc.PhotoManager(this),this.layerManager=new Ycc.LayerManager(this),this.ticker=new Ycc.Ticker(this),this["debugger"]=new Ycc.Debugger(this),this.baseUI=new Ycc.UI(this),this.init(),this},Ycc.prototype.init=function(){this._initStageGestureEvent(),this.ticker.start(6)},Ycc.prototype._initStageGestureEvent=function(){function a(a){var b=parseInt(a.clientX-f.ctx.canvas.getBoundingClientRect().left),c=parseInt(a.clientY-f.ctx.canvas.getBoundingClientRect().top);h="";var d=f.getUIFromPointer(new Ycc.Math.Dot(b,c));d&&(g[a.identifier]=d,d.triggerUIEventBubbleUp(a.type,b,c)),e(a.type,b,c)}function b(a){var b=parseInt(a.clientX-f.ctx.canvas.getBoundingClientRect().left),c=parseInt(a.clientY-f.ctx.canvas.getBoundingClientRect().top);if(h!==b+"_"+c){h=b+"_"+c;var d=g[a.identifier];d&&(g[a.identifier]=d,d.triggerUIEventBubbleUp(a.type,b,c)),e(a.type,b,c)}}function c(a){var b=parseInt(a.clientX-f.ctx.canvas.getBoundingClientRect().left),c=parseInt(a.clientY-f.ctx.canvas.getBoundingClientRect().top),d=g[a.identifier];d&&(g[a.identifier]=d,d.triggerUIEventBubbleUp(a.type,b,c),d=null,g[a.identifier]=null),e(a.type,b,c)}function d(a){var b=parseInt(a.clientX-f.ctx.canvas.getBoundingClientRect().left),c=parseInt(a.clientY-f.ctx.canvas.getBoundingClientRect().top),d=f.getUIFromPointer(new Ycc.Math.Dot(b,c));d&&d.triggerUIEventBubbleUp(a.type,b,c,a),e(a.type,b,c)}function e(a,b,c){for(var d=f.layerList.length-1;d>=0;d--){var e=f.layerList[d];e.enableEventManager&&e.enableEventManager&&e.triggerListener(a,new Ycc.Event({type:a,x:b,y:c}))}}var f=this,g={},h="",i=new Ycc.Gesture({target:this.ctx.canvas});this.gesture=i,i.addListener("tap",d),i.addListener("longtap",d),i.addListener("doubletap",d),i.addListener("swipe",d),i.addListener("swipeleft",d),i.addListener("swiperight",d),i.addListener("swipeup",d),i.addListener("swipedown",d),i.addListener("dragstart",a),i.addListener("dragging",b),i.addListener("dragend",c),i.addListener("mousemove",d)},Ycc.prototype.clearStage=function(){this.ctx.clearRect(0,0,this.getStageWidth(),this.getStageHeight())},Ycc.prototype.findLayerById=function(a){for(var b=0;b<this.layerList.length;b++){var c=this.layerList[b];if(c.id===a)return c}return null},Ycc.prototype.findUiById=function(a){for(var b=0;b<this.layerList.length;b++)for(var c=this.layerList[b],d=0;d<c.uiList.length;d++){var e=c.uiList[d];if(e.id===a)return e}return null},Ycc.prototype.getUIFromPointer=function(a,b){var c=this;b=!Ycc.utils.isBoolean(b)||b;for(var d=c.layerList.length-1;d>=0;d--){var e=c.layerList[d];if(!e.ghost&&(!b||e.show)){var f=e.getUIFromPointer(a,b);if(f)return f}}return null},Ycc.prototype.getUIListFromPointer=function(a,b){var c=this;b=b||{uiIsShow:!0,uiIsGhost:!1};for(var d=[],e=c.layerList.length-1;e>=0;e--){var f=c.layerList[e];if(f.show){var g=f.getUIListFromPointer(a);d=d.concat(g)}}return d=d.filter(function(a){return a.show===b.uiIsShow&&a.ghost===b.uiIsGhost})},Ycc.prototype.createCanvas=function(a){a=a||{};var b=Ycc.utils.mergeObject({width:this.getSystemInfo().windowWidth,height:this.getSystemInfo().windowHeight,dpiAdaptation:!1,canvasDom:null},a),c=b.canvasDom||document.createElement("canvas"),d=this.getSystemInfo().devicePixelRatio;return b.dpiAdaptation?(c.width=b.width*d,c.height=b.height*d,c.style&&(c.style.width=b.width+"px")):(c.width=b.width,c.height=b.height),c.style&&(c.style.display="block"),c},Ycc.prototype.getSystemInfo=function(){return{model:"iPhone 5",pixelRatio:window.devicePixelRatio||1,windowWidth:window.innerWidth,windowHeight:window.innerHeight,screenWidth:320,screenHeight:568,devicePixelRatio:window.devicePixelRatio||1}},Ycc.prototype.createCacheCtx=function(a){a=a||{width:this.getStageWidth(),height:this.getStageHeight()};var b=this.createCanvas({width:a.width,height:a.height}).getContext("2d");return document.body.appendChild(b.canvas),b},function(a){a.utils={},a.utils.extend=function(b,c,d){d&&(c=a.utils.deepClone(c));for(var e in b)b.hasOwnProperty(e)&&c&&"undefined"!=typeof c[e]&&(b[e]=c[e]);return b},a.utils.mergeObject=function(a,b){b=b||{};for(var c in b)b.hasOwnProperty(c)&&"undefined"!=typeof b[c]&&(a[c]=b[c]);return a},a.utils.isString=function(a){return"string"==typeof a},a.utils.isNum=function(a){return"number"==typeof a},a.utils.isBoolean=function(a){return"boolean"==typeof a},a.utils.isObj=function(a){return"object"==typeof a},a.utils.isFn=function(a){return"function"==typeof a},a.utils.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},a.utils.isMobile=function(){for(var a=navigator.userAgent,b=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],c=!1,d=0;d<b.length;d++)if(a.indexOf(b[d])>0){c=!0;break}return c},a.utils.deepClone=function(b){function c(b){var e={};for(var f in b)b.hasOwnProperty(f)&&(e[f]=b[f],a.utils.isArray(b[f])?e[f]=d(b[f]):a.utils.isObj(b[f])?e[f]=c(b[f]):e[f]=b[f]);return e}function d(b){for(var e=[],f=null,g=0;g<b.length;g++)f=b[g],a.utils.isArray(f)?e.push(d(f)):a.utils.isObj(f)?e.push(c(f)):e.push(f);return e}return a.utils.isArray(b)?d(b):c(b)},a.utils.renderTpl=function(a,b){return a.replace(/__.+?__/g,function(a){console.log("匹配到的文本--\x3e",a);var c=a.slice(2).slice(0,-2).trim();return void 0!==b[c]?b[c]:a})},a.utils.releaseObject=function(a){for(var b in a)a.hasOwnProperty(b)&&delete a[b]},a.utils.releaseArray=function(a){a.length=0},a.utils.isWx=function(){return"undefined"!=typeof wx}}(Ycc),function(a){a.utils.extend;a.Math=function(){},a.Math.Dot=function(a){this.x=0,this.y=0;var b=arguments.length;1===b?(this.x=a.x,this.y=a.y):2===b&&(this.x=arguments[0],this.y=arguments[1])},a.Math.Dot.prototype.isInRect=function(a){return this.x>=a.x&&this.x<=a.x+a.width&&this.y>=a.y&&this.y<=a.y+a.height},a.Math.Dot.prototype.isEqual=function(a){return this.x===a.x&&this.y===a.y},a.Math.Dot.prototype.plus=function(b){return new a.Math.Dot(this.x+b.x,this.y+b.y)},a.Math.Dot.prototype.rotate=function(b,c){c=c||new a.Math.Dot(0,0);var d=this.x,e=this.y,f=c.x,g=c.y,h=(d-f)*Math.cos(b/180*Math.PI)-(e-g)*Math.sin(b/180*Math.PI)+f,i=(e-g)*Math.cos(b/180*Math.PI)+(d-f)*Math.sin(b/180*Math.PI)+g;return new a.Math.Dot(h,i)},a.Math.Dot.threeDotIsOnLine=function(a,b,c){if(a.isEqual(b)||a.isEqual(c)||b.isEqual(c))return!0;if(a.x===b.x&&b.x===c.x)return!0;var d=Math.abs(a.y-b.y)/Math.abs(a.x-b.x),e=Math.abs(a.y-c.y)/Math.abs(a.x-c.x);return d===e},a.Math.Rect=function(b){this.yccClass=a.Math.Rect,this.x=0,this.y=0,this.width=0,this.height=0;var c=arguments.length;1===c?(this.x=b.x,this.y=b.y,this.width=b.width,this.height=b.height):3===c?(this.x=arguments[0].x,this.y=arguments[0].y,this.width=arguments[1],this.height=arguments[2]):4===c&&(this.x=arguments[0],this.y=arguments[1],this.width=arguments[2],this.height=arguments[3]),this.toPositive()},a.Math.Rect.prototype.toPositive=function(){var a=this.x,b=this.y,c=this.x+this.width,d=this.y+this.height;this.x=a<c?a:c,this.y=b<d?b:d,this.width=Math.abs(this.width),this.height=Math.abs(this.height)},a.Math.Rect.prototype.getVertices=function(){return[new a.Math.Dot(this.x,this.y),new a.Math.Dot(this.x+this.width,this.y),new a.Math.Dot(this.x+this.width,this.y+this.height),new a.Math.Dot(this.x,this.y+this.height),new a.Math.Dot(this.x,this.y)]},a.Math.Rect.prototype.updateByVertices=function(b){return a.utils.isArray(b)?(this.x=b[0].x,this.y=b[0].y,this.width=b[1].x-this.x,void(this.height=b[2].y-this.y)):console.error("参数必须是数组！")},a.Math.Vector=function(){this.x=0,this.y=0,this.z=0,3!==arguments.length&&2!==arguments.length||(this.x=arguments[0]||0,this.y=arguments[1]||0,this.z=arguments[2]||0),1===arguments.length&&(a.utils.isObj(arguments[0])||console.error("constructor need a objec as param!"),this.x=arguments[0].x||0,this.y=arguments[0].y||0,this.z=arguments[0].z||0)},a.Math.Vector.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},a.Math.Vector.prototype.cross=function(b){var c=new a.Math.Vector;return c.x=this.y*b.z-b.y*this.z,c.y=b.x*this.z-this.x*b.z,c.z=this.x*b.y-b.x*this.y,c},a.Math.Vector.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z,2)},a.Math.Matrix=function(a,b,c){this.data=a,this.m=b,this.n=c},a.Math.Matrix.prototype.dot=function(b){if(b.m!==this.n||b.n!==this.m)return console.error("两个矩阵的行数和列数不对应，不能相乘！");for(var c=new a.Math.Matrix([],this.m,this.m),d=1;d<=this.m;d++)for(var e=1;e<=this.m;e++){for(var f=0,g=1;g<=this.n;g++)f+=this.get(d,g)*b.get(g,e);c.set(d,e,f)}return c},a.Math.Matrix.prototype.get=function(a,b){return this.data[(a-1)*this.n+b-1]},a.Math.Matrix.prototype.set=function(a,b,c){this.data[(a-1)*this.n+b-1]=c}}(Ycc),function(a){var b=1,c={};a.Tree=function(){this.$id=b++,this.$parentID=null,this.children=[],this.data=null,c[this.$id]=this},a.Tree.release=function(a){var b=a.getParent();if(b){var d=b.children,e=d.indexOf(a);e!==-1&&(d[e]=null)}delete c[a.$id],a.children.length=0,a.data=null},a.Tree.getNodeMap=function(){return c},a.Tree.prototype.getNodeMap=function(){return c},a.Tree.prototype.getParent=function(){return this.$parentID?c[this.$parentID]:null},a.Tree.prototype.addChildTree=function(a){return a.$parentID?console.error("sub tree\'s parent has exist! can\'t add!",a):(a.$parentID=this.$id,this.children.push(a),this)},a.Tree.prototype.removeChildTree=function(a){var b=this.children.indexOf(a);return b===-1?this:(this.children.splice(b,1),this)},a.Tree.prototype.getDepth=function(){var a=this,b=1;if(a.children.length>0)for(var c=0;c<a.children.length;c++){var d=a.children[c].getDepth();b=d+1>b?d+1:b}return b},a.Tree.prototype.itor=function(a){function b(a){if(a.call(h,h))return!0;if(h.children.length>0)for(var b=0;b<h.children.length;b++)if(h.children[b].itor().each(a))return!0;return!1}function c(a){if(h.children.length>0)for(var b=0;b<h.children.length;b++)if(h.children[b].itor().leftChildFirst(a))return!0;if(a.call(h,h))return!0}function d(a){if(h.children.length>0)for(var b=h.children.length-1;b>=0;b--)if(h.children[b].itor().rightChildFirst(a))return!0;if(a.call(h,h))return!0}function e(a){f([h],a)}function f(b,c,d){if(0===b.length)return!0;d=d||0,d++;for(var e=a.reverse?g(b):b,i=[],j=!1,k=0;k<e.length;k++){var l=c.call(h,e[k],d);if(l===!0){j=!0;break}l!==-1&&(i=i.concat(a.reverse?g(e[k].children):e[k].children))}return j&&(i=[]),a.reverse&&i.reverse(),f(i,c,d)}function g(a){for(var b=[],c=a.length-1;c>=0;c--)b.push(a[c]);return b}var h=this;return a=a||{reverse:!1},{each:b,leftChildFirst:c,rightChildFirst:d,depthDown:e}},a.Tree.prototype.toNodeList=function(){var a=[];return this.itor().depthDown(function(b){a.push(b)}),a},a.Tree.prototype.getNodeListGroupByLayer=function(){var a={};return this.itor().depthDown(function(b,c){a[c]||(a[c]=[]),a[c].push(b)}),a},a.Tree.prototype.getParentList=function(){for(var a=this,b=[];a.$parentID;){var d=c[a.$parentID];b.unshift(d),a=d}return b},a.Tree.prototype.getBrotherList=function(){var a=[];return a=this.$parentID?c[this.$parentID].children:[this]},a.Tree.createByJSON=function(b){var c=new a.Tree;if(c.data=b.data,a.utils.isArray(b.children)&&b.children.length>0)for(var d=0;d<b.children.length;d++)c.addChildTree(a.Tree.createByJSON(b.children[d]));return c},a.Tree.createByNodes=function(b){if(!a.utils.isArray(b)||0===b.length)return console.error("need an Array as param!");var c=null,d=[];return b.forEach(function(b){var e=new a.Tree;e.data=b,d.push(e),a.utils.isNum(b.parentID)||b.parentID||(c=e)}),d.forEach(function(a){d.forEach(function(b){b.data.parentID===a.data.id&&a.addChildTree(b)})}),c}}(Ycc),function(a){var b=1,c=1,d=1,e={},f={};a.Graph=function(a){this.type=a||1,this.$id=d++,this.vList=[],this.eList=[]},a.Graph.prototype.getMapV=function(){return e},a.Graph.prototype.getMapE=function(){return f},a.Graph.prototype.bfs=function(a,b,c){if(a=a||[],c=c||[],c.length===this.vList.length)return!0;if(0===a.length){for(var d=null,f=0;f<this.vList.length;f++)if(c.indexOf(this.vList[f].$id)===-1){d=this.vList[f].$id;break}return this.bfs([d],b,c)}for(var g=null,h=0;h<a.length;h++){if(g=e[a[h]],b.call(this,g))return!0;c.push(g.$id)}for(var i=[],j=0;j<a.length;j++){g=e[a[j]];var k=g.getAccessibleIds().filter(function(a){return c.indexOf(a)===-1});i=i.concat(k)}return this.bfs(i,b,c)},a.Graph.prototype.dfs=function(a,b,c){c=c||[];var d=e[a];if(c.push(d.$id),b.call(this,d))return!0;for(var f=d.getAccessibleIds(),g=0;g<f.length;g++){var h=f[g];if(c.indexOf(h)===-1&&this.dfs(h,b,c))return!0}if(c.length===this.vList.length)return!0;for(var i=null,j=0;j<this.vList.length;j++)if(c.indexOf(this.vList[j].$id)===-1){i=this.vList[j].$id;break}return this.dfs(i,b,c)},a.Graph.createDirectedGraph=function(b,c){var d=new a.Graph(1),e=d.vList,f=d.eList;return b.forEach(function(b){e.push(new a.Graph.DirectedV(b))}),c.forEach(function(b){for(var c=null,d=null,g=new a.Graph.DirectedE,h=0;h<e.length&&(!c||!d);h++){var i=e[h];i.data.id===b.fromId&&(c=i,i.outIDs.push(g.$id)),i.data.id===b.toId&&(d=i,i.inIDs.push(g.$id))}g.init(c.$id,d.$id,b),f.push(g)}),d},a.Graph.DirectedV=function(a){this.$id=b++,this.data=a,this.inIDs=[],this.outIDs=[],e[this.$id]=this},a.Graph.DirectedV.prototype.getAccessibleIds=function(){var a=[];return this.outIDs.forEach(function(b){a.push(f[b].toID)}),a},a.Graph.DirectedE=function(){this.$id=c++,this.data=null,this.fromID=null,this.toID=null,f[this.$id]=this},a.Graph.DirectedE.prototype.init=function(a,b,c){this.fromID=a,this.toID=b,this.data=c},a.Graph.createUnDirectedGraph=function(b,c){var d=new a.Graph(2),e=d.vList,f=d.eList;return b.forEach(function(b){e.push(new a.Graph.UnDirectedV(b))}),c.forEach(function(b){for(var c=[],d=new a.Graph.UnDirectedE,g=0;g<e.length;g++){var h=e[g];if(2===c.length)break;h.data.id!==b.ids[0]&&h.data.id!==b.ids[1]||(c.push(h.$id),h.eIDs.push(d.$id))}d.init(c,b),f.push(d)}),d},a.Graph.UnDirectedV=function(a){this.$id=b++,this.data=a,this.eIDs=[],e[this.$id]=this},a.Graph.UnDirectedV.prototype.getAccessibleIds=function(){for(var a=[],b=0;b<this.eIDs.length;b++){var c=f[this.eIDs[b]];c.vIDs[0]===this.$id&&a.push(c.vIDs[1]),c.vIDs[1]===this.$id&&a.push(c.vIDs[0])}return a},a.Graph.UnDirectedE=function(){this.$id=c++,this.data=null,this.vIDs=[],f[this.$id]=this},a.Graph.UnDirectedE.prototype.init=function(a,b){this.vIDs=a,this.data=b}}(Ycc),function(a){function b(a){this.createTime=Date.now(),this.deltaTime=a.deltaTime,this.fps=parseInt(1e3/this.deltaTime),this.frameCount=a.frameAllCount,this.isRendered=!1}a.Ticker=function(b){this.yccClass=a.Ticker,this.yccInstance=b,this.currentFrame=null,this.startTime=Date.now(),this.lastFrameTime=this.startTime,this.lastFrameTickerCount=0,this.deltaTime=0,this.deltaTimeExpect=0,this.deltaTimeRatio=1,this.frameListenerList=[],this.defaultFrameRate=60,this.defaultDeltaTime=1e3/this.defaultFrameRate,this.tickerSpace=1,this.frameAllCount=0,this.timerTickCount=0,this._timerId=0,this._isRunning=!1},a.Ticker.prototype.start=function(a){function c(a){e.timerTickCount++,e.timerTickCount-e.lastFrameTickerCount===e.tickerSpace&&(e.frameAllCount++,e.deltaTime=a-e.lastFrameTime,e.deltaTimeRatio=e.deltaTime/e.deltaTimeExpect,e.lastFrameTime+=e.deltaTime,e.lastFrameTickerCount=e.timerTickCount,e.currentFrame=new b(e),e.broadcastFrameEvent(e.currentFrame),e.broadcastToLayer(e.currentFrame)),e._timerId=d(c)}var d=this.yccInstance.canvasDom.requestAnimationFrame?this.yccInstance.canvasDom.requestAnimationFrame:requestAnimationFrame||webkitRequestAnimationFrame||mozRequestAnimationFrame||oRequestAnimationFrame||msRequestAnimationFrame,e=this;e.currentFrame=null,e.timerTickCount=0,e.lastFrameTickerCount=0,a=a?a:e.defaultFrameRate,e.tickerSpace=parseInt(60/a)||1,e.deltaTimeExpect=1e3/a,e.frameAllCount=0,e.startTime=Date.now(),e._isRunning||(d||(d=function(a){return setTimeout(function(){a(Date.now())},1e3/60)}),e._timerId=d(c),e._isRunning=!0)},a.Ticker.prototype.stop=function(){var a=this.yccInstance.canvasDom.cancelAnimationFrame?this.yccInstance.canvasDom.cancelAnimationFrame:cancelAnimationFrame||webkitCancelAnimationFrame||mozCancelAnimationFrame||oCancelAnimationFrame;a||(a=function(a){return clearTimeout(a)}),a(this._timerId),this._isRunning=!1,this.currentFrame=null},a.Ticker.prototype.addFrameListener=function(a){this.frameListenerList.push(a)},a.Ticker.prototype.removeFrameListener=function(a){var b=this.frameListenerList.indexOf(a);b!==-1&&this.frameListenerList.splice(b,1)},a.Ticker.prototype.broadcastFrameEvent=function(b){for(var c=0;c<this.frameListenerList.length;c++){var d=this.frameListenerList[c];a.utils.isFn(d)&&d(b)}},a.Ticker.prototype.broadcastToLayer=function(a){for(var b=0;b<this.yccInstance.layerList.length;b++){var c=this.yccInstance.layerList[b];c.show&&c.enableFrameEvent&&c.onFrameComing(a)}}}(Ycc),function(a){a.Debugger=function(b){this.yccClass=a.Debugger,this.yccInstance=b,this.deltaTime=null,this.deltaTimeExpect=null,this.frameAllCount=null,this.deltaTimeAverage=null,this.renderTime=null,this.renderUiCount=null,this.totalJSHeapSize=null,this.usedJSHeapSize=null,this.jsHeapSizeLimit=null,this.fields=[],this.rect=null,this.layer=null},a.Debugger.prototype.init=function(){this.rect=new a.UI.Rect({name:"debuggerRect",rect:new a.Math.Rect(10,10,200,140),color:"rgba(255,255,0,0.5)"}),this.layer=yccInstance.layerManager.newLayer({name:"debug图层"});var b=this;this.yccInstance.ticker.addFrameListener(function(){b.updateInfo()})},a.Debugger.prototype.showDebugPanel=function(){this.init();var a=this.layer;a.uiList.indexOf(this.rect)===-1&&a.addUI(this.rect)},a.Debugger.prototype.updateInfo=function(){var a=this.yccInstance.layerList,b=a.indexOf(this.layer);b!==-1&&(b+1!==a.length&&(a.splice(b,1),a.push(this.layer)),this.rect.rect.height=20*this.fields.length,this.fields.forEach(function(a){a.ui.content=a.name+" "+a.cb()}))},a.Debugger.prototype.addField=function(b,c){var d=this.fields.length,e=new a.UI.SingleLineText({content:"usedJSHeapSize "+c(),fontSize:"12px",rect:new a.Math.Rect(0,20*d,100,20),color:"green"});this.fields.push({name:b,cb:c,ui:e}),this.rect.addChild(e)},a.Debugger.prototype.addToLayer=function(a){a.uiList.indexOf(this.rect)===-1&&a.addUI(this.rect)},a.Debugger.prototype.updateField=function(a,b){for(var c=0;c<this.fields.length;c++)if(this.fields[c].name===a)return this.fields[c].cb=null,void(this.fields[c].cb=b)},a.Debugger.Log=function(a){this.message="[Ycc logger]=> "+a},a.Debugger.Error=function(a){this.message="[Ycc  error]=> "+a}}(Ycc),function(a){function b(b,c){a.utils.isWx()&&b.indexOf("cloud://")!==-1?wx.cloud.downloadFile({fileID:b,success:function(a){c.call(this,a.tempFilePath)},fail:function(){c.call(this,b)}}):c.call(this,b)}function c(){this.currentTime=0,this.source=null,this.running=!1}a.Loader=function(b){this.yccClass=a.Loader,this.yccInstance=b,this.ajax=new a.Ajax,this.basePath=""},a.Loader.prototype.loadResParallel=function(b,c,d,e,f){function g(g,h,i){return function(){e.push(g),"undefined"!=typeof g.name&&(f[g.name]=g.res),a.utils.isFn(d)&&d(g,i,h),b.length===e.length&&c(e,f)}}e=e||[],f=f||{};for(var h=this,i=0;i<b.length;i++){var j=b[i],k="load",l="error";j.type=j.type||"image","image"===j.type&&(j.res=h._createImage(),j.res.setAttribute&&j.res.setAttribute("crossOrigin",j.crossOrigin||""),j.res.src=j.url),"audio"===j.type&&(k="loadedmetadata",j.res=new Audio,j.res.src=j.url,j.res.preload="load",j.res.crossOrigin=j.crossOrigin||""),j.res["on"+k]=g(j,i,!0),j.res["on"+l]=g(j,i,!1)}},a.Loader.prototype.loadResOneByOne=function(d,e,f,g,h){function i(){clearTimeout(p),"image"===m.type||"undefined"!=typeof wx&&"audio"===m.type,g.push(m),"undefined"!=typeof m.name&&(h[m.name]=m.res),a.utils.isFn(f)&&f(m,null,l),k.loadResOneByOne(d,e,f,g,h)}function j(b){console.log("loader:",m.name,"error"),clearTimeout(p),("image"===m.type||"undefined"!=typeof wx&&"audio"===m.type)&&(m.res.removeEventListener(n,i),m.res.removeEventListener(o,j)),g.push(m),"undefined"!=typeof m.name&&(h[m.name]=m.res),a.utils.isFn(f)&&f(m,b,l),k.loadResOneByOne(d,e,f,g,h)}if(g=g||[],h=h||{},d.length===g.length)return void e(g,h);var k=this,l=g.length,m=d[l],n="load",o="error";m.type=m.type||"image";var p=0;b(k.basePath+m.url,function(a){if("image"===m.type)m.res=k._createImage(),m.res.setAttribute&&m.res.setAttribute("crossOrigin",m.crossOrigin||""),m.res.src=a,m.res["on"+n]=i,m.res["on"+o]=j,p=setTimeout(function(){m.res["on"+n]=null,m.res["on"+o]=null,j({message:"获取资源超时！"})},m.timeout||1e4);else if("audio"===m.type){if("undefined"!=typeof wx)return m.res=new Audio,m.res.src=a,n="loadedmetadata",o="error",m.res.addEventListener(n,i),void m.res.addEventListener(o,j);if(m.res=new c,!m.res.context)return void j({message:"浏览器不支持AudioContext！"});console.log(a),k.ajax.get(a,function(a){return function(b){a.res.context.decodeAudioData(b,function(b){a.res.buf=b,i()},j)}}(m),j,"arraybuffer")}})},a.Loader.prototype.getResByName=function(a,b){for(var c=0;c<b.length;c++)if(b[c].name===a)return b[c];return null},a.Loader.prototype._createImage=function(){return this.yccInstance&&"wxapp"===this.yccInstance.config.appenv?this.yccInstance.canvasDom.createImage():new Image},c.prototype.context="undefined"!=typeof AudioContext&&new AudioContext||"undefined"!=typeof webkitAudioContext&&new webkitAudioContext,c.prototype.play=function(){var a=this.context;if(a){this.running=!0,this.source&&this.source.stop();var b=a.createBufferSource();b.buffer=this.buf,b.connect(a.destination),b.start(this.currentTime),this.source=b}},c.prototype.pause=function(){var a=this.context;a&&(this.running=!1,this.source.stop(),this.source=null)}}(Ycc),function(a){a.Ajax=function(){this.yccClass=a.Ajax},a.Ajax.prototype.get=function(a){var b,c,d=this,e="",f="json";1===arguments.length?(e="",b=a.successCb,c=a.errorCb,f="json"):(e=arguments[0],b=arguments[1],c=arguments[2],f=arguments[3]);var g=new XMLHttpRequest;g.open("GET",e,!0),g.responseType=f,g.onload=function(){b.call(d,g.response)},g.onerror=function(a){c.call(d,a)},g.send()}}(Ycc),function(a){a.Event=function(b){this.yccClass=a.Event,this.type=b?b:"",this.x=0,this.y=0,this.originEvent=null,this.stop=!1,this.target=null,a.utils.isObj(b)&&a.utils.extend(this,b)}}(Ycc),function(a){a.Listener=function(){this.yccClass=a.Listener,this.listeners={},this.stopType={},this.disableType={},this.stopAllEvent=!1,this.onclick=null,this.onmousedown=null,this.onmouseup=null,this.onmousemove=null,this.ondragstart=null,this.ondragging=null,this.ondragend=null,this.onmouseover=null,this.onmouseout=null,this.ontouchstart=null,this.ontouchmove=null,this.ontouchend=null,this.ontap=null,this.onzoom=null,this.onrotate=null,this.onmultistart=null,this.onmultichange=null,this.onmultiend=null},a.Listener.release=function(b){var c=null;b.yccClass=null;for(c in b.listeners)b.listeners.hasOwnProperty(c)&&(b.listeners[c].length=0,delete b.listeners[c]);a.utils.releaseObject(b.stopType),a.utils.releaseObject(b.disableType),b.stopAllEvent=!0,b.onclick=null,b.onmousedown=null,b.onmouseup=null,b.onmousemove=null,b.ondragstart=null,b.ondragging=null,b.ondragend=null,b.onmouseover=null,b.onmouseout=null,b.ontouchstart=null,b.ontouchmove=null,b.ontouchend=null,b.ontap=null},a.Listener.prototype.addListener=function(a,b){var c=this.listeners[a];c||(this.listeners[a]=[]),this.listeners[a].indexOf(b)===-1&&this.listeners[a].push(b)},a.Listener.prototype.stop=function(a){this.stopType[a]=!0},a.Listener.prototype.triggerListener=function(b,c){if(!this.stopAllEvent&&!this.disableType[b]){this.stopType[b]||a.utils.isFn(this["on"+b])&&this["on"+b].apply(this,Array.prototype.slice.call(arguments,1));var d=this.listeners&&this.listeners[b];if(d&&a.utils.isArray(d))for(var e=0;e<d.length;e++)this.stopType[b]||d[e].apply(this,Array.prototype.slice.call(arguments,1))}},a.Listener.prototype.removeListener=function(b,c){var d=this.listeners[b];if(d&&a.utils.isArray(d))for(var e=0;e<d.length;e++)if(d[e]===c)return void d.splice(e,1)},a.Listener.prototype.disableEvent=function(a){this.disableType[a]=!0},a.Listener.prototype.resumeEvent=function(a){this.disableType[a]=!1}}(Ycc),function(a){var b=function(){var a=0;return function(){this.id=a++,this.startTouchEvent=null,this.endTouchEvent=null,this.moveTouchEventList=[],this.startTime=Date.now(),this.endTime=0}}();a.TouchLifeTracer=function(b){a.Listener.call(this),this.target=b.target,this._lifeList=[],this.currentLifeList=[],this.targetTouches=[],this.touches=[],this.changedTouches=[],this.onlifestart=null,this.onlifechange=null,this.onlifeend=null,this.addLife=function(a){this._lifeList.push(a)},this.findCurrentLifeByTouchID=function(a){for(var b=0;b<this.currentLifeList.length;b++){var c=this.currentLifeList[b];if(c.startTouchEvent.identifier===a)return c}},this.deleteCurrentLifeByTouchID=function(a){for(var b=0;b<this.currentLifeList.length;b++){var c=this.currentLifeList[b];if(c.startTouchEvent.identifier===a)return this.currentLifeList.splice(b,1),!0}return!1},this.init=function(){return this.target.addEventListener?(this.target.addEventListener("touchstart",this.touchstart.bind(this)),this.target.addEventListener("touchmove",this.touchmove.bind(this)),void this.target.addEventListener("touchend",this.touchend.bind(this))):console.error("addEventListener undefined")},this.init()},a.TouchLifeTracer.prototype.touchstart=function(a){console.log("touchstart",a);var c=this;a.preventDefault&&a.preventDefault(),c.syncTouches(a);var d=new b;d.startTouchEvent=a.changedTouches[0],c.addLife(d),c.currentLifeList.push(d),c.triggerListener("lifestart",d)},a.TouchLifeTracer.prototype.touchmove=function(a){var b=this;a.preventDefault&&a.preventDefault(),b.syncTouches(a);for(var c=a.changedTouches,d=0;d<c.length;d++){var e=c[d],f=b.findCurrentLifeByTouchID(e.identifier),g=b.indexOfTouchFromMoveTouchEventList(f.moveTouchEventList,e);g===-1?f.moveTouchEventList.push(e):f.moveTouchEventList[g]=e,b.triggerListener("lifechange",f)}},a.TouchLifeTracer.prototype.touchend=function(a){var b=this;a.preventDefault&&a.preventDefault(),b.syncTouches(a);var c=a.changedTouches[0],d=b.findCurrentLifeByTouchID(c.identifier);d.endTouchEvent=c,d.endTime=Date.now(),b.deleteCurrentLifeByTouchID(c.identifier),b.triggerListener("lifeend",d)},a.utils.mergeObject(a.TouchLifeTracer.prototype,a.Listener.prototype),a.TouchLifeTracer.prototype.syncTouches=function(a){this.touches=[],this.changedTouches=[],this.targetTouches=[];var b=0,c=[];for(c=a.touches,b=0;b<c.length;b++)c[b].pageX=c[b].pageX||c[b].x,c[b].pageY=c[b].pageY||c[b].y,c[b].clientX=c[b].clientX||c[b].x,c[b].clientY=c[b].clientY||c[b].y,this.touches.push(c[b]);for(c=a.changedTouches,b=0;b<c.length;b++)c[b].pageX=c[b].pageX||c[b].x,c[b].pageY=c[b].pageY||c[b].y,c[b].clientX=c[b].clientX||c[b].x,c[b].clientY=c[b].clientY||c[b].y,this.changedTouches.push(c[b]);for(c=a.targetTouches||a.touches,b=0;b<c.length;b++)c[b].pageX=c[b].pageX||c[b].x,c[b].pageY=c[b].pageY||c[b].y,c[b].clientX=c[b].clientX||c[b].x,c[b].clientY=c[b].clientY||c[b].y,this.targetTouches.push(c[b])},a.TouchLifeTracer.prototype.indexOfTouchFromMoveTouchEventList=function(a,b){for(var c=0;c<a.length;c++)if(b.identifier===a[c].identifier)return c;return-1}}(Ycc),function(a){a.Gesture=function(b){a.Listener.call(this),this.yccClass=a.Gesture,b=b||{},this.option={target:null,useMulti:!0},a.utils.extend(this.option,b),this._longTapTimeout=null,this.ismutiltouching=!1,this.touchLifeTracer=null,this._init()},a.Gesture.prototype=new a.Listener,a.Gesture.prototype._init=function(){a.utils.isMobile()?(console.log("mobile gesture init..."),this._initForMobile()):(console.log("pc gesture init..."),this._initForPC())},a.Gesture.prototype._initForMobile=function(){var b=this,c=new a.TouchLifeTracer({target:this.option.target});this.touchLifeTracer=c;var d,e,f={tap:!1,swipe:!1};c.onlifestart=function(a){if(b.triggerListener("tap",b._createEventData(a.startTouchEvent,"tap")),b.triggerListener("log","tap triggered"),b.triggerListener("dragstart",b._createEventData(a.startTouchEvent,"dragstart")),c.currentLifeList.length>1){if(b.ismutiltouching=!0,!b.option.useMulti)return;return b.triggerListener("log","multi touch start ..."),b.triggerListener("multistart",c.currentLifeList),f.tap=!1,f.swipe=!1,clearTimeout(this._longTapTimeout),d=c.currentLifeList[0],e=c.currentLifeList[1],this}b.ismutiltouching=!1,f.tap=!1,f.swipe=!1,this._longTapTimeout=setTimeout(function(){b.triggerListener("longtap",b._createEventData(a.startTouchEvent,"longtap"))},750)},c.onlifechange=function(g){if(g.moveTouchEventList.forEach(function(a){b.triggerListener("dragging",b._createEventData(a,"dragging"))}),c.currentLifeList.length>1){if(b.ismutiltouching=!0,!b.option.useMulti)return;f.tap=!0,f.swipe=!0,b.triggerListener("log","multi touch move ..."),b.triggerListener("multichange",d,e);var h=b.getZoomRateAndRotateAngle(d,e);if(a.utils.isNum(h.rate)){var i=b._createEventData(d.startTouchEvent,"zoom");i.zoomRate=h.rate,b.triggerListener("zoom",b._createEventData(i,"zoom")),b.triggerListener("log","zoom triggered",h.rate)}if(a.utils.isNum(h.angle)){var i=b._createEventData(d.startTouchEvent,"rotate");i.angle=h.angle,b.triggerListener("rotate",b._createEventData(i,"rotate")),b.triggerListener("log","rotate triggered",h.angle)}return this}if(g.moveTouchEventList.length>0){b.ismutiltouching=!1;var j=g.startTouchEvent,k=Array.prototype.slice.call(g.moveTouchEventList,-1)[0];(Math.abs(k.pageX-j.pageX)>10||Math.abs(k.pageY-j.pageY)>10)&&(f.tap=!0,clearTimeout(this._longTapTimeout))}},c.onlifeend=function(a){if(b.triggerListener("dragend",b._createEventData(a.endTouchEvent,"dragend")),b.ismutiltouching=!0,1===c.currentLifeList.length)return b.ismutiltouching=!1,b.triggerListener("multiend",d,e);if(0===c.currentLifeList.length){if(b.ismutiltouching=!1,!f.tap&&a.endTime-a.startTime<300)return clearTimeout(this._longTapTimeout),d&&a.endTime-d.endTime<300&&Math.abs(d.endTouchEvent.pageX-a.endTouchEvent.pageX)<10&&Math.abs(d.endTouchEvent.pageY-a.endTouchEvent.pageY)<10?(b.triggerListener("doubletap",b._createEventData(a.endTouchEvent,"doubletap")),b.triggerListener("log","doubletap triggered"),d=null,this):(d=a,this);if(!f.swipe&&a.endTime-a.startTime<300){var g=a.startTouchEvent,h=Array.prototype.slice.call(a.moveTouchEventList,-1)[0];if(Math.abs(h.pageX-g.pageX)>30||Math.abs(h.pageY-g.pageY)>30){var i=b._getSwipeDirection(g.pageX,g.pageY,h.pageX,h.pageY),j="swipe"+i;b.triggerListener("log",j),a.endTouchEvent.swipeDirection=i,b.triggerListener(j,b._createEventData(a.endTouchEvent,j)),b.triggerListener("swipe",b._createEventData(a.endTouchEvent,"swipe")),console.log("swipe",j)}return this}}}},a.Gesture.prototype._initForPC=function(){var a=this,b=null,c=null,d=!1,e=null,f=-1,g=0;this.option.target.addEventListener("mousedown",function(c){c.identifier=++g,b=a._createEventData(c),f=setTimeout(function(){console.log("longtap",Date.now(),"..."),a.triggerListener("log","long tap ..."),a.triggerListener("longtap",a._createEventData(b,"longtap"))},750)}),this.option.target.addEventListener("mousemove",function(e){if(a.triggerListener("mousemove",a._createEventData(e,"mousemove")),b){if(b&&e.clientX===b.clientX&&e.clientY===b.clientY)return;if(c&&e.clientX===b.clientX&&e.clientY===b.clientY)return;clearTimeout(f),d||(a.triggerListener("dragstart",a._createEventData(b,"dragstart")),\nd=!0),e.identifier=g,a.triggerListener("dragging",a._createEventData(e,"dragging"))}else clearTimeout(f)}),this.option.target.addEventListener("mouseup",function(h){if(h.identifier=g,c=a._createEventData(h),d){if(clearTimeout(f),a.triggerListener("dragend",a._createEventData(h,"dragend")),d&&c.createTime-b.createTime<300&&(Math.abs(c.pageX-b.pageX)>30||Math.abs(c.pageY-b.pageY)>30)){var i=a._getSwipeDirection(b.pageX,b.pageY,c.pageX,c.pageY),j="swipe"+i;a.triggerListener("log",j),b.swipeDirection=i,a.triggerListener(j,a._createEventData(b,j)),a.triggerListener("swipe",a._createEventData(b,"swipe")),console.log("swipe",j)}return d=!1,b=null,null}if(!d&&b&&c.createTime-b.createTime<300){clearTimeout(f);var k=a._createEventData(b,"tap");return a.triggerListener("tap",k),a.triggerListener("log","tap triggered"),e&&k.createTime-e.createTime<300&&Math.abs(e.pageX-k.pageX)<10&&Math.abs(e.pageY-k.pageY)<10?(a.triggerListener("doubletap",a._createEventData(k,"doubletap")),a.triggerListener("log","doubletap triggered"),e=null,this):(e=k,b=null,this)}})},a.Gesture.prototype._createEventData=function(b,c){var d={type:"",target:null,identifier:-1,x:0,y:0,clientX:0,clientY:0,pageX:0,pageY:0,screenX:0,screenY:0,force:1,swipeDirection:"",zoomRate:1,angle:0,createTime:Date.now()};return d=a.utils.extend(d,b),d.type=c,d},a.Gesture.prototype._getSwipeDirection=function(a,b,c,d){return Math.abs(a-c)>=Math.abs(b-d)?a-c>0?"left":"right":b-d>0?"up":"down"},a.Gesture.prototype.getZoomRateAndRotateAngle=function(b,c){this.triggerListener("log","preLife"),this.triggerListener("log",b),this.triggerListener("log","curLife"),this.triggerListener("log",c);var d=b.startTouchEvent.pageX,e=b.startTouchEvent.pageY,f=c.startTouchEvent.pageX,g=c.startTouchEvent.pageY,h=b.moveTouchEventList.length>0?b.moveTouchEventList[b.moveTouchEventList.length-1]:b.startTouchEvent,i=c.moveTouchEventList.length>0?c.moveTouchEventList[c.moveTouchEventList.length-1]:c.startTouchEvent,j=h.pageX,k=h.pageY,l=i.pageX,m=i.pageY,n=new a.Math.Vector(f-d,g-e),o=new a.Math.Vector(l-j,m-k),p=Math.acos(o.dot(n)/(o.getLength()*n.getLength()))/Math.PI*180;return{rate:o.getLength()/n.getLength(),angle:p*(o.cross(n).z>0?-1:1)}},a.Gesture.prototype.enableMutiTouch=function(a){this.option.useMulti=!1}}(Ycc),function(a){var b=0;a.Layer=function(c,d){a.Listener.call(this),d=d||{},this.yccClass=a.Layer,this.uiList=[],this.uiCountRecursion=0,this.uiCountRendered=0,this.yccInstance=c,this.ctx=null,this.useCache=!1,this.ctxCache=null,this.ctxCacheRect=null,this.renderCacheRect=!1,this.id=b++,this.type="ui",this.textValue="",this.name=d.name?d.name:"图层_"+this.type+"_"+this.id,this.x=0,this.y=0,this.width=c.getStageWidth(),this.height=c.getStageHeight(),this.show=!0,this.ghost=!1,this.enableEventManager=!1,this.enableFrameEvent=!1,this.onFrameComing=function(){},a.utils.extend(this,d),this.init()},a.Layer.prototype=new a.Listener,a.Layer.prototype.constructor=a.Layer,a.Layer.release=function(b){a.Listener.release(b),b.yccClass=null,b.uiList=null,b.yccInstance=null,b.show=!1,b.enableEventManager=!1,b.enableFrameEvent=!1,b.onFrameComing=null},a.Layer.prototype.init=function(){var a=this;this.ctx=this.yccInstance.ctx,this.ctxCache=this.useCache?this.yccInstance.createCacheCtx({width:this.width*this.yccInstance.dpi,height:this.height*this.yccInstance.dpi}):this.ctx,a._setCtxProps()},a.Layer.prototype._initEvent=function(){function b(b){if(!b.stop&&!(e&&b.x===e.x&&b.y===e.y||f&&b.x===f.x&&b.y===f.y)){if(g=!0,e){if(!h){var c=new a.Event({type:"dragstart",x:e.x,y:e.y,mouseDownYccEvent:e});d.triggerListener(c.type,c),e.target&&(c.target=e.target,c.target.triggerListener(c.type,c))}h=!0;var i=new a.Event({type:"dragging",x:b.x,y:b.y,mouseDownYccEvent:e});return d.triggerListener(i.type,i),e.target&&(i.target=e.target,i.target.triggerListener(i.type,i)),null}for(var j=d.uiList.length-1;j>=0;j--){var k=d.uiList[j],l=new a.Math.Dot(b.x-k.belongTo.x,b.y-k.belongTo.y);if(l.isInRect(k.rect)){b.stop=!0,b.mouseDownYccEvent=e,b.mouseUpYccEvent=f,b.target=k,k.triggerListener(b.type,b);break}}}}function c(b){if(!b.stop)for(var c=d.uiList.length-1;c>=0;c--){var g=d.uiList[c],h=new a.Math.Dot(b.x,b.y);if(g.rect&&h.isInRect(g.getAbsolutePosition())&&b.stop===!1){b.stop=!0,b.mouseDownYccEvent=e,b.mouseUpYccEvent=f,b.target=g,b.targetDeltaPosition=new a.Math.Dot(b.x-g.getAbsolutePosition().x,b.y-g.getAbsolutePosition().y),g.triggerListener(b.type,b);break}}}var d=this,e=null,f=null,g=!1,h=!1;this.addListener("click",function(a){g||c(a)}),this.addListener("mousedown",function(a){g=!1,h=!1,e=a,c(a)}),this.addListener("mouseup",function(b){if(h){var g=new a.Event({type:"dragend",x:b.x,y:b.y,mouseDownYccEvent:e});d.triggerListener("dragend",g),e&&e.target&&(d.target=e.target,d.target.triggerListener("dragend",g))}b.mouseDownYccEvent=e=null,f=b,c(b)}),this.addListener("mousemove",b)},a.Layer.prototype._setCtxProps=function(b,c){var d=this;c=c||d.ctx;var e={fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:"16px",fontFamily:"微软雅黑",font:"16px 微软雅黑",textBaseline:"hanging",fillStyle:"red",strokeStyle:"blue"};e=a.utils.extend(e,b),e.fontSize=parseInt(e.fontSize)*this.yccInstance.getSystemInfo().devicePixelRatio+"px",e.font=[e.fontStyle,e.fontVariant,e.fontWeight,e.fontSize,e.fontFamily].join(" ");for(var f in e)e.hasOwnProperty(f)&&(c[f]=e[f])},a.Layer.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},a.Layer.prototype.removeAllUI=function(){this.uiList.forEach(function(b){a.UI.release(b)}),this.uiList.length=0,this.updateCache()},a.Layer.prototype.removeSelf=function(){this.removeAllUI(),this.yccInstance.layerManager.deleteLayer(this),a.Layer.release(this)},a.Layer.prototype.renderToStage=function(){this.show&&this.yccInstance.ctx.drawImage(this.ctx.canvas,0,0,this.width,this.height)},a.Layer.prototype.addUI=function(a,b){var c=this;a.itor().each(function(a){a.init(c)});var d=this.uiList.indexOf(b);return b&&d!==-1?(this.uiList.splice(d,0,a),a._onAdded&&a._onAdded(),this.updateCache(),a):(this.uiList.push(a),a._onAdded&&a._onAdded(),a)},a.Layer.prototype.removeUI=function(b){if(!b)return!1;var c=this.uiList.indexOf(b);return c!==-1&&(a.UI.release(b),this.uiList[c]=null,this.uiList.splice(c,1),this.updateCache(),!0)},a.Layer.prototype.render=function(a){this.reRender(a)},a.Layer.prototype.reRender=function(a){if(this.show)return this.useCache?this.renderCacheToStage(a):void this.renderAllToCtx(this.ctx)},a.Layer.prototype.renderCacheToStage=function(a){if(this.useCache){a&&this.updateCache();var b=this.yccInstance.dpi;if(this.ctxCacheRect){var c=this.ctxCacheRect.x*b,d=this.ctxCacheRect.y*b,e=this.ctxCacheRect.width*b,f=this.ctxCacheRect.height*b;this.ctx.drawImage(this.ctxCache.canvas,c,d,e,f,c,d,e,f)}else this.ctx.drawImage(this.ctxCache.canvas,0,0);this.ctx.draw&&this.ctx.draw()}},a.Layer.prototype.getUIFromPointer=function(b,c){c=!a.utils.isBoolean(c)||c;for(var d=this,e=null,f=0,g=0;g<this.uiList.length;g++){var h=d.uiList[g];c&&!h.show||this.uiList[g].itor().depthDown(function(a,d){return a.ghost?-1:c&&!a.show?-1:void(a.containDot(b)&&d>=f&&(e=a,f=d))})}return e},a.Layer.prototype.getUIListFromPointer=function(a){for(var b=[],c=0;c<this.uiList.length;c++)this.uiList[c].itor().depthDown(function(c,d){c.containDot(a)&&b.push(c)});return b},a.Layer.prototype.transformToAbsolute=function(b){var c=null;if(a.utils.isArray(b)){c=[];for(var d=0;d<b.length;d++){var e=new a.Math.Dot(0,0),f=b[d];e.x=this.x+f.x,e.y=this.y+f.y,c.push(e)}return c}return c=new a.Math.Dot(0,0),c.x=this.x+b.x,c.y=this.y+b.y,c},a.Layer.prototype.transformToLocal=function(b){var c=null;if(a.utils.isArray(b)){c=[];for(var d=0;d<b.length;d++){var e=new a.Math.Dot(0,0),f=b[d];e.x=f.x-this.x,e.y=f.y-this.y,c.push(e)}return c}return c=new a.Math.Dot(0,0),c.x=b.x-this.x,c.y=b.y-this.y,c},a.Layer.prototype.renderAllToCtx=function(a){var b=this;b.uiCountRecursion=0,b.uiCountRendered=0;for(var c=0;c<this.uiList.length;c++)this.uiList[c].show&&(this.uiList[c].itor().depthDown(function(a,c){if(b.uiCountRecursion++,!a.show)return-1;var d=a.__render();b.useCache&&b._mergeCtxCacheRect(a.getAbsolutePositionRect()),d||b.uiCountRendered++}),this.uiList[c]._onChildrenRendered&&this.uiList[c]._onChildrenRendered());var d=this.ctxCacheRect;if(this.useCache&&d&&this.renderCacheRect){var e=this.yccInstance.dpi,f=this.yccInstance.getStageWidth()/e,g=this.yccInstance.getStageHeight()/e,h=d.x<0?0:d.x,i=d.y<0?0:d.y,j=d.width>f?f:d.width,k=d.height>g?g:d.height;a.save(),a.beginPath(),a.strokeStyle="red",a.strokeWidth=2,a.rect(h*e,i*e,j*e,k*e),a.closePath(),a.stroke(),a.restore()}a.draw&&a.draw()},a.Layer.prototype._mergeCtxCacheRect=function(b){var c=this.yccInstance;if(!this.ctxCacheRect)return this.ctxCacheRect=new a.Math.Rect(b);var d=c.getStageWidth(),e=c.getStageHeight(),f=c.dpi,g=this.ctxCacheRect,h=g.x+g.width,i=g.y+g.height,j=b.x+b.width,k=b.y+b.height;return g.x=g.x<b.x?g.x:b.x,g.y=g.y<b.y?g.y:b.y,g.width=h<j?j-g.x:h-g.x,g.height=i<k?k-g.y:i-g.y,g.x=g.x<0?0:g.x,g.y=g.y<0?0:g.y,g.width=g.x+g.width>d/f?d/f-g.x:g.width,g.height=g.y+g.height>e/f?e/f-g.y:g.height,g},a.Layer.prototype.updateCache=function(){this.useCache&&(this.clearCache(),this.renderAllToCtx(this.ctxCache))},a.Layer.prototype.clearCache=function(){var a=this.ctxCache.canvas.width;this.ctxCache.canvas.width=a,this.ctxCacheRect=null}}(Ycc),function(a){a.LayerManager=function(a){this.yccInstance=a,this.renderTime=0,this.maxRenderTime=0,this.renderUiCount=0},a.LayerManager.prototype.init=function(){},a.LayerManager.prototype.newLayer=function(b){var c=new a.Layer(this.yccInstance,b);return this.yccInstance.layerList.push(c),c},a.LayerManager.prototype.deleteLayer=function(a){for(var b=this.yccInstance.layerList,c=0;c<b.length;c++)if(b[c].id===a.id)return this.yccInstance.layerList.splice(c,1),a;return a},a.LayerManager.prototype.deleteAllLayer=function(){for(var b=0;b<this.yccInstance.layerList.length;b++){var c=this.yccInstance.layerList[b];c.removeAllUI(),a.Layer.release(c),c=null}this.yccInstance.layerList=[]},a.LayerManager.prototype.reRenderAllLayerToStage=function(a){var b=this.yccInstance;if(b.ticker.currentFrame&&b.ticker.currentFrame.isRendered)return console.log("stop overdraw!");var c=Date.now();this.renderUiCount=0,this.yccInstance.clearStage();for(var d=0;d<this.yccInstance.layerList.length;d++){var e=this.yccInstance.layerList[d];e.show&&(e.reRender(a),this.renderUiCount+=e.uiCountRendered)}this.renderTime=Date.now()-c,this.maxRenderTime=this.renderTime>this.maxRenderTime?this.renderTime:this.maxRenderTime,b.ticker.currentFrame&&(b.ticker.currentFrame.isRendered=!0)},a.LayerManager.prototype.enableEventManagerOnly=function(a){if(!a)return!1;for(var b=0;b<this.yccInstance.layerList.length;b++)this.yccInstance.layerList[b].enableEventManager=!1;return a.enableEventManager=!0,this},a.LayerManager.prototype.enableEventManagerAll=function(a){for(var b=0;b<this.yccInstance.layerList.length;b++)this.yccInstance.layerList[b].enableEventManager=a;return this},a.LayerManager.prototype.renderAllLayerByJsonArray=function(b){if(!a.utils.isArray(b))return console.error("jsonArray is not an Array!",b);for(var c=this,d=0;d<b.length;d++){var e=b[d];if(!a.utils.isObj(e))return console.error("item in jsonArray should be an Object!",e);for(var f=c.newLayer(e.option),g=0;g<e.ui.length;g++){var h=e.ui[g];f.addUI(new a.UI[h.type](h.option))}f.render()}}}(Ycc),function(a){var b=function(a){this.imageData=a,this.createTime=new Date,this.id=this.createTime.getTime()};a.PhotoManager=function(a){this.yccInstance=a,this.ctx=a.ctx,this._photos=[]},a.PhotoManager.prototype.takePhoto=function(){return this._photos.push(new b(this.ctx.getImageData(0,0,this.yccInstance.getStageWidth(),this.yccInstance.getStageHeight()))),this},a.PhotoManager.prototype.getHistoryPhotos=function(){return this._photos},a.PhotoManager.prototype.showPhoto=function(a){return this.ctx.putImageData(a.imageData,0,0),a},a.PhotoManager.prototype.showLastPhoto=function(){var a=this._photos.length,b=!1;return a>=1&&(b=this._photos[a-1],this.showPhoto(b)),b},a.PhotoManager.prototype.delPhotoById=function(a){for(var b=this._photos.slice(0),c=0;c<b.length;c++)if(b[c].id===a)return b.splice(c+1,1),this._photos=b,b[c];return!1}}(Ycc),function(a){if(!a||!a.utils)return console.error("Error: Ycc.ui needs module `Ycc` and `Ycc.utils`!");a.utils.isObj,a.utils.isArray,a.utils.isString,a.utils.isNum,a.utils.extend;a.UI=function(b){this.yccClass=a.UI,this._photos=[],this.ctx=b.ctx,this.ctxWidth=b.getStageWidth(),this.ctxHeight=b.getStageHeight()},a.UI.prototype.text=function(a,b,c){return this.ctx.save(),c?this.ctx.fillText(b,a[0],a[1]):this.ctx.strokeText(b,a[0],a[1]),this.ctx.restore(),this},a.UI.prototype.line=function(a,b){return this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(a[0],a[1]),this.ctx.lineTo(b[0],b[1]),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore(),this},a.UI.prototype.rect=function(a,b,c){return this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(a[0],a[1],b[0]-a[0],b[1]-a[1]),this.ctx.closePath(),c?this.ctx.fill():this.ctx.stroke(),this.ctx.restore(),this},a.UI.prototype.ellipse=function(a,b,c,d,e){this.ctx.save();var f=b>c?b:c,g=b/f,h=c/f;return this.ctx.translate(a[0],a[1]),this.ctx.rotate(parseInt(d)*Math.PI/180),this.ctx.translate(-a[0],-a[1]),this.ctx.scale(g,h),this.ctx.beginPath(),this.ctx.arc(a[0]/g,a[1]/h,f,0,2*Math.PI,!1),this.ctx.closePath(),e?this.ctx.fill():this.ctx.stroke(),this.ctx.restore(),this},a.UI.prototype.circleArc=function(a,b,c,d,e){return this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(a[0],a[1],b,c/180*Math.PI,d/180*Math.PI,e),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore(),this},a.UI.prototype.sector=function(a,b,c,d,e,f){return this.ctx.save(),this.ctx.beginPath(),this.ctx.lineTo(a[0],a[1]),this.ctx.arc(a[0],a[1],b,c*Math.PI/180,d*Math.PI/180,f),this.ctx.lineTo(a[0],a[1]),this.ctx.closePath(),e?this.ctx.fill():this.ctx.stroke(),this.ctx.restore(),this},a.UI.prototype.foldLine=function(a){if(a.length<2)return console.error("Error: 参数错误！");this.ctx.save(),this.ctx.beginPath(),this.ctx.moveTo(a[0][0],a[0][1]);for(var b=0;b<a.length;b++)this.ctx.lineTo(a[b][0],a[b][1]);return this.ctx.stroke(),this.ctx.restore(),this},a.UI.prototype.circle=function(a,b,c){return this.ellipse(a,b,b,0,c),this},a.UI.prototype.image=function(a,b){var c=this;return b=b||[0,0],c.ctx.save(),c.ctx.beginPath(),c.ctx.drawImage(a,b[0],b[1]),c.ctx.closePath(),c.ctx.restore(),this},a.UI.prototype._getMaxLenContent=function(a,b){var c=a,d=0;if(this.ctx.measureText(a).width<=b)return a;for(var e=0;e<a.length;e++)if(c=a.slice(0,e),d=this.ctx.measureText(c).width,d>b)return a.slice(0,e-1)},a.UI.prototype.scale=function(a,b){return this.ctx.scale(a,b),this},a.UI.prototype.clear=function(){var a={fillStyle:"#fff"};return this.ctx.fillStyle=a.fillStyle,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(0,0,this.ctxWidth,this.ctxHeight),this.ctx.fill(),this.ctx.closePath(),this.ctx.restore(),this}}(Ycc),function(a){var b=0,c=1;a.UI.Base=function(c){a.Listener.call(this),a.Tree.call(this),this.yccClass=a.UI.Base,this.id=b++,this.name="",this.ctx=null,this.ctxCache=null,this.dpi=1,this.rect=new a.Math.Rect,this.x=0,this.y=0,this.anchorX=0,this.anchorY=0,this.rotation=0,this.rectBgColor="rgba(0,0,0,0)",this.rectBorderWidth=0,this.rectBorderColor="#000",this.show=!0,this.ghost=!1,this.stopEventBubbleUp=!0,this.opacity=1,this.lineWidth=1,this.fillStyle="black",this.strokeStyle="black",this.belongTo=null,this.userData=null,this.isShowRotateBeforeUI=!1,this.baseUI=null,this._beforeInit=null,this._afterInit=null,this._onAdded=null,this._onChildrenRendered=null,this.oncomputestart=null,this.oncomputeend=null,this.onrenderstart=null,this.onrenderend=null,this.extend(c)},a.utils.mergeObject(a.UI.Base.prototype,a.Listener.prototype),a.utils.mergeObject(a.UI.Base.prototype,a.Tree.prototype),a.UI.Base.prototype.init=function(b){a.utils.isFn(this._beforeInit)&&this._beforeInit(),this.belongTo=b,this.ctx=b.ctx,this.ctxCache=this.belongTo.ctxCache,this.dpi=this.belongTo.yccInstance.getSystemInfo().devicePixelRatio,a.utils.isFn(this._afterInit)&&this._afterInit()},a.UI.Base.prototype.computeUIProps=function(){},a.UI.Base.prototype.renderRectBgColor=function(){var b=this.getAbsolutePositionPolygon();if(!b||0===b.length)return console.log(new a.Debugger.Log("no polygon coordirates!").message);var c=this.ctxCache;c.save(),c.fillStyle=this.rectBgColor,c.beginPath(),c.moveTo(b[0].x*this.dpi,b[0].y*this.dpi);for(var d=1;d<b.length-1;d++)c.lineTo(b[d].x*this.dpi,b[d].y*this.dpi);c.closePath(),c.fill(),c.restore()},a.UI.Base.prototype.renderRectBorder=function(){if(!(this.rectBorderWidth<=0)){var b=this.getAbsolutePositionPolygon();if(!b||0===b.length)return console.log(new a.Debugger.Log("no polygon coordirates!").message);var c=this.ctxCache;c.save(),c.setLineDash&&c.setLineDash([0]),c.strokeStyle=this.rectBorderColor,c.lineWidth=this.rectBorderWidth,c.beginPath(),c.moveTo(b[0].x*this.dpi,b[0].y*this.dpi);for(var d=1;d<b.length-1;d++)c.lineTo(b[d].x*this.dpi,b[d].y*this.dpi);c.closePath(),c.stroke(),c.restore()}},a.UI.Base.prototype.renderDashBeforeUI=function(a){},a.UI.Base.prototype.removeSelf=function(){this.belongTo.removeUI(this)},a.UI.Base.prototype.addChild=function(a){return this.belongTo&&a.init(this.belongTo),this.addChildTree(a),a},a.UI.Base.prototype.removeChild=function(b){return this.removeChildTree(b),a.UI.release(b),this},a.UI.Base.prototype.scaleAndRotate=function(){var a=this.getAbsolutePositionRect();this.ctx.translate(this.anchorX+a.x,this.anchorY+a.y),this.ctx.rotate(this.rotation*Math.PI/180),this.ctx.translate(-this.anchorX-a.x,-this.anchorY-a.y)},a.UI.Base.prototype.isOutOfStage=function(){var a=this.belongTo.yccInstance.getStageWidth(),b=this.belongTo.yccInstance.getStageHeight(),c=this.getAbsolutePositionRect();return c.x>a||c.x+c.width<0||c.y>b||c.y+c.height<0},a.UI.Base.prototype.isOutOfRect=function(a){var b=a.x,c=a.y,d=a.width,e=a.height,f=this.getAbsolutePositionRect();return f.x>d||f.x+f.width<b||f.y>e||f.y+f.height<c},a.UI.release=function(b){b.itor().leftChildFirst(function(b){b.yccClass!==a.UI.Image&&b.yccClass!==a.UI.ImageFrameAnimation||(b.res=null),a.Tree.release(b),a.Listener.release(b),b.yccInstance=null,b.yccClass=null,b.ctx=null,b.belongTo=null,b.userData=null,b.baseUI=null,b._beforeInit=null,b._afterInit=null,b.oncomputestart=null,b.oncomputeend=null,b.onrenderstart=null,b.onrenderend=null})},a.UI.Base.prototype.render=function(){},a.UI.Base.prototype._renderContainer=function(a){var b=a,c=this.ctxCache;c.save(),c.beginPath(),c.strokeStyle="#ff0000",c.rect(b.x*this.dpi,b.y*this.dpi,b.width*this.dpi,b.height*this.dpi),c.closePath(),c.stroke(),c.restore(),b=null},a.UI.Base.prototype.__render=function(){this.triggerListener("computestart",new a.Event("computestart"));var b=this.computeUIProps();if(this.triggerListener("computeend",new a.Event("computeend")),b)return b;if(!this.belongTo.useCache&&this.isOutOfStage())return{message:"UI超出舞台！"};if(this.belongTo.useCache&&this.isOutOfRect(new a.Math.Rect(0,0,this.ctxCache.canvas.width*this.dpi,this.ctxCache.canvas.height*this.dpi)))return{message:"UI超出离屏Canvas！"};this._processBeforeRender();var c=this.getAbsolutePositionRect();this.renderRectBgColor(c),this.renderRectBorder(c),this.renderDashBeforeUI(this.ctxCache),this.belongTo.yccInstance.config.debugDrawContainer&&this._renderContainer(c),this.render(),this._processAfterRender()},a.UI.Base.prototype._processBeforeRender=function(){this.triggerListener("renderstart",new a.Event("renderstart")),c=this.ctx.globalAlpha,this.ctx.globalAlpha=this.opacity},a.UI.Base.prototype._processAfterRender=function(){this.ctx.globalAlpha=c,this.triggerListener("renderend",new a.Event("renderend"))},a.UI.Base.prototype.getMaxContentInWidth=function(a,b){var c=a,d=0,e=this.ctxCache;if(e.measureText(a).width<=b)return a;for(var f=0;f<a.length;f++)if(c=a.slice(0,f+1),d=e.measureText(c).width,d>b)return a.slice(0,f)},a.UI.Base.prototype.extend=function(a){a=a||{};for(var b in this)"undefined"!=typeof a[b]&&(this[b]=a[b]);return this},a.UI.Base.prototype.clone=function(){var a=new this.yccClass;return a.extend(this),a},a.UI.Base.prototype.getAbsolutePositionPolygon=function(){},a.UI.Base.prototype.getAbsolutePositionRect=function(){var b=this.getAbsolutePosition();return new a.Math.Rect(b.x,b.y,this.rect.width,this.rect.height)},a.UI.Base.prototype.getAbsolutePosition=function(){var b=new a.Math.Rect,c=this.getParent();if(b.width=this.rect.width,b.height=this.rect.height,c){var d=c.getAbsolutePosition();b.x=this.rect.x+d.x,b.y=this.rect.y+d.y}else b.x=this.rect.x+this.belongTo.x,b.y=this.rect.y+this.belongTo.y;return b},a.UI.Base.prototype.transformToAbsolute=function(b){var c=this;if(a.utils.isArray(b))return b.map(function(a){return c.transformToAbsolute(a)});var d=this.getParent();if(d){var e=d.getAbsolutePosition();return new a.Math.Dot(b.x+e.x,b.y+e.y)}return new a.Math.Dot(b.x+this.belongTo.x,b.y+this.belongTo.y)},a.UI.Base.prototype.transformToLocal=function(b){var c=null,d=this.getAbsolutePosition();if(a.utils.isArray(b)){c=[];for(var e=0;e<b.length;e++){var f=new a.Math.Dot(0,0),g=b[e];f.x=g.x-d.x+this.x,f.y=g.y-d.y+this.y,c.push(f)}return c}return c=new a.Math.Dot(0,0),c.x=b.x-d.x+this.x,c.y=b.y-d.y+this.y,c},a.UI.Base.prototype.containDot=function(a){return a.isInRect(this.getAbsolutePosition())},a.UI.Base.prototype.getDeepLevel=function(){return this.getParentList().length+1},a.UI.Base.prototype.transformByRotate=function(b){var c=this;if(a.utils.isArray(b))return b.map(function(a){return c.transformByRotate(a)});var d=new a.Math.Dot,e=(this.getAbsolutePosition(),b.x),f=b.y,g=(e-this.anchorX)*Math.cos(this.rotation/180*Math.PI)-(f-this.anchorY)*Math.sin(this.rotation/180*Math.PI)+this.anchorX,h=(f-this.anchorY)*Math.cos(this.rotation/180*Math.PI)+(e-this.anchorX)*Math.sin(this.rotation/180*Math.PI)+this.anchorY;return d=this.transformToAbsolute({x:g,y:h})},a.UI.Base.prototype._setCtxProps=function(b,c){var d=this;c=c||d.ctxCache;var e={fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:"16px",fontFamily:"微软雅黑",font:"16px 微软雅黑",textBaseline:"hanging",fillStyle:"red",strokeStyle:"blue"};e=a.utils.extend(e,b),e.fontSize=parseInt(e.fontSize)*this.dpi+"px",e.font=[e.fontStyle,e.fontVariant,e.fontWeight,e.fontSize,e.fontFamily].join(" ");for(var f in e)e.hasOwnProperty(f)&&(c[f]=e[f])},a.UI.Base.prototype.triggerUIEventBubbleUp=function(b,c,d,e){var f=this,g=[];if(f&&f.belongTo&&f.belongTo.enableEventManager){if(f.triggerListener(b,new a.Event({x:c,y:d,type:b,target:f,originEvent:e})),f.stopEventBubbleUp)return;for(var h=f.getParentList().reverse(),i=0;i<h.length;i++){var j=h[i];if(j.triggerListener(b,new a.Event({x:c,y:d,type:b,target:j,originEvent:e})),g.push(j),j.stopEventBubbleUp)break}}return g}}(Ycc),function(a){a.UI.Polygon=function(b){b=b||{},a.UI.Base.call(this,b),this.yccClass=a.UI.Polygon,this.x=0,this.y=0,this.fill=!0,this.fillStyle="blue",this.noneZeroMode=1,this.isDrawIndex=!1,this.coordinates=b.coordinates||[],this.extend(b)},a.utils.mergeObject(a.UI.Polygon.prototype,a.UI.Base.prototype),a.UI.Polygon.prototype.constructor=a.UI.Polygon,a.UI.Polygon.prototype.computeUIProps=function(){this.coordinates[0]&&(this.x=this.coordinates[0].x,this.y=this.coordinates[0].y)},a.UI.Polygon.prototype.render=function(a){var b=this;return a=a||b.ctxCache,b.ctx?(a.save(),a.fillStyle=this.fillStyle,a.strokeStyle=this.strokeStyle,this.renderPath(a),this.fill?a.fill():a.stroke(),void a.restore()):void console.error("[Ycc error]:","ctx is null !")},a.UI.Polygon.prototype.renderPath=function(){if(0!==this.coordinates.length){var a=this.ctxCache,b=this.transformByRotate(this.coordinates[0]);a.beginPath(),a.moveTo(b.x*this.dpi,b.y*this.dpi);for(var c=0;c<this.coordinates.length-1;c++){var d=this.transformByRotate(this.coordinates[c]);this.isDrawIndex&&a.fillText(c+"",d.x-10,d.y+10),a.lineTo(d.x*this.dpi,d.y*this.dpi)}a.closePath()}},a.UI.Polygon.prototype.getAbsolutePositionPolygon=function(){var a=this;return this.coordinates.map(function(b){return a.transformByRotate(b)})},a.UI.Polygon.prototype.getAbsolutePosition=function(b){b=b||new a.Math.Dot(this.x,this.y);var c=this.getParent();if(c){var d=c.getAbsolutePosition();b.x+=d.x,b.y+=d.y}else b.x=this.x+this.belongTo.x,b.y=this.y+this.belongTo.y;return b},a.UI.Polygon.prototype.getAbsolutePositionRect=function(){if(!this.coordinates[0])return console.log(new a.Debugger.Error("need compute prop coordinates").message);for(var b=this.coordinates[0],c=b.x,d=b.y,e=b.x,f=b.y,g=0;g<this.coordinates.length-1;g++){var h=this.coordinates[g];h.x<c&&(c=h.x),h.x>=e&&(e=h.x),h.y<d&&(d=h.y),h.y>=f&&(f=h.y)}var i=this.transformToAbsolute({x:c,y:d});return new a.Math.Rect(i.x,i.y,e-c,f-d)},a.UI.Polygon.prototype.renderDashBeforeUI=function(b){if(this.isShowRotateBeforeUI&&0!==this.coordinates.length){var c=this;b=b||c.ctx;var d=this.getParent(),e=d?d.getAbsolutePosition():new a.Math.Dot,f=new a.Math.Dot(this.coordinates[0].x+e.x,this.coordinates[0].y+e.y);b.save(),b.setLineDash&&b.setLineDash([10]),b.beginPath(),b.moveTo(f.x*this.dpi,f.y*this.dpi);for(var g=0;g<c.coordinates.length-1;g++){var h=c.coordinates[g];b.lineTo(h.x*this.dpi+e.x*this.dpi,h.y*this.dpi+e.y*this.dpi)}b.closePath(),b.strokeStyle=this.strokeStyle,b.stroke(),b.restore()}},a.UI.Polygon.prototype.containDot=function(a,b){b=b||this.noneZeroMode;for(var c=a,d=c.x,e=c.y,f=0,g=0,h=0,i=0;i<this.coordinates.length-1;i++){var j=this.transformByRotate(this.coordinates[i]),k=this.transformByRotate(this.coordinates[i+1]);if(j.x!==k.x){var l=(k.y-j.y)/(k.x-j.x),m=(e-j.y)/l+j.x;d>m||(k.x>j.x&&m>=j.x&&m<=k.x&&(f++,l>=0?g++:h++),k.x<j.x&&m>=k.x&&m<=j.x&&(f++,l>=0?h++:g++))}else{if(d>j.x)continue;k.y>j.y&&e>=j.y&&e<=k.y&&(g++,f++),k.y<j.y&&e>=k.y&&e<=j.y&&(h++,f++)}}return 1===b?g-h!==0:f%2===1}}(Ycc),function(a){a.UI.Ellipse=function(b){a.UI.Polygon.call(this,b),this.yccClass=a.UI.Ellipse,this.point=new a.Math.Dot,this.width=20,this.height=10,this.angle=0,this.color="black",this.fill=!1,this.extend(b)},a.utils.mergeObject(a.UI.Ellipse.prototype,a.UI.Polygon.prototype),a.UI.Ellipse.prototype.constructor=a.UI.Ellipse,a.UI.Ellipse.prototype.computeUIProps=function(){var a=this.point.x,b=this.point.y,c=this.width/2,d=this.height/2,e=this.angle/180*Math.PI,f=Math.sqrt(Math.cos(e)*Math.cos(e)*d*d+Math.sin(e)*Math.sin(e)*c*c)+b,g=-f+2*b,h=Math.sqrt(Math.cos(e)*Math.cos(e)*c*c+Math.sin(e)*Math.sin(e)*d*d)+a,i=-h+2*a;this.rect.x=i,this.rect.y=g,this.rect.width=h-i,this.rect.height=f-g,this.coordinates=this.rect.getVertices(),this.x=this.point.x,this.y=this.point.y},a.UI.Ellipse.prototype.render=function(){var a=this.width*this.dpi,b=this.angle,c=this.height*this.dpi,d=this.transformByRotate(this.point),e=this.ctxCache;e.save();var f=a>c?a:c,g=d.x*this.dpi,h=d.y*this.dpi,i=a/f,j=c/f;e.translate(g,h),e.rotate(parseInt(b)*Math.PI/180),e.translate(-g,-h),e.scale(i,j),e.beginPath(),e.arc(g/i,h/j,f/2,0,2*Math.PI,!1),e.closePath(),e.fillStyle=this.ctx.strokeStyle=this.color,this.fill?e.fill():e.stroke(),e.restore()},a.UI.Ellipse.prototype.containDot=function(b,c){var d=this.transformByRotate(this.point);return b=new a.Math.Dot(b).rotate(-this.angle,d),Math.pow((b.x-d.x)/this.width*2,2)+Math.pow((b.y-d.y)/this.height*2,2)<=1},a.UI.Ellipse.prototype.renderDashBeforeUI=function(a){if(this.isShowRotateBeforeUI&&0!==this.coordinates.length){var b=this.width,c=(this.angle,this.height),d=this.getParent(),e=d?d.transformToAbsolute(this.point):this.point;this.ctx.save();var f=b>c?b:c,g=b/f,h=c/f;this.ctx.scale(g,h),this.ctx.beginPath(),this.ctx.arc(e.x/g,e.y/h,f/2,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.strokeStyle=this.color,this.ctx.setLineDash&&this.ctx.setLineDash([10]),this.ctx.stroke(),this.ctx.restore()}}}(Ycc),function(a){a.UI.Circle=function(b){a.UI.Polygon.call(this,b),this.yccClass=a.UI.Circle,this.point=null,this.r=10,this.color="black",this.fill=!0,this.lineWidth=1,this.extend(b)},a.utils.mergeObject(a.UI.Circle.prototype,a.UI.Polygon.prototype),a.UI.Circle.prototype.computeUIProps=function(){if(!this.point)return new a.Debugger.Error("Circle need prop point");var b=this.point.x,c=this.point.y,d=this.r;this.rect=new a.Math.Rect(b-d,c-d,2*d,2*d),this.coordinates=this.rect.getVertices(),this.x=this.point.x,this.y=this.point.y},a.UI.Circle.prototype.render=function(){var a=this.ctxCache,b=this.transformByRotate(this.point);a.save(),a.beginPath(),a.fillStyle=this.color,a.strokeStyle=this.color,a.lineWidth=this.lineWidth,a.arc(b.x*this.dpi,b.y*this.dpi,this.r*this.dpi,0,2*Math.PI),a.closePath(),this.fill?a.fill():a.stroke(),a.restore()},a.UI.Circle.prototype.renderDashBeforeUI=function(a){if(this.isShowRotateBeforeUI&&0!==this.coordinates.length){a=this.ctx;var b=this.getParent(),c=b?b.transformToAbsolute(this.point):this.point;a.save(),a.setLineDash&&a.setLineDash([10]),a.beginPath(),this.ctx.arc(c.x,c.y,this.r,0,2*Math.PI),a.closePath(),a.strokeStyle=this.color,a.stroke(),a.restore()}},a.UI.Circle.prototype.containDot=function(a,b){var c=this.transformByRotate(this.point);return Math.pow(a.x-c.x,2)+Math.pow(a.y-c.y,2)<=Math.pow(this.r,2)}}(Ycc),function(a){a.UI.Image=function(b){a.UI.Polygon.call(this,b),this.yccClass=a.UI.Image,this.fillMode="none",this.res=null,this.mirror=0,this.scale9GridRect=null,this.scaleRepeatRect=null,this.extend(b)},a.utils.mergeObject(a.UI.Image.prototype,a.UI.Polygon.prototype),a.UI.Image.prototype.constructor=a.UI.Image,a.UI.Image.prototype.computeUIProps=function(){"auto"===this.fillMode&&(this.rect.width=this.res.width,this.rect.height=this.res.height),this.coordinates=this.rect.getVertices(),this.x=this.rect.x,this.y=this.rect.y},a.UI.Image.prototype._processMirror=function(a){var b=this.ctxCache,c=a.x*this.dpi,d=a.y*this.dpi,e=a.width*this.dpi,f=a.height*this.dpi;1===this.mirror&&(b.scale(-1,1),b.translate(2*-c-e,0)),2===this.mirror&&(b.scale(1,-1),b.translate(0,2*-d-f)),3===this.mirror&&(b.scale(-1,-1),b.translate(2*-c-e,2*-d-f))},a.UI.Image.prototype.render=function(){var b=this.ctxCache;b.save();var c,d,e,f,g,h,i=this.getAbsolutePositionRect(),j=this.res,k=i.x*this.dpi,l=i.y*this.dpi,m=i.width*this.dpi,n=i.height*this.dpi,o=j.width*this.dpi,p=j.height*this.dpi,q=this.transformToAbsolute({x:this.anchorX,y:this.anchorY});if(b.translate(q.x*this.dpi,q.y*this.dpi),b.rotate(this.rotation*Math.PI/180),b.translate(-q.x*this.dpi,-q.y*this.dpi),this._processMirror(i),"none"===this.fillMode)b.drawImage(this.res,0,0,i.width,i.height,i.x,i.y,i.width,i.height);else if("scale"===this.fillMode)b.drawImage(this.res,0,0,j.width,j.height,k,l,m,n);else if("auto"===this.fillMode)b.drawImage(this.res,0,0,j.width,j.height,k,l,m,n);else if("repeat"===this.fillMode)for(e=parseInt(m/o)+1,f=parseInt(n/p)+1,c=0;c<e;c++)for(d=0;d<f;d++)g=j.width,h=j.height,c===e-1&&(g=i.width-c*j.width),d===f-1&&(h=i.height-d*j.height),b.drawImage(this.res,0,0,g,h,k+o*c,l+p*d,g*this.dpi,h*this.dpi);else if("scaleRepeat"===this.fillMode)for(e=parseInt(i.width/this.scaleRepeatRect.width)+1,f=parseInt(i.height/this.scaleRepeatRect.height)+1,c=0;c<e;c++)for(d=0;d<f;d++)g=this.scaleRepeatRect.width,h=this.scaleRepeatRect.height,c===e-1&&(g=i.width-c*this.scaleRepeatRect.width),d===f-1&&(h=i.height-d*this.scaleRepeatRect.height),this.ctx.drawImage(this.res,0,0,j.width,j.height,i.x*this.dpi+this.scaleRepeatRect.width*c,i.y*this.dpi+this.scaleRepeatRect.height*d,g*this.dpi,h*this.dpi);else if("scale9Grid"===this.fillMode){var r,s,t=this.scale9GridRect,u=[];u[0]={},u[0].src=new a.Math.Rect(0,0,t.x,t.y),u[0].dest=new a.Math.Rect(i.x,i.y,t.x,t.y),u[2]={},u[2].src=new a.Math.Rect(t.x+t.width,0,j.width-t.x-t.width,t.y),u[2].dest=new a.Math.Rect(i.width-u[2].src.width+i.x,i.y,u[2].src.width,u[2].src.height),u[6]={},u[6].src=new a.Math.Rect(0,t.y+t.height,t.x,j.height-t.y-t.height),u[6].dest=new a.Math.Rect(i.x,i.y+i.height-u[6].src.height,u[6].src.width,u[6].src.height),u[8]={},u[8].src=new a.Math.Rect(t.x+t.width,t.y+t.height,j.width-t.x-t.width,j.height-t.y-t.height),\nu[8].dest=new a.Math.Rect(i.width-u[8].src.width+i.x,i.y+i.height-u[8].src.height,u[8].src.width,u[8].src.height),u[1]={},u[1].src=new a.Math.Rect(t.x,0,t.width,t.y),u[1].dest=new a.Math.Rect(u[0].dest.x+u[0].dest.width,i.y,i.width-u[0].dest.width-u[2].dest.width,t.y),u[3]={},u[3].src=new a.Math.Rect(u[0].src.x,t.y,u[0].src.width,t.height),u[3].dest=new a.Math.Rect(u[0].dest.x,u[0].dest.y+u[0].dest.height,u[0].dest.width,i.height-u[0].dest.height-u[6].dest.height),u[5]={},u[5].src=new a.Math.Rect(u[2].src.x,t.y,u[2].src.width,t.height),u[5].dest=new a.Math.Rect(u[2].dest.x,u[3].dest.y,u[2].dest.width,u[3].dest.height),u[7]={},u[7].src=new a.Math.Rect(u[1].src.x,u[6].src.y,t.width,u[6].src.height),u[7].dest=new a.Math.Rect(u[1].dest.x,u[6].dest.y,u[1].dest.width,u[6].dest.height),u[4]={},u[4].src=new a.Math.Rect(t.x,t.y,t.width,t.height),u[4].dest=new a.Math.Rect(u[1].dest.x,u[5].dest.y,u[1].dest.width,u[5].dest.height);for(var v=0;v<u.length;v++)u[v]&&(r=u[v].src,s=u[v].dest,b.drawImage(this.res,r.x,r.y,r.width,r.height,s.x*this.dpi,s.y*this.dpi,s.width*this.dpi,s.height*this.dpi))}b.restore()}}(Ycc),function(a){a.UI.ImageFrameAnimation=function(b){a.UI.Polygon.call(this,b),this.yccClass=a.UI.ImageFrameAnimation,this.res=null,this.frameSpace=1,this.firstFrameRect=null,this.startFrameCount=0,this.frameRectCount=1,this.autoplay=!1,this.isRunning=!1,this.mirror=0,this.extend(b),this.isRunning=this.autoplay},a.utils.mergeObject(a.UI.ImageFrameAnimation.prototype,a.UI.Polygon.prototype),a.UI.ImageFrameAnimation.prototype.constructor=a.UI.ImageFrameAnimation,a.UI.ImageFrameAnimation.prototype.computeUIProps=function(){this.coordinates=this.rect.getVertices(),this.x=this.rect.x,this.y=this.rect.y},a.UI.ImageFrameAnimation.prototype._processMirror=function(a){var b=this.ctxCache,c=a.x*this.dpi,d=a.y*this.dpi,e=a.width*this.dpi,f=a.height*this.dpi;1===this.mirror&&(b.scale(-1,1),b.translate(2*-c-e,0)),2===this.mirror&&(b.scale(1,-1),b.translate(0,2*-d-f)),3===this.mirror&&(b.scale(-1,-1),b.translate(2*-c-e,2*-d-f))},a.UI.ImageFrameAnimation.prototype.render=function(){var a=this.ctxCache,b=this.getAbsolutePositionRect(),c=b.x*this.dpi,d=b.y*this.dpi,e=b.width*this.dpi,f=b.height*this.dpi,g=parseInt((this.belongTo.yccInstance.ticker.frameAllCount-this.startFrameCount)/this.frameSpace)%this.frameRectCount+1;(!this.isRunning||g>=this.frameRectCount)&&(g=0),a.save(),this.scaleAndRotate(),this._processMirror(b),a.drawImage(this.res,this.firstFrameRect.x+this.firstFrameRect.width*g,this.firstFrameRect.y,this.firstFrameRect.width,this.firstFrameRect.height,c,d,e,f),a.restore()},a.UI.ImageFrameAnimation.prototype.start=function(){this.startFrameCount=this.belongTo.yccInstance.ticker.frameAllCount,this.isRunning=!0},a.UI.ImageFrameAnimation.prototype.stop=function(){this.isRunning=!1}}(Ycc),function(a){a.UI.Line=function(b){a.UI.Polygon.call(this,b),this.yccClass=a.UI.Line,this.start=new a.Math.Dot(0,0),this.end=new a.Math.Dot(0,0),this.width=1,this.color="black",this.extend(b)},a.utils.mergeObject(a.UI.Line.prototype,a.UI.Polygon.prototype),a.UI.Line.prototype.constructor=a.UI.Line,a.UI.Line.prototype.computeUIProps=function(){this.rect.x=this.start.x<this.end.x?this.start.x:this.end.x,this.rect.y=this.start.y<this.end.y?this.start.y:this.end.y,this.rect.width=Math.abs(this.start.x-this.end.x),this.rect.height=Math.abs(this.start.y-this.end.y);var a=this.start.x,b=this.start.y,c=this.end.x,d=this.end.y,e=-(c-a)/(d-b);if(d-b===0)this.coordinates=[{x:this.start.x,y:this.start.y-this.width/2},{x:this.start.x,y:this.start.y+this.width/2},{x:this.end.x,y:this.end.y+this.width/2},{x:this.end.x,y:this.end.y-this.width/2},{x:this.start.x,y:this.start.y-this.width/2}];else{var f=a-Math.pow(Math.pow(this.width/2,2)/(e*e+1),.5),g=a+Math.pow(Math.pow(this.width/2,2)/(e*e+1),.5),h=c+Math.pow(Math.pow(this.width/2,2)/(e*e+1),.5),i=c-Math.pow(Math.pow(this.width/2,2)/(e*e+1),.5),j=e*(f-a)+b,k=e*(g-a)+b,l=e*(h-c)+d,m=e*(i-c)+d;this.coordinates=[{x:f,y:j},{x:g,y:k},{x:h,y:l},{x:i,y:m},{x:f,y:j}]}this.x=this.start.x,this.y=this.start.y,this.strokeStyle=this.color,this.fillStyle=this.color}}(Ycc),function(a){a.UI.BrokenLine=function(b){a.UI.Polygon.call(this,b),this.yccClass=a.UI.BrokenLine,this.pointList=[],this.width=1,this.color="black",this.smooth=!1,this.extend(b)},a.utils.mergeObject(a.UI.BrokenLine.prototype,a.UI.Polygon.prototype),a.UI.BrokenLine.prototype.computeUIProps=function(){if(0===this.pointList.length)return this.rect.x=0,this.rect.y=0,this.rect.width=0,this.rect.height=0,null;for(var a=this.pointList[0].x,b=this.pointList[0].y,c=this.pointList[0].x,d=this.pointList[0].y,e=0;e<this.pointList.length;e++){var f=this.pointList[e];f.x<a?a=f.x:f.x>c&&(c=f.x),f.y<b?b=f.y:f.y>d&&(d=f.y)}this.rect.x=a,this.rect.y=b,this.rect.width=c-a,this.rect.height=d-b,this.coordinates=this.rect.getVertices(),this.x=this.rect.x,this.y=this.rect.y},a.UI.BrokenLine.prototype.render=function(){if(this.pointList.length<2)return null;var a=this.ctxCache;this.getParent();a.save(),a.strokeStyle=this.color,a.strokeWidth=this.width,a.beginPath();var b=this.transformByRotate(this.pointList);this.smooth?this._smoothLineRender(b):this._normalRender(b),a.closePath(),a.restore()},a.UI.BrokenLine.prototype._normalRender=function(a){var b=this.ctxCache;b.moveTo(a[0].x*this.dpi,a[0].y*this.dpi);for(var c=1;c<a.length;c++)b.lineTo(a[c].x*this.dpi,a[c].y*this.dpi);b.stroke()},a.UI.BrokenLine.prototype._smoothLineRender=function(b){function c(b){var c=1/3,d=[];d.push({start:b[0],end:b[1],dot1:b[0],dot2:null});for(var e=1;e<b.length-1;e++){var f=b[e],g=b[e+1],h=b[e-1],i=new a.Math.Dot(f.x-c*Math.abs(f.x-h.x),f.y),j=new a.Math.Dot(f.x+c*Math.abs(f.x-g.x),f.y);d[e-1].dot2=i,d.push({start:f,end:g,dot1:j,dot2:null})}return d[d.length-1].dot2=b[b.length-1],d}var d=this.ctxCache,e=c(b);d.beginPath();for(var f=0;f<e.length;f++)d.moveTo(e[f].start.x*this.dpi,e[f].start.y*this.dpi),d.bezierCurveTo(e[f].dot1.x*this.dpi,e[f].dot1.y*this.dpi,e[f].dot2.x*this.dpi,e[f].dot2.y*this.dpi,e[f].end.x*this.dpi,e[f].end.y*this.dpi);d.stroke()},a.UI.BrokenLine.prototype._smoothLineRender02=function(a){}}(Ycc),function(a){a.UI.MultiLineText=function(b){a.UI.Polygon.call(this,b),this.yccClass=a.UI.MultiLineText,this.displayLines=[],this.content="",this.fontSize="16px",this.lineHeight=24,this.fill=!0,this.color="black",this.wordBreak="break-all",this.overflow="auto",this.extend(b)},a.utils.mergeObject(a.UI.MultiLineText.prototype,a.UI.Polygon.prototype),a.UI.MultiLineText.prototype.constructor=a.UI.MultiLineText,a.UI.MultiLineText.prototype.computeUIProps=function(){function a(){function a(){function a(e){var f=[],g=c.measureText(e).width;if(g<=d.rect.width*b.dpi)return f.push(e),f;for(var h=0;h<e.length;h++){var i=e.slice(0,h+1),j=c.measureText(i).width;if(j>d.rect.width*b.dpi){var k=e.slice(0,h-1);f.push(k);var l=e.slice(h-1);return f=f.concat(a(l))}}}for(var f=[],g=0;g<e.length;g++){var h=e[g],i=a(h);f=f.concat(i)}return f}function f(){function a(e){var f=[],g=c.measureText(e).width;if(g<=d.rect.width*b.dpi)return f.push(e),f;for(var h=0,i=0;i<e.length;i++){var j=e.slice(0,i+1),k=c.measureText(j).width,l=e[i];if(" "===l&&(h=i),k>d.rect.width*b.dpi){var m="",n="";return" "===l||0===h?(m=e.slice(0,i),f.push(m),n=e.slice(i),f=f.concat(a(n))):(m=e.slice(0,h),f.push(m),n=e.slice(h),f=f.concat(a(n)))}}}for(var f=[],g=0;g<e.length;g++){var h=e[g],i=a(h);f=f.concat(i)}return f}switch(d.wordBreak){case"no-break":case"break-all":return a();case"break-word":return f();default:return a()}}var b=this,c=this.ctxCache;b.belongTo._setCtxProps(b,c);var d=this,e=this.content.split(/(?:\\r\\n|\\r|\\n)/);this.displayLines=a(),"auto"===d.overflow&&(d.rect.height=d.lineHeight*this.displayLines.length),this.coordinates=this.rect.getVertices(),this.x=this.rect.x,this.y=this.rect.y},a.UI.MultiLineText.prototype.render=function(a){var b=this;if(a=a||this.ctxCache,!a)return void console.error("[Ycc error]:","ctx is null !");var c=this,d=this.getAbsolutePositionRect(),e=c.lineHeight*b.dpi;a.save(),a.fillStyle=c.color,a.strokeStyle=c.color;var f=this.transformToAbsolute({x:this.anchorX,y:this.anchorY});a.translate(f.x,f.y),a.rotate(this.rotation*Math.PI/180),a.translate(-f.x,-f.y);for(var g=0;g<b.displayLines.length;g++){var h=d.x*b.dpi,i=d.y*b.dpi+g*c.lineHeight*b.dpi;if(i+e>d.y*b.dpi+d.height*b.dpi)break;a.fillText(b.displayLines[g],h,i)}a.restore()}}(Ycc),function(a){a.UI.Rect=function(b){a.UI.Polygon.call(this,b),this.yccClass=a.UI.Rect,this.fill=!0,this.color="black",this.extend(b)},a.utils.mergeObject(a.UI.Rect.prototype,a.UI.Polygon.prototype),a.UI.Rect.prototype.computeUIProps=function(){this.coordinates=this.rect.getVertices(),this.x=this.rect.x,this.y=this.rect.y},a.UI.Rect.prototype.render=function(a){var b=this;return(a=a||b.ctxCache)?(a.save(),a.fillStyle=this.color,a.strokeStyle=this.color,this.renderPath(a),this.fill?a.fill():a.stroke(),void a.restore()):void console.error("[Ycc error]:","ctx is null !")}}(Ycc),function(a){a.UI.CropRect=function(b){a.UI.Polygon.call(this,b),this.yccClass=a.UI.CropRect,this.ctrlSize=6,this.enableDragOut=!1,this.fill=!0,this.ctrlRect1=new a.Math.Rect,this.ctrlRect2=new a.Math.Rect,this.ctrlRect3=new a.Math.Rect,this.ctrlRect4=new a.Math.Rect,this.btns=[],this.btnHeight=38,this.btnVerticalPadding=10,this.showName=!0,this.extend(b),this._initUI()},a.utils.mergeObject(a.UI.CropRect.prototype,a.UI.Polygon.prototype),a.UI.CropRect.prototype.showBtns=function(b){if(this.btns.length>0){for(var c=0;c<this.btns.length;c++)a.utils.isObj(this.btns[c])&&(this.btns[c].show=b);this.belongTo.yccInstance.layerManager.reRenderAllLayerToStage()}},a.UI.CropRect.prototype.setCtrlBtns=function(b){var c=this;0!==b.length&&b.forEach(function(b){b=a.utils.extend({content:"",rectBgColor:"#666",color:"#fff",ontap:function(){}},b);var d=new a.UI.SingleLineText(b);d.addListener("mouseover",function(){this.color="#ccc",this.belongTo.yccInstance.layerManager.reRenderAllLayerToStage()}),d.addListener("mouseout",function(){this.color="#fff",this.belongTo.yccInstance.layerManager.reRenderAllLayerToStage()}),c.btns.push(d),c.belongTo.addUI(d)})},a.UI.CropRect.prototype.computeUIProps=function(){this.belongTo._setCtxProps(this);var b=this.rect,c=0,d=0,e=this.rect.x,f=this.rect.y+this.rect.height,g=this.belongTo.yccInstance.getStageWidth(),h=this.belongTo.yccInstance.getStageHeight();if(this.ctrlRect1=new a.Math.Rect(b.x,b.y,this.ctrlSize,this.ctrlSize),this.ctrlRect2=new a.Math.Rect(b.x+b.width-this.ctrlSize,b.y,this.ctrlSize,this.ctrlSize),this.ctrlRect3=new a.Math.Rect(b.x,b.y+b.height-this.ctrlSize,this.ctrlSize,this.ctrlSize),this.ctrlRect4=new a.Math.Rect(b.x+b.width-this.ctrlSize,b.y+b.height-this.ctrlSize,this.ctrlSize,this.ctrlSize),0!==this.btns.length){for(var i=0;i<this.btns.length;i++){var j=this.btns[i];j.overflow="auto",j.xAlign="center",j.rect.width=parseInt(this.ctx.measureText(j.content).width+2*this.btnVerticalPadding),j.rect.height=this.btnHeight,c+=j.rect.width+1}e+c>g&&(e=g-c),f+this.btnHeight>h&&(f=this.rect.y<this.btnHeight?0:this.rect.y-this.btnHeight-2);for(var k=0;k<this.btns.length;k++){var l=this.btns[k];l.rect.x=e+d,l.rect.y=f+2,d+=l.rect.width+1}this.coordinates=this.rect.getVertices(),this.x=this.rect.x,this.y=this.rect.y}},a.UI.CropRect.prototype._initUI=function(){var b=this,c=null,d=null;this.userData=this.userData?this.userData:{},this.addListener("dragstart",function(e){console.log("dragstart",e),this.userData.ctrlStart=0,this.userData.dragStartPosition=new a.Math.Rect(this.rect),this.userData.dragStartMousePosition=new a.Math.Dot(e);var f=new a.Math.Dot(e);c=f,d=new a.Math.Rect(b.rect);for(var g=1;g<=4;g++)if(f.isInRect(this["ctrlRect"+g]))return this.userData.ctrlStart=g,null}),this.addListener("dragging",function(a){var b,e,f,g,h=this.userData.dragStartPosition,i=this.userData.dragStartMousePosition;if(this.userData.ctrlStart<=4&&this.userData.ctrlStart>=1?(1===this.userData.ctrlStart&&(b=a.x-(i.x-h.x),e=a.y-(i.y-h.y),f=h.width-(a.x-h.x),g=h.height-(a.y-h.y),b<=h.x+h.width-2*this.ctrlSize&&(this.rect.x=b),e<=h.y+h.height-2*this.ctrlSize&&(this.rect.y=e)),2===this.userData.ctrlStart&&(b=h.x,e=a.y-(i.y-h.y),f=a.x-h.x+(h.width+h.x-i.x),g=h.height-(a.y-h.y),this.rect.x=b,e<=h.y+h.height-2*this.ctrlSize&&(this.rect.y=e)),3===this.userData.ctrlStart&&(b=a.x-(i.x-h.x),e=h.y,f=h.width-(a.x-h.x),g=a.y-h.y+(h.height+h.y-i.y),b<=h.x+h.width-2*this.ctrlSize&&(this.rect.x=b),this.rect.y=e),4===this.userData.ctrlStart&&(this.rect.x=h.x,this.rect.y=h.y,this.rect.width=a.x-h.x+(h.x+h.width-i.x),this.rect.height=a.y-h.y+(h.y+h.height-i.y)),f>=2*this.ctrlSize&&(this.rect.width=f),g>=2*this.ctrlSize&&(this.rect.height=g)):(this.rect.x=d.x+a.x-c.x,this.rect.y=d.y+a.y-c.y),this.rect.width<=2*this.ctrlSize&&(this.rect.width=2*this.ctrlSize),this.rect.height<=2*this.ctrlSize&&(this.rect.height=2*this.ctrlSize),!this.enableDragOut){var j=this.belongTo.yccInstance.getStageWidth(),k=this.belongTo.yccInstance.getStageHeight();this.rect.x<=0&&(this.rect.x=0),this.rect.y<=0&&(this.rect.y=0),this.rect.x+this.rect.width>=j&&(this.rect.x=j-this.rect.width),this.rect.y+this.rect.height>=k&&(this.rect.y=k-this.rect.height)}this.belongTo.yccInstance.layerManager.reRenderAllLayerToStage()}),this.addListener("dragend",function(a){b.showBtns(!0)})},a.UI.CropRect.prototype.render=function(){var a=this.rect;this.ctx.save(),this.ctx.fillStyle=this.fillStyle,this.ctx.strokeStyle=this.strokeStyle,this.ctx.beginPath(),this.ctx.rect(a.x,a.y,a.width,a.height),this.ctx.closePath(),this.fill?this.ctx.fill():this.ctx.stroke(),this.ctx.beginPath(),this.ctx.rect(this.ctrlRect1.x,this.ctrlRect1.y,this.ctrlRect1.width,this.ctrlRect1.height),this.ctx.rect(this.ctrlRect2.x,this.ctrlRect2.y,this.ctrlRect2.width,this.ctrlRect2.height),this.ctx.rect(this.ctrlRect3.x,this.ctrlRect3.y,this.ctrlRect3.width,this.ctrlRect3.height),this.ctx.rect(this.ctrlRect4.x,this.ctrlRect4.y,this.ctrlRect4.width,this.ctrlRect4.height),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore(),this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle="blue",this.ctx.font="normal normal bold 14px Arial",this.ctx.fillText(this.name,a.x+10,a.y+10),this.ctx.closePath(),this.ctx.restore()},a.UI.CropRect.prototype.removeSelf=function(){this.belongTo.removeUI(this),this.btns.forEach(function(a){a.removeSelf()})}}(Ycc),function(a){a.UI.SingleLineText=function(b){a.UI.Polygon.call(this,b),this.yccClass=a.UI.SingleLineText,this.displayContent="",this.content="",this.fontSize="16px",this.fill=!0,this.color="black",this.xAlign="left",this.yAlign="center",this.overflow="auto",this.extend(b)},a.utils.mergeObject(a.UI.SingleLineText.prototype,a.UI.Polygon.prototype),a.UI.SingleLineText.prototype.constructor=a.UI.SingleLineText,a.UI.SingleLineText.prototype.computeUIProps=function(){var a=this,b=this.ctxCache,c=this.rect,d=(c.x*this.dpi,c.y*this.dpi,c.width*this.dpi);c.height*this.dpi;this._setCtxProps(a);var e=b.measureText(this.content).width;this.displayContent=this.content,"hidden"===this.overflow?e>d&&(a.displayContent=a.getMaxContentInWidth(this.content,d)):"auto"===this.overflow&&(e>d&&(this.rect.width=e/this.dpi),parseInt(this.fontSize)>this.rect.height&&(this.rect.height=parseInt(this.fontSize))),this.coordinates=this.rect.getVertices(),this.x=this.rect.x,this.y=this.rect.y},a.UI.SingleLineText.prototype.render=function(b){var c=this;if(b=b||c.ctxCache,!b)return void console.error("[Ycc error]:","ctx is null !");c.belongTo._setCtxProps(c,b);var d,e,f=this.belongTo.yccInstance.getSystemInfo().devicePixelRatio,g=parseInt(c.fontSize)*f,h=this,i=this.getAbsolutePositionRect();i=new a.Math.Rect(i.x*f,i.y*f,i.width*f,i.height*f),d=i.x;var j=b.measureText(this.displayContent).width;if("center"===this.xAlign&&(d+=(i.width-j)/2),"right"===this.xAlign&&(d+=i.width-j),e=i.y,g>i.height)return console.warn("[Ycc warning] : ","行高不够，或者文字太大！",h);"center"===h.yAlign&&(e=e+i.height/2-g/2),b.save();var k=this.transformToAbsolute({x:this.anchorX,y:this.anchorY});b.translate(k.x*this.dpi,k.y*this.dpi),b.rotate(this.rotation*Math.PI/180),b.translate(-k.x*this.dpi,-k.y*this.dpi),b.fillStyle=h.color,b.strokeStyle=h.color,b.fillText(c.displayContent,d,e),b.restore()}}(Ycc),function(a){a.UI.ScrollerRect=function(b){a.UI.Polygon.call(this,b),this.yccClass=a.UI.ScrollerRect,this.selfRender=!1,this.contentW=0,this.contentH=0,this.enableSwipe=!1,this.swipeFrameCount=10,this.swipeAcceleration=.5,this.swipeInitSpeed=20,this.extend(b),this.ghost=!0,this._wrapper=null,this._eventWrapper=null,this.stopEventBubbleUp=!1,this._onAdded=function(){this._initWrapperRect(),this._initEvent()},this._onChildrenRendered=function(){this.ctx.restore()}},a.utils.mergeObject(a.UI.ScrollerRect.prototype,a.UI.Polygon.prototype),a.UI.ScrollerRect.prototype.computeUIProps=function(){this.coordinates=this.rect.getVertices(),this.x=this.rect.x,this.y=this.rect.y},a.UI.ScrollerRect.prototype.render=function(a){var b=this;a=a||b.ctxCache,a.save(),this.renderPath(a),a.clip()},a.UI.ScrollerRect.prototype.addChild=function(a){return this.belongTo&&a.init(this.belongTo),a===this._wrapper||a===this._eventWrapper?this.addChildTree(a):this._wrapper.addChildTree(a),a},a.UI.ScrollerRect.prototype._initEvent=function(){function b(){c.selfRender&&c.belongTo&&c.belongTo.yccInstance&&c.belongTo.yccInstance.layerManager.reRenderAllLayerToStage()}var c=this;if(!c.belongTo)return console.log("scroller need add to stage!");var d=c.belongTo.yccInstance.ticker,e={rect:null,startEvent:null,tickerIsRunning:!1},f={rect:null,endEvent:null},g=!1;this._eventWrapper.addListener("tap",function(a){var b=c.belongTo.getUIListFromPointer(a,{uiIsShow:!0,uiIsGhost:!1});b=b.filter(function(a){return a.show&&!a.ghost}),b.length<=1||b[b.length-2].triggerUIEventBubbleUp("tap",a.x,a.y)}),this._eventWrapper.addListener("dragstart",function(f){e.tickerIsRunning=d._isRunning,e.startEvent=f,e.rect=new a.Math.Rect(c._wrapper.rect),g=!0,d.start(),d.addFrameListener(b)}),this._eventWrapper.addListener("dragging",function(a){var b=a.x-e.startEvent.x,d=a.y-e.startEvent.y;g=!0,c._wrapper.rect.x=e.rect.x+b,c._wrapper.rect.y=e.rect.y+d,c._checkRangeLimit()}),this._eventWrapper.addListener("dragend",function(e){f.endEvent=e,f.rect=new a.Math.Rect(c._wrapper.rect),d.removeFrameListener(b)}),this._eventWrapper.addListener("swipe",function(a){function b(){return l++,k=l*(i-c.swipeAcceleration*l),l>=j||k<=0||g?void d.removeFrameListener(b):("left"!==e&&"right"!==e||(c._wrapper.rect.x=f.rect.x+h[e]*k),"up"!==e&&"down"!==e||(c._wrapper.rect.y=f.rect.y+h[e]*k),c._checkRangeLimit(),void(c.selfRender&&c.belongTo&&c.belongTo.yccInstance&&c.belongTo.yccInstance.layerManager.reRenderAllLayerToStage()))}if(!c.enableSwipe){var e=a.originEvent.swipeDirection,h={left:-1,right:1,up:-1,down:1},i=c.swipeInitSpeed,j=c.swipeFrameCount,k=0,l=0;g=!1,d.addFrameListener(b)}})},a.UI.ScrollerRect.prototype._initWrapperRect=function(){this._wrapper=new a.UI.Rect({name:"滚动区UI容器",opacity:0,rect:new a.Math.Rect(0,0,this.rect.width,this.rect.height),ghost:!0}),this._eventWrapper=new a.UI.Rect({name:"滚动区事件容器",opacity:0,rect:new a.Math.Rect(this.rect.x,this.rect.y,this.rect.width,this.rect.height),ghost:!1}),this.addChild(this._wrapper),this.belongTo.addUI(this._eventWrapper)},a.UI.ScrollerRect.prototype._checkRangeLimit=function(){var a=this,b=a.contentW-a.rect.width,c=a.contentH-a.rect.height;a._wrapper.rect.x=a._wrapper.rect.x>=0?0:a._wrapper.rect.x,a._wrapper.rect.y=a._wrapper.rect.y>=0?0:a._wrapper.rect.y,a._wrapper.rect.x=a._wrapper.rect.x<-b?-b:a._wrapper.rect.x,a._wrapper.rect.y=a._wrapper.rect.y<-c?-c:a._wrapper.rect.y,a.contentW<=a.rect.width&&(a._wrapper.rect.x=0),a.contentH<=a.rect.height&&(a._wrapper.rect.y=0)}}(Ycc),function(a){a.UI.ComponentButton=function(b){a.UI.Base.call(this,b),this.yccClass=a.UI.ComponentButton,this.rectBorderWidth=1,this.rectBorderColor="#000",this.backgroundImageRes=null,this.text="",this.textColor="black",this.__bgUI=null,this.__textUI=null,this.extend(b),this.__componentInit()},a.utils.mergeObject(a.UI.ComponentButton.prototype,a.UI.Base.prototype),a.UI.ComponentButton.prototype.constructor=a.UI.ComponentButton,a.UI.ComponentButton.prototype.__componentInit=function(){this.backgroundImageRes&&(this.__bgUI=new a.UI.Image({rect:new a.Math.Rect(0,0,this.rect.width,this.rect.height),fillMode:"scale",res:this.backgroundImageRes,stopEventBubbleUp:!1}),this.addChild(this.__bgUI)),""!==this.text&&(this.__textUI=new a.UI.SingleLineText({rect:new a.Math.Rect(0,0,this.rect.width,this.rect.height),content:this.text,color:this.textColor,xAlign:"center",stopEventBubbleUp:!1}),this.addChild(this.__textUI))},a.UI.Base.prototype.computeUIProps=function(){this.__bgUI&&(this.__bgUI.rect.width=this.rect.width,this.__bgUI.rect.height=this.rect.height,this.__bgUI.res=this.backgroundImageRes),this.__textUI&&(this.__textUI.rect.width=this.rect.width,this.__textUI.rect.height=this.rect.height,this.__textUI.content=this.text,this.__textUI.color=this.textColor)}}(Ycc),"undefined"!=typeof wx&&(Ycc.utils.isMobile=function(){return console.log("wx isMobile"),!0},"undefined"!=typeof performance&&(performance.now=function(){return Date.now()}),Ycc.prototype.getSystemInfo=function(){var a=wx.getSystemInfoSync();return{model:a.model,pixelRatio:a.pixelRatio,windowWidth:a.windowWidth,windowHeight:a.windowHeight,screenWidth:a.screenWidth,screenHeight:a.screenHeight,devicePixelRatio:a.devicePixelRatio||1}}), true&&"undefined"!=typeof module)module.exports=Ycc;else if(true)!(__WEBPACK_AMD_DEFINE_FACTORY__ = (Ycc),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === \'function\' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else{ var g; }\n//# sourceMappingURL=ycc.min.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZGF0YWdldHRlci5jbi95Y2MvYnVpbGQveWNjLm1pbi5qcz83NDFkIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBZY2M9ZnVuY3Rpb24gYShiKXt0aGlzLmN0eD1udWxsLHRoaXMuY2FudmFzRG9tPW51bGwsdGhpcy5sYXllckxpc3Q9W10sdGhpcy5waG90b01hbmFnZXI9bnVsbCx0aGlzLmxheWVyTWFuYWdlcj1udWxsLHRoaXMudGlja2VyPW51bGwsdGhpc1tcImRlYnVnZ2VyXCJdPW51bGwsdGhpcy5sb2FkZXI9bmV3IGEuTG9hZGVyKHRoaXMpLHRoaXMuYWpheD1uZXcgYS5BamF4LHRoaXMuYmFzZVVJPW51bGwsdGhpcy5nZXN0dXJlPW51bGwsdGhpcy5jb25maWc9YS51dGlscy5leHRlbmQoe2RlYnVnRHJhd0NvbnRhaW5lcjohMSxhcHBlbnY6XCJoNVwifSxifHx7fSksdGhpcy5pc01vYmlsZT1hLnV0aWxzLmlzTW9iaWxlKCksdGhpcy5zdGFnZVc9MCx0aGlzLnN0YWdlSD0wLHRoaXMuZHBpPXRoaXMuZ2V0U3lzdGVtSW5mbygpLmRldmljZVBpeGVsUmF0aW99O2lmKFljYy5wcm90b3R5cGUuZ2V0U3RhZ2VXaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbnZhc0RvbS53aWR0aH0sWWNjLnByb3RvdHlwZS5nZXRTdGFnZUhlaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbnZhc0RvbS5oZWlnaHR9LFljYy5wcm90b3R5cGUuYmluZENhbnZhcz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jYW52YXNEb209YSx0aGlzLmN0eD1hLmdldENvbnRleHQoXCIyZFwiKSx0aGlzLmN0eC5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0PXRoaXMuY3R4LmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/dGhpcy5jdHguY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdDpmdW5jdGlvbigpe3JldHVybntsZWZ0OjAsdG9wOjB9fSx0aGlzLmxheWVyTGlzdD1bXSx0aGlzLnBob3RvTWFuYWdlcj1uZXcgWWNjLlBob3RvTWFuYWdlcih0aGlzKSx0aGlzLmxheWVyTWFuYWdlcj1uZXcgWWNjLkxheWVyTWFuYWdlcih0aGlzKSx0aGlzLnRpY2tlcj1uZXcgWWNjLlRpY2tlcih0aGlzKSx0aGlzW1wiZGVidWdnZXJcIl09bmV3IFljYy5EZWJ1Z2dlcih0aGlzKSx0aGlzLmJhc2VVST1uZXcgWWNjLlVJKHRoaXMpLHRoaXMuaW5pdCgpLHRoaXN9LFljYy5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMuX2luaXRTdGFnZUdlc3R1cmVFdmVudCgpLHRoaXMudGlja2VyLnN0YXJ0KDYpfSxZY2MucHJvdG90eXBlLl9pbml0U3RhZ2VHZXN0dXJlRXZlbnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3ZhciBiPXBhcnNlSW50KGEuY2xpZW50WC1mLmN0eC5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCksYz1wYXJzZUludChhLmNsaWVudFktZi5jdHguY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCk7aD1cIlwiO3ZhciBkPWYuZ2V0VUlGcm9tUG9pbnRlcihuZXcgWWNjLk1hdGguRG90KGIsYykpO2QmJihnW2EuaWRlbnRpZmllcl09ZCxkLnRyaWdnZXJVSUV2ZW50QnViYmxlVXAoYS50eXBlLGIsYykpLGUoYS50eXBlLGIsYyl9ZnVuY3Rpb24gYihhKXt2YXIgYj1wYXJzZUludChhLmNsaWVudFgtZi5jdHguY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQpLGM9cGFyc2VJbnQoYS5jbGllbnRZLWYuY3R4LmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApO2lmKGghPT1iK1wiX1wiK2Mpe2g9YitcIl9cIitjO3ZhciBkPWdbYS5pZGVudGlmaWVyXTtkJiYoZ1thLmlkZW50aWZpZXJdPWQsZC50cmlnZ2VyVUlFdmVudEJ1YmJsZVVwKGEudHlwZSxiLGMpKSxlKGEudHlwZSxiLGMpfX1mdW5jdGlvbiBjKGEpe3ZhciBiPXBhcnNlSW50KGEuY2xpZW50WC1mLmN0eC5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCksYz1wYXJzZUludChhLmNsaWVudFktZi5jdHguY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCksZD1nW2EuaWRlbnRpZmllcl07ZCYmKGdbYS5pZGVudGlmaWVyXT1kLGQudHJpZ2dlclVJRXZlbnRCdWJibGVVcChhLnR5cGUsYixjKSxkPW51bGwsZ1thLmlkZW50aWZpZXJdPW51bGwpLGUoYS50eXBlLGIsYyl9ZnVuY3Rpb24gZChhKXt2YXIgYj1wYXJzZUludChhLmNsaWVudFgtZi5jdHguY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQpLGM9cGFyc2VJbnQoYS5jbGllbnRZLWYuY3R4LmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApLGQ9Zi5nZXRVSUZyb21Qb2ludGVyKG5ldyBZY2MuTWF0aC5Eb3QoYixjKSk7ZCYmZC50cmlnZ2VyVUlFdmVudEJ1YmJsZVVwKGEudHlwZSxiLGMsYSksZShhLnR5cGUsYixjKX1mdW5jdGlvbiBlKGEsYixjKXtmb3IodmFyIGQ9Zi5sYXllckxpc3QubGVuZ3RoLTE7ZD49MDtkLS0pe3ZhciBlPWYubGF5ZXJMaXN0W2RdO2UuZW5hYmxlRXZlbnRNYW5hZ2VyJiZlLmVuYWJsZUV2ZW50TWFuYWdlciYmZS50cmlnZ2VyTGlzdGVuZXIoYSxuZXcgWWNjLkV2ZW50KHt0eXBlOmEseDpiLHk6Y30pKX19dmFyIGY9dGhpcyxnPXt9LGg9XCJcIixpPW5ldyBZY2MuR2VzdHVyZSh7dGFyZ2V0OnRoaXMuY3R4LmNhbnZhc30pO3RoaXMuZ2VzdHVyZT1pLGkuYWRkTGlzdGVuZXIoXCJ0YXBcIixkKSxpLmFkZExpc3RlbmVyKFwibG9uZ3RhcFwiLGQpLGkuYWRkTGlzdGVuZXIoXCJkb3VibGV0YXBcIixkKSxpLmFkZExpc3RlbmVyKFwic3dpcGVcIixkKSxpLmFkZExpc3RlbmVyKFwic3dpcGVsZWZ0XCIsZCksaS5hZGRMaXN0ZW5lcihcInN3aXBlcmlnaHRcIixkKSxpLmFkZExpc3RlbmVyKFwic3dpcGV1cFwiLGQpLGkuYWRkTGlzdGVuZXIoXCJzd2lwZWRvd25cIixkKSxpLmFkZExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsYSksaS5hZGRMaXN0ZW5lcihcImRyYWdnaW5nXCIsYiksaS5hZGRMaXN0ZW5lcihcImRyYWdlbmRcIixjKSxpLmFkZExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsZCl9LFljYy5wcm90b3R5cGUuY2xlYXJTdGFnZT1mdW5jdGlvbigpe3RoaXMuY3R4LmNsZWFyUmVjdCgwLDAsdGhpcy5nZXRTdGFnZVdpZHRoKCksdGhpcy5nZXRTdGFnZUhlaWdodCgpKX0sWWNjLnByb3RvdHlwZS5maW5kTGF5ZXJCeUlkPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5sYXllckxpc3QubGVuZ3RoO2IrKyl7dmFyIGM9dGhpcy5sYXllckxpc3RbYl07aWYoYy5pZD09PWEpcmV0dXJuIGN9cmV0dXJuIG51bGx9LFljYy5wcm90b3R5cGUuZmluZFVpQnlJZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMubGF5ZXJMaXN0Lmxlbmd0aDtiKyspZm9yKHZhciBjPXRoaXMubGF5ZXJMaXN0W2JdLGQ9MDtkPGMudWlMaXN0Lmxlbmd0aDtkKyspe3ZhciBlPWMudWlMaXN0W2RdO2lmKGUuaWQ9PT1hKXJldHVybiBlfXJldHVybiBudWxsfSxZY2MucHJvdG90eXBlLmdldFVJRnJvbVBvaW50ZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO2I9IVljYy51dGlscy5pc0Jvb2xlYW4oYil8fGI7Zm9yKHZhciBkPWMubGF5ZXJMaXN0Lmxlbmd0aC0xO2Q+PTA7ZC0tKXt2YXIgZT1jLmxheWVyTGlzdFtkXTtpZighZS5naG9zdCYmKCFifHxlLnNob3cpKXt2YXIgZj1lLmdldFVJRnJvbVBvaW50ZXIoYSxiKTtpZihmKXJldHVybiBmfX1yZXR1cm4gbnVsbH0sWWNjLnByb3RvdHlwZS5nZXRVSUxpc3RGcm9tUG9pbnRlcj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7Yj1ifHx7dWlJc1Nob3c6ITAsdWlJc0dob3N0OiExfTtmb3IodmFyIGQ9W10sZT1jLmxheWVyTGlzdC5sZW5ndGgtMTtlPj0wO2UtLSl7dmFyIGY9Yy5sYXllckxpc3RbZV07aWYoZi5zaG93KXt2YXIgZz1mLmdldFVJTGlzdEZyb21Qb2ludGVyKGEpO2Q9ZC5jb25jYXQoZyl9fXJldHVybiBkPWQuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhLnNob3c9PT1iLnVpSXNTaG93JiZhLmdob3N0PT09Yi51aUlzR2hvc3R9KX0sWWNjLnByb3RvdHlwZS5jcmVhdGVDYW52YXM9ZnVuY3Rpb24oYSl7YT1hfHx7fTt2YXIgYj1ZY2MudXRpbHMubWVyZ2VPYmplY3Qoe3dpZHRoOnRoaXMuZ2V0U3lzdGVtSW5mbygpLndpbmRvd1dpZHRoLGhlaWdodDp0aGlzLmdldFN5c3RlbUluZm8oKS53aW5kb3dIZWlnaHQsZHBpQWRhcHRhdGlvbjohMSxjYW52YXNEb206bnVsbH0sYSksYz1iLmNhbnZhc0RvbXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxkPXRoaXMuZ2V0U3lzdGVtSW5mbygpLmRldmljZVBpeGVsUmF0aW87cmV0dXJuIGIuZHBpQWRhcHRhdGlvbj8oYy53aWR0aD1iLndpZHRoKmQsYy5oZWlnaHQ9Yi5oZWlnaHQqZCxjLnN0eWxlJiYoYy5zdHlsZS53aWR0aD1iLndpZHRoK1wicHhcIikpOihjLndpZHRoPWIud2lkdGgsYy5oZWlnaHQ9Yi5oZWlnaHQpLGMuc3R5bGUmJihjLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiKSxjfSxZY2MucHJvdG90eXBlLmdldFN5c3RlbUluZm89ZnVuY3Rpb24oKXtyZXR1cm57bW9kZWw6XCJpUGhvbmUgNVwiLHBpeGVsUmF0aW86d2luZG93LmRldmljZVBpeGVsUmF0aW98fDEsd2luZG93V2lkdGg6d2luZG93LmlubmVyV2lkdGgsd2luZG93SGVpZ2h0OndpbmRvdy5pbm5lckhlaWdodCxzY3JlZW5XaWR0aDozMjAsc2NyZWVuSGVpZ2h0OjU2OCxkZXZpY2VQaXhlbFJhdGlvOndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxfX0sWWNjLnByb3RvdHlwZS5jcmVhdGVDYWNoZUN0eD1mdW5jdGlvbihhKXthPWF8fHt3aWR0aDp0aGlzLmdldFN0YWdlV2lkdGgoKSxoZWlnaHQ6dGhpcy5nZXRTdGFnZUhlaWdodCgpfTt2YXIgYj10aGlzLmNyZWF0ZUNhbnZhcyh7d2lkdGg6YS53aWR0aCxoZWlnaHQ6YS5oZWlnaHR9KS5nZXRDb250ZXh0KFwiMmRcIik7cmV0dXJuIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYi5jYW52YXMpLGJ9LGZ1bmN0aW9uKGEpe2EudXRpbHM9e30sYS51dGlscy5leHRlbmQ9ZnVuY3Rpb24oYixjLGQpe2QmJihjPWEudXRpbHMuZGVlcENsb25lKGMpKTtmb3IodmFyIGUgaW4gYiliLmhhc093blByb3BlcnR5KGUpJiZjJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgY1tlXSYmKGJbZV09Y1tlXSk7cmV0dXJuIGJ9LGEudXRpbHMubWVyZ2VPYmplY3Q9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O2Zvcih2YXIgYyBpbiBiKWIuaGFzT3duUHJvcGVydHkoYykmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBiW2NdJiYoYVtjXT1iW2NdKTtyZXR1cm4gYX0sYS51dGlscy5pc1N0cmluZz1mdW5jdGlvbihhKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYX0sYS51dGlscy5pc051bT1mdW5jdGlvbihhKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgYX0sYS51dGlscy5pc0Jvb2xlYW49ZnVuY3Rpb24oYSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBhfSxhLnV0aWxzLmlzT2JqPWZ1bmN0aW9uKGEpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBhfSxhLnV0aWxzLmlzRm49ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgYX0sYS51dGlscy5pc0FycmF5PWZ1bmN0aW9uKGEpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKX0sYS51dGlscy5pc01vYmlsZT1mdW5jdGlvbigpe2Zvcih2YXIgYT1uYXZpZ2F0b3IudXNlckFnZW50LGI9W1wiQW5kcm9pZFwiLFwiaVBob25lXCIsXCJTeW1iaWFuT1NcIixcIldpbmRvd3MgUGhvbmVcIixcImlQYWRcIixcImlQb2RcIl0sYz0hMSxkPTA7ZDxiLmxlbmd0aDtkKyspaWYoYS5pbmRleE9mKGJbZF0pPjApe2M9ITA7YnJlYWt9cmV0dXJuIGN9LGEudXRpbHMuZGVlcENsb25lPWZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGMoYil7dmFyIGU9e307Zm9yKHZhciBmIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShmKSYmKGVbZl09YltmXSxhLnV0aWxzLmlzQXJyYXkoYltmXSk/ZVtmXT1kKGJbZl0pOmEudXRpbHMuaXNPYmooYltmXSk/ZVtmXT1jKGJbZl0pOmVbZl09YltmXSk7cmV0dXJuIGV9ZnVuY3Rpb24gZChiKXtmb3IodmFyIGU9W10sZj1udWxsLGc9MDtnPGIubGVuZ3RoO2crKylmPWJbZ10sYS51dGlscy5pc0FycmF5KGYpP2UucHVzaChkKGYpKTphLnV0aWxzLmlzT2JqKGYpP2UucHVzaChjKGYpKTplLnB1c2goZik7cmV0dXJuIGV9cmV0dXJuIGEudXRpbHMuaXNBcnJheShiKT9kKGIpOmMoYil9LGEudXRpbHMucmVuZGVyVHBsPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEucmVwbGFjZSgvX18uKz9fXy9nLGZ1bmN0aW9uKGEpe2NvbnNvbGUubG9nKFwi5Yy56YWN5Yiw55qE5paH5pysLS0+XCIsYSk7dmFyIGM9YS5zbGljZSgyKS5zbGljZSgwLC0yKS50cmltKCk7cmV0dXJuIHZvaWQgMCE9PWJbY10/YltjXTphfSl9LGEudXRpbHMucmVsZWFzZU9iamVjdD1mdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSlhLmhhc093blByb3BlcnR5KGIpJiZkZWxldGUgYVtiXX0sYS51dGlscy5yZWxlYXNlQXJyYXk9ZnVuY3Rpb24oYSl7YS5sZW5ndGg9MH0sYS51dGlscy5pc1d4PWZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHd4fX0oWWNjKSxmdW5jdGlvbihhKXthLnV0aWxzLmV4dGVuZDthLk1hdGg9ZnVuY3Rpb24oKXt9LGEuTWF0aC5Eb3Q9ZnVuY3Rpb24oYSl7dGhpcy54PTAsdGhpcy55PTA7dmFyIGI9YXJndW1lbnRzLmxlbmd0aDsxPT09Yj8odGhpcy54PWEueCx0aGlzLnk9YS55KToyPT09YiYmKHRoaXMueD1hcmd1bWVudHNbMF0sdGhpcy55PWFyZ3VtZW50c1sxXSl9LGEuTWF0aC5Eb3QucHJvdG90eXBlLmlzSW5SZWN0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLng+PWEueCYmdGhpcy54PD1hLngrYS53aWR0aCYmdGhpcy55Pj1hLnkmJnRoaXMueTw9YS55K2EuaGVpZ2h0fSxhLk1hdGguRG90LnByb3RvdHlwZS5pc0VxdWFsPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLng9PT1hLngmJnRoaXMueT09PWEueX0sYS5NYXRoLkRvdC5wcm90b3R5cGUucGx1cz1mdW5jdGlvbihiKXtyZXR1cm4gbmV3IGEuTWF0aC5Eb3QodGhpcy54K2IueCx0aGlzLnkrYi55KX0sYS5NYXRoLkRvdC5wcm90b3R5cGUucm90YXRlPWZ1bmN0aW9uKGIsYyl7Yz1jfHxuZXcgYS5NYXRoLkRvdCgwLDApO3ZhciBkPXRoaXMueCxlPXRoaXMueSxmPWMueCxnPWMueSxoPShkLWYpKk1hdGguY29zKGIvMTgwKk1hdGguUEkpLShlLWcpKk1hdGguc2luKGIvMTgwKk1hdGguUEkpK2YsaT0oZS1nKSpNYXRoLmNvcyhiLzE4MCpNYXRoLlBJKSsoZC1mKSpNYXRoLnNpbihiLzE4MCpNYXRoLlBJKStnO3JldHVybiBuZXcgYS5NYXRoLkRvdChoLGkpfSxhLk1hdGguRG90LnRocmVlRG90SXNPbkxpbmU9ZnVuY3Rpb24oYSxiLGMpe2lmKGEuaXNFcXVhbChiKXx8YS5pc0VxdWFsKGMpfHxiLmlzRXF1YWwoYykpcmV0dXJuITA7aWYoYS54PT09Yi54JiZiLng9PT1jLngpcmV0dXJuITA7dmFyIGQ9TWF0aC5hYnMoYS55LWIueSkvTWF0aC5hYnMoYS54LWIueCksZT1NYXRoLmFicyhhLnktYy55KS9NYXRoLmFicyhhLngtYy54KTtyZXR1cm4gZD09PWV9LGEuTWF0aC5SZWN0PWZ1bmN0aW9uKGIpe3RoaXMueWNjQ2xhc3M9YS5NYXRoLlJlY3QsdGhpcy54PTAsdGhpcy55PTAsdGhpcy53aWR0aD0wLHRoaXMuaGVpZ2h0PTA7dmFyIGM9YXJndW1lbnRzLmxlbmd0aDsxPT09Yz8odGhpcy54PWIueCx0aGlzLnk9Yi55LHRoaXMud2lkdGg9Yi53aWR0aCx0aGlzLmhlaWdodD1iLmhlaWdodCk6Mz09PWM/KHRoaXMueD1hcmd1bWVudHNbMF0ueCx0aGlzLnk9YXJndW1lbnRzWzBdLnksdGhpcy53aWR0aD1hcmd1bWVudHNbMV0sdGhpcy5oZWlnaHQ9YXJndW1lbnRzWzJdKTo0PT09YyYmKHRoaXMueD1hcmd1bWVudHNbMF0sdGhpcy55PWFyZ3VtZW50c1sxXSx0aGlzLndpZHRoPWFyZ3VtZW50c1syXSx0aGlzLmhlaWdodD1hcmd1bWVudHNbM10pLHRoaXMudG9Qb3NpdGl2ZSgpfSxhLk1hdGguUmVjdC5wcm90b3R5cGUudG9Qb3NpdGl2ZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMueCxiPXRoaXMueSxjPXRoaXMueCt0aGlzLndpZHRoLGQ9dGhpcy55K3RoaXMuaGVpZ2h0O3RoaXMueD1hPGM/YTpjLHRoaXMueT1iPGQ/YjpkLHRoaXMud2lkdGg9TWF0aC5hYnModGhpcy53aWR0aCksdGhpcy5oZWlnaHQ9TWF0aC5hYnModGhpcy5oZWlnaHQpfSxhLk1hdGguUmVjdC5wcm90b3R5cGUuZ2V0VmVydGljZXM9ZnVuY3Rpb24oKXtyZXR1cm5bbmV3IGEuTWF0aC5Eb3QodGhpcy54LHRoaXMueSksbmV3IGEuTWF0aC5Eb3QodGhpcy54K3RoaXMud2lkdGgsdGhpcy55KSxuZXcgYS5NYXRoLkRvdCh0aGlzLngrdGhpcy53aWR0aCx0aGlzLnkrdGhpcy5oZWlnaHQpLG5ldyBhLk1hdGguRG90KHRoaXMueCx0aGlzLnkrdGhpcy5oZWlnaHQpLG5ldyBhLk1hdGguRG90KHRoaXMueCx0aGlzLnkpXX0sYS5NYXRoLlJlY3QucHJvdG90eXBlLnVwZGF0ZUJ5VmVydGljZXM9ZnVuY3Rpb24oYil7cmV0dXJuIGEudXRpbHMuaXNBcnJheShiKT8odGhpcy54PWJbMF0ueCx0aGlzLnk9YlswXS55LHRoaXMud2lkdGg9YlsxXS54LXRoaXMueCx2b2lkKHRoaXMuaGVpZ2h0PWJbMl0ueS10aGlzLnkpKTpjb25zb2xlLmVycm9yKFwi5Y+C5pWw5b+F6aG75piv5pWw57uE77yBXCIpfSxhLk1hdGguVmVjdG9yPWZ1bmN0aW9uKCl7dGhpcy54PTAsdGhpcy55PTAsdGhpcy56PTAsMyE9PWFyZ3VtZW50cy5sZW5ndGgmJjIhPT1hcmd1bWVudHMubGVuZ3RofHwodGhpcy54PWFyZ3VtZW50c1swXXx8MCx0aGlzLnk9YXJndW1lbnRzWzFdfHwwLHRoaXMuej1hcmd1bWVudHNbMl18fDApLDE9PT1hcmd1bWVudHMubGVuZ3RoJiYoYS51dGlscy5pc09iaihhcmd1bWVudHNbMF0pfHxjb25zb2xlLmVycm9yKFwiY29uc3RydWN0b3IgbmVlZCBhIG9iamVjIGFzIHBhcmFtIVwiKSx0aGlzLng9YXJndW1lbnRzWzBdLnh8fDAsdGhpcy55PWFyZ3VtZW50c1swXS55fHwwLHRoaXMuej1hcmd1bWVudHNbMF0uenx8MCl9LGEuTWF0aC5WZWN0b3IucHJvdG90eXBlLmRvdD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy54KmEueCt0aGlzLnkqYS55K3RoaXMueiphLnp9LGEuTWF0aC5WZWN0b3IucHJvdG90eXBlLmNyb3NzPWZ1bmN0aW9uKGIpe3ZhciBjPW5ldyBhLk1hdGguVmVjdG9yO3JldHVybiBjLng9dGhpcy55KmIuei1iLnkqdGhpcy56LGMueT1iLngqdGhpcy56LXRoaXMueCpiLnosYy56PXRoaXMueCpiLnktYi54KnRoaXMueSxjfSxhLk1hdGguVmVjdG9yLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCp0aGlzLngrdGhpcy55KnRoaXMueSt0aGlzLnoqdGhpcy56LDIpfSxhLk1hdGguTWF0cml4PWZ1bmN0aW9uKGEsYixjKXt0aGlzLmRhdGE9YSx0aGlzLm09Yix0aGlzLm49Y30sYS5NYXRoLk1hdHJpeC5wcm90b3R5cGUuZG90PWZ1bmN0aW9uKGIpe2lmKGIubSE9PXRoaXMubnx8Yi5uIT09dGhpcy5tKXJldHVybiBjb25zb2xlLmVycm9yKFwi5Lik5Liq55+p6Zi155qE6KGM5pWw5ZKM5YiX5pWw5LiN5a+55bqU77yM5LiN6IO955u45LmY77yBXCIpO2Zvcih2YXIgYz1uZXcgYS5NYXRoLk1hdHJpeChbXSx0aGlzLm0sdGhpcy5tKSxkPTE7ZDw9dGhpcy5tO2QrKylmb3IodmFyIGU9MTtlPD10aGlzLm07ZSsrKXtmb3IodmFyIGY9MCxnPTE7Zzw9dGhpcy5uO2crKylmKz10aGlzLmdldChkLGcpKmIuZ2V0KGcsZSk7Yy5zZXQoZCxlLGYpfXJldHVybiBjfSxhLk1hdGguTWF0cml4LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5kYXRhWyhhLTEpKnRoaXMubitiLTFdfSxhLk1hdGguTWF0cml4LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuZGF0YVsoYS0xKSp0aGlzLm4rYi0xXT1jfX0oWWNjKSxmdW5jdGlvbihhKXt2YXIgYj0xLGM9e307YS5UcmVlPWZ1bmN0aW9uKCl7dGhpcy4kaWQ9YisrLHRoaXMuJHBhcmVudElEPW51bGwsdGhpcy5jaGlsZHJlbj1bXSx0aGlzLmRhdGE9bnVsbCxjW3RoaXMuJGlkXT10aGlzfSxhLlRyZWUucmVsZWFzZT1mdW5jdGlvbihhKXt2YXIgYj1hLmdldFBhcmVudCgpO2lmKGIpe3ZhciBkPWIuY2hpbGRyZW4sZT1kLmluZGV4T2YoYSk7ZSE9PS0xJiYoZFtlXT1udWxsKX1kZWxldGUgY1thLiRpZF0sYS5jaGlsZHJlbi5sZW5ndGg9MCxhLmRhdGE9bnVsbH0sYS5UcmVlLmdldE5vZGVNYXA9ZnVuY3Rpb24oKXtyZXR1cm4gY30sYS5UcmVlLnByb3RvdHlwZS5nZXROb2RlTWFwPWZ1bmN0aW9uKCl7cmV0dXJuIGN9LGEuVHJlZS5wcm90b3R5cGUuZ2V0UGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHBhcmVudElEP2NbdGhpcy4kcGFyZW50SURdOm51bGx9LGEuVHJlZS5wcm90b3R5cGUuYWRkQ2hpbGRUcmVlPWZ1bmN0aW9uKGEpe3JldHVybiBhLiRwYXJlbnRJRD9jb25zb2xlLmVycm9yKFwic3ViIHRyZWUncyBwYXJlbnQgaGFzIGV4aXN0ISBjYW4ndCBhZGQhXCIsYSk6KGEuJHBhcmVudElEPXRoaXMuJGlkLHRoaXMuY2hpbGRyZW4ucHVzaChhKSx0aGlzKX0sYS5UcmVlLnByb3RvdHlwZS5yZW1vdmVDaGlsZFRyZWU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jaGlsZHJlbi5pbmRleE9mKGEpO3JldHVybiBiPT09LTE/dGhpczoodGhpcy5jaGlsZHJlbi5zcGxpY2UoYiwxKSx0aGlzKX0sYS5UcmVlLnByb3RvdHlwZS5nZXREZXB0aD1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj0xO2lmKGEuY2hpbGRyZW4ubGVuZ3RoPjApZm9yKHZhciBjPTA7YzxhLmNoaWxkcmVuLmxlbmd0aDtjKyspe3ZhciBkPWEuY2hpbGRyZW5bY10uZ2V0RGVwdGgoKTtiPWQrMT5iP2QrMTpifXJldHVybiBifSxhLlRyZWUucHJvdG90eXBlLml0b3I9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtpZihhLmNhbGwoaCxoKSlyZXR1cm4hMDtpZihoLmNoaWxkcmVuLmxlbmd0aD4wKWZvcih2YXIgYj0wO2I8aC5jaGlsZHJlbi5sZW5ndGg7YisrKWlmKGguY2hpbGRyZW5bYl0uaXRvcigpLmVhY2goYSkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gYyhhKXtpZihoLmNoaWxkcmVuLmxlbmd0aD4wKWZvcih2YXIgYj0wO2I8aC5jaGlsZHJlbi5sZW5ndGg7YisrKWlmKGguY2hpbGRyZW5bYl0uaXRvcigpLmxlZnRDaGlsZEZpcnN0KGEpKXJldHVybiEwO2lmKGEuY2FsbChoLGgpKXJldHVybiEwfWZ1bmN0aW9uIGQoYSl7aWYoaC5jaGlsZHJlbi5sZW5ndGg+MClmb3IodmFyIGI9aC5jaGlsZHJlbi5sZW5ndGgtMTtiPj0wO2ItLSlpZihoLmNoaWxkcmVuW2JdLml0b3IoKS5yaWdodENoaWxkRmlyc3QoYSkpcmV0dXJuITA7aWYoYS5jYWxsKGgsaCkpcmV0dXJuITB9ZnVuY3Rpb24gZShhKXtmKFtoXSxhKX1mdW5jdGlvbiBmKGIsYyxkKXtpZigwPT09Yi5sZW5ndGgpcmV0dXJuITA7ZD1kfHwwLGQrKztmb3IodmFyIGU9YS5yZXZlcnNlP2coYik6YixpPVtdLGo9ITEsaz0wO2s8ZS5sZW5ndGg7aysrKXt2YXIgbD1jLmNhbGwoaCxlW2tdLGQpO2lmKGw9PT0hMCl7aj0hMDticmVha31sIT09LTEmJihpPWkuY29uY2F0KGEucmV2ZXJzZT9nKGVba10uY2hpbGRyZW4pOmVba10uY2hpbGRyZW4pKX1yZXR1cm4gaiYmKGk9W10pLGEucmV2ZXJzZSYmaS5yZXZlcnNlKCksZihpLGMsZCl9ZnVuY3Rpb24gZyhhKXtmb3IodmFyIGI9W10sYz1hLmxlbmd0aC0xO2M+PTA7Yy0tKWIucHVzaChhW2NdKTtyZXR1cm4gYn12YXIgaD10aGlzO3JldHVybiBhPWF8fHtyZXZlcnNlOiExfSx7ZWFjaDpiLGxlZnRDaGlsZEZpcnN0OmMscmlnaHRDaGlsZEZpcnN0OmQsZGVwdGhEb3duOmV9fSxhLlRyZWUucHJvdG90eXBlLnRvTm9kZUxpc3Q9ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gdGhpcy5pdG9yKCkuZGVwdGhEb3duKGZ1bmN0aW9uKGIpe2EucHVzaChiKX0pLGF9LGEuVHJlZS5wcm90b3R5cGUuZ2V0Tm9kZUxpc3RHcm91cEJ5TGF5ZXI9ZnVuY3Rpb24oKXt2YXIgYT17fTtyZXR1cm4gdGhpcy5pdG9yKCkuZGVwdGhEb3duKGZ1bmN0aW9uKGIsYyl7YVtjXXx8KGFbY109W10pLGFbY10ucHVzaChiKX0pLGF9LGEuVHJlZS5wcm90b3R5cGUuZ2V0UGFyZW50TGlzdD1mdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLGI9W107YS4kcGFyZW50SUQ7KXt2YXIgZD1jW2EuJHBhcmVudElEXTtiLnVuc2hpZnQoZCksYT1kfXJldHVybiBifSxhLlRyZWUucHJvdG90eXBlLmdldEJyb3RoZXJMaXN0PWZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIGE9dGhpcy4kcGFyZW50SUQ/Y1t0aGlzLiRwYXJlbnRJRF0uY2hpbGRyZW46W3RoaXNdfSxhLlRyZWUuY3JlYXRlQnlKU09OPWZ1bmN0aW9uKGIpe3ZhciBjPW5ldyBhLlRyZWU7aWYoYy5kYXRhPWIuZGF0YSxhLnV0aWxzLmlzQXJyYXkoYi5jaGlsZHJlbikmJmIuY2hpbGRyZW4ubGVuZ3RoPjApZm9yKHZhciBkPTA7ZDxiLmNoaWxkcmVuLmxlbmd0aDtkKyspYy5hZGRDaGlsZFRyZWUoYS5UcmVlLmNyZWF0ZUJ5SlNPTihiLmNoaWxkcmVuW2RdKSk7cmV0dXJuIGN9LGEuVHJlZS5jcmVhdGVCeU5vZGVzPWZ1bmN0aW9uKGIpe2lmKCFhLnV0aWxzLmlzQXJyYXkoYil8fDA9PT1iLmxlbmd0aClyZXR1cm4gY29uc29sZS5lcnJvcihcIm5lZWQgYW4gQXJyYXkgYXMgcGFyYW0hXCIpO3ZhciBjPW51bGwsZD1bXTtyZXR1cm4gYi5mb3JFYWNoKGZ1bmN0aW9uKGIpe3ZhciBlPW5ldyBhLlRyZWU7ZS5kYXRhPWIsZC5wdXNoKGUpLGEudXRpbHMuaXNOdW0oYi5wYXJlbnRJRCl8fGIucGFyZW50SUR8fChjPWUpfSksZC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2QuZm9yRWFjaChmdW5jdGlvbihiKXtiLmRhdGEucGFyZW50SUQ9PT1hLmRhdGEuaWQmJmEuYWRkQ2hpbGRUcmVlKGIpfSl9KSxjfX0oWWNjKSxmdW5jdGlvbihhKXt2YXIgYj0xLGM9MSxkPTEsZT17fSxmPXt9O2EuR3JhcGg9ZnVuY3Rpb24oYSl7dGhpcy50eXBlPWF8fDEsdGhpcy4kaWQ9ZCsrLHRoaXMudkxpc3Q9W10sdGhpcy5lTGlzdD1bXX0sYS5HcmFwaC5wcm90b3R5cGUuZ2V0TWFwVj1mdW5jdGlvbigpe3JldHVybiBlfSxhLkdyYXBoLnByb3RvdHlwZS5nZXRNYXBFPWZ1bmN0aW9uKCl7cmV0dXJuIGZ9LGEuR3JhcGgucHJvdG90eXBlLmJmcz1mdW5jdGlvbihhLGIsYyl7aWYoYT1hfHxbXSxjPWN8fFtdLGMubGVuZ3RoPT09dGhpcy52TGlzdC5sZW5ndGgpcmV0dXJuITA7aWYoMD09PWEubGVuZ3RoKXtmb3IodmFyIGQ9bnVsbCxmPTA7Zjx0aGlzLnZMaXN0Lmxlbmd0aDtmKyspaWYoYy5pbmRleE9mKHRoaXMudkxpc3RbZl0uJGlkKT09PS0xKXtkPXRoaXMudkxpc3RbZl0uJGlkO2JyZWFrfXJldHVybiB0aGlzLmJmcyhbZF0sYixjKX1mb3IodmFyIGc9bnVsbCxoPTA7aDxhLmxlbmd0aDtoKyspe2lmKGc9ZVthW2hdXSxiLmNhbGwodGhpcyxnKSlyZXR1cm4hMDtjLnB1c2goZy4kaWQpfWZvcih2YXIgaT1bXSxqPTA7ajxhLmxlbmd0aDtqKyspe2c9ZVthW2pdXTt2YXIgaz1nLmdldEFjY2Vzc2libGVJZHMoKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGMuaW5kZXhPZihhKT09PS0xfSk7aT1pLmNvbmNhdChrKX1yZXR1cm4gdGhpcy5iZnMoaSxiLGMpfSxhLkdyYXBoLnByb3RvdHlwZS5kZnM9ZnVuY3Rpb24oYSxiLGMpe2M9Y3x8W107dmFyIGQ9ZVthXTtpZihjLnB1c2goZC4kaWQpLGIuY2FsbCh0aGlzLGQpKXJldHVybiEwO2Zvcih2YXIgZj1kLmdldEFjY2Vzc2libGVJZHMoKSxnPTA7ZzxmLmxlbmd0aDtnKyspe3ZhciBoPWZbZ107aWYoYy5pbmRleE9mKGgpPT09LTEmJnRoaXMuZGZzKGgsYixjKSlyZXR1cm4hMH1pZihjLmxlbmd0aD09PXRoaXMudkxpc3QubGVuZ3RoKXJldHVybiEwO2Zvcih2YXIgaT1udWxsLGo9MDtqPHRoaXMudkxpc3QubGVuZ3RoO2orKylpZihjLmluZGV4T2YodGhpcy52TGlzdFtqXS4kaWQpPT09LTEpe2k9dGhpcy52TGlzdFtqXS4kaWQ7YnJlYWt9cmV0dXJuIHRoaXMuZGZzKGksYixjKX0sYS5HcmFwaC5jcmVhdGVEaXJlY3RlZEdyYXBoPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9bmV3IGEuR3JhcGgoMSksZT1kLnZMaXN0LGY9ZC5lTGlzdDtyZXR1cm4gYi5mb3JFYWNoKGZ1bmN0aW9uKGIpe2UucHVzaChuZXcgYS5HcmFwaC5EaXJlY3RlZFYoYikpfSksYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz1udWxsLGQ9bnVsbCxnPW5ldyBhLkdyYXBoLkRpcmVjdGVkRSxoPTA7aDxlLmxlbmd0aCYmKCFjfHwhZCk7aCsrKXt2YXIgaT1lW2hdO2kuZGF0YS5pZD09PWIuZnJvbUlkJiYoYz1pLGkub3V0SURzLnB1c2goZy4kaWQpKSxpLmRhdGEuaWQ9PT1iLnRvSWQmJihkPWksaS5pbklEcy5wdXNoKGcuJGlkKSl9Zy5pbml0KGMuJGlkLGQuJGlkLGIpLGYucHVzaChnKX0pLGR9LGEuR3JhcGguRGlyZWN0ZWRWPWZ1bmN0aW9uKGEpe3RoaXMuJGlkPWIrKyx0aGlzLmRhdGE9YSx0aGlzLmluSURzPVtdLHRoaXMub3V0SURzPVtdLGVbdGhpcy4kaWRdPXRoaXN9LGEuR3JhcGguRGlyZWN0ZWRWLnByb3RvdHlwZS5nZXRBY2Nlc3NpYmxlSWRzPWZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIHRoaXMub3V0SURzLmZvckVhY2goZnVuY3Rpb24oYil7YS5wdXNoKGZbYl0udG9JRCl9KSxhfSxhLkdyYXBoLkRpcmVjdGVkRT1mdW5jdGlvbigpe3RoaXMuJGlkPWMrKyx0aGlzLmRhdGE9bnVsbCx0aGlzLmZyb21JRD1udWxsLHRoaXMudG9JRD1udWxsLGZbdGhpcy4kaWRdPXRoaXN9LGEuR3JhcGguRGlyZWN0ZWRFLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGEsYixjKXt0aGlzLmZyb21JRD1hLHRoaXMudG9JRD1iLHRoaXMuZGF0YT1jfSxhLkdyYXBoLmNyZWF0ZVVuRGlyZWN0ZWRHcmFwaD1mdW5jdGlvbihiLGMpe3ZhciBkPW5ldyBhLkdyYXBoKDIpLGU9ZC52TGlzdCxmPWQuZUxpc3Q7cmV0dXJuIGIuZm9yRWFjaChmdW5jdGlvbihiKXtlLnB1c2gobmV3IGEuR3JhcGguVW5EaXJlY3RlZFYoYikpfSksYy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz1bXSxkPW5ldyBhLkdyYXBoLlVuRGlyZWN0ZWRFLGc9MDtnPGUubGVuZ3RoO2crKyl7dmFyIGg9ZVtnXTtpZigyPT09Yy5sZW5ndGgpYnJlYWs7aC5kYXRhLmlkIT09Yi5pZHNbMF0mJmguZGF0YS5pZCE9PWIuaWRzWzFdfHwoYy5wdXNoKGguJGlkKSxoLmVJRHMucHVzaChkLiRpZCkpfWQuaW5pdChjLGIpLGYucHVzaChkKX0pLGR9LGEuR3JhcGguVW5EaXJlY3RlZFY9ZnVuY3Rpb24oYSl7dGhpcy4kaWQ9YisrLHRoaXMuZGF0YT1hLHRoaXMuZUlEcz1bXSxlW3RoaXMuJGlkXT10aGlzfSxhLkdyYXBoLlVuRGlyZWN0ZWRWLnByb3RvdHlwZS5nZXRBY2Nlc3NpYmxlSWRzPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MDtiPHRoaXMuZUlEcy5sZW5ndGg7YisrKXt2YXIgYz1mW3RoaXMuZUlEc1tiXV07Yy52SURzWzBdPT09dGhpcy4kaWQmJmEucHVzaChjLnZJRHNbMV0pLGMudklEc1sxXT09PXRoaXMuJGlkJiZhLnB1c2goYy52SURzWzBdKX1yZXR1cm4gYX0sYS5HcmFwaC5VbkRpcmVjdGVkRT1mdW5jdGlvbigpe3RoaXMuJGlkPWMrKyx0aGlzLmRhdGE9bnVsbCx0aGlzLnZJRHM9W10sZlt0aGlzLiRpZF09dGhpc30sYS5HcmFwaC5VbkRpcmVjdGVkRS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihhLGIpe3RoaXMudklEcz1hLHRoaXMuZGF0YT1ifX0oWWNjKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3RoaXMuY3JlYXRlVGltZT1EYXRlLm5vdygpLHRoaXMuZGVsdGFUaW1lPWEuZGVsdGFUaW1lLHRoaXMuZnBzPXBhcnNlSW50KDFlMy90aGlzLmRlbHRhVGltZSksdGhpcy5mcmFtZUNvdW50PWEuZnJhbWVBbGxDb3VudCx0aGlzLmlzUmVuZGVyZWQ9ITF9YS5UaWNrZXI9ZnVuY3Rpb24oYil7dGhpcy55Y2NDbGFzcz1hLlRpY2tlcix0aGlzLnljY0luc3RhbmNlPWIsdGhpcy5jdXJyZW50RnJhbWU9bnVsbCx0aGlzLnN0YXJ0VGltZT1EYXRlLm5vdygpLHRoaXMubGFzdEZyYW1lVGltZT10aGlzLnN0YXJ0VGltZSx0aGlzLmxhc3RGcmFtZVRpY2tlckNvdW50PTAsdGhpcy5kZWx0YVRpbWU9MCx0aGlzLmRlbHRhVGltZUV4cGVjdD0wLHRoaXMuZGVsdGFUaW1lUmF0aW89MSx0aGlzLmZyYW1lTGlzdGVuZXJMaXN0PVtdLHRoaXMuZGVmYXVsdEZyYW1lUmF0ZT02MCx0aGlzLmRlZmF1bHREZWx0YVRpbWU9MWUzL3RoaXMuZGVmYXVsdEZyYW1lUmF0ZSx0aGlzLnRpY2tlclNwYWNlPTEsdGhpcy5mcmFtZUFsbENvdW50PTAsdGhpcy50aW1lclRpY2tDb3VudD0wLHRoaXMuX3RpbWVySWQ9MCx0aGlzLl9pc1J1bm5pbmc9ITF9LGEuVGlja2VyLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihhKXtmdW5jdGlvbiBjKGEpe2UudGltZXJUaWNrQ291bnQrKyxlLnRpbWVyVGlja0NvdW50LWUubGFzdEZyYW1lVGlja2VyQ291bnQ9PT1lLnRpY2tlclNwYWNlJiYoZS5mcmFtZUFsbENvdW50KyssZS5kZWx0YVRpbWU9YS1lLmxhc3RGcmFtZVRpbWUsZS5kZWx0YVRpbWVSYXRpbz1lLmRlbHRhVGltZS9lLmRlbHRhVGltZUV4cGVjdCxlLmxhc3RGcmFtZVRpbWUrPWUuZGVsdGFUaW1lLGUubGFzdEZyYW1lVGlja2VyQ291bnQ9ZS50aW1lclRpY2tDb3VudCxlLmN1cnJlbnRGcmFtZT1uZXcgYihlKSxlLmJyb2FkY2FzdEZyYW1lRXZlbnQoZS5jdXJyZW50RnJhbWUpLGUuYnJvYWRjYXN0VG9MYXllcihlLmN1cnJlbnRGcmFtZSkpLGUuX3RpbWVySWQ9ZChjKX12YXIgZD10aGlzLnljY0luc3RhbmNlLmNhbnZhc0RvbS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/dGhpcy55Y2NJbnN0YW5jZS5jYW52YXNEb20ucmVxdWVzdEFuaW1hdGlvbkZyYW1lOnJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fG9SZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fG1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lLGU9dGhpcztlLmN1cnJlbnRGcmFtZT1udWxsLGUudGltZXJUaWNrQ291bnQ9MCxlLmxhc3RGcmFtZVRpY2tlckNvdW50PTAsYT1hP2E6ZS5kZWZhdWx0RnJhbWVSYXRlLGUudGlja2VyU3BhY2U9cGFyc2VJbnQoNjAvYSl8fDEsZS5kZWx0YVRpbWVFeHBlY3Q9MWUzL2EsZS5mcmFtZUFsbENvdW50PTAsZS5zdGFydFRpbWU9RGF0ZS5ub3coKSxlLl9pc1J1bm5pbmd8fChkfHwoZD1mdW5jdGlvbihhKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe2EoRGF0ZS5ub3coKSl9LDFlMy82MCl9KSxlLl90aW1lcklkPWQoYyksZS5faXNSdW5uaW5nPSEwKX0sYS5UaWNrZXIucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnljY0luc3RhbmNlLmNhbnZhc0RvbS5jYW5jZWxBbmltYXRpb25GcmFtZT90aGlzLnljY0luc3RhbmNlLmNhbnZhc0RvbS5jYW5jZWxBbmltYXRpb25GcmFtZTpjYW5jZWxBbmltYXRpb25GcmFtZXx8d2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fG1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHxvQ2FuY2VsQW5pbWF0aW9uRnJhbWU7YXx8KGE9ZnVuY3Rpb24oYSl7cmV0dXJuIGNsZWFyVGltZW91dChhKX0pLGEodGhpcy5fdGltZXJJZCksdGhpcy5faXNSdW5uaW5nPSExLHRoaXMuY3VycmVudEZyYW1lPW51bGx9LGEuVGlja2VyLnByb3RvdHlwZS5hZGRGcmFtZUxpc3RlbmVyPWZ1bmN0aW9uKGEpe3RoaXMuZnJhbWVMaXN0ZW5lckxpc3QucHVzaChhKX0sYS5UaWNrZXIucHJvdG90eXBlLnJlbW92ZUZyYW1lTGlzdGVuZXI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5mcmFtZUxpc3RlbmVyTGlzdC5pbmRleE9mKGEpO2IhPT0tMSYmdGhpcy5mcmFtZUxpc3RlbmVyTGlzdC5zcGxpY2UoYiwxKX0sYS5UaWNrZXIucHJvdG90eXBlLmJyb2FkY2FzdEZyYW1lRXZlbnQ9ZnVuY3Rpb24oYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmZyYW1lTGlzdGVuZXJMaXN0Lmxlbmd0aDtjKyspe3ZhciBkPXRoaXMuZnJhbWVMaXN0ZW5lckxpc3RbY107YS51dGlscy5pc0ZuKGQpJiZkKGIpfX0sYS5UaWNrZXIucHJvdG90eXBlLmJyb2FkY2FzdFRvTGF5ZXI9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7Yjx0aGlzLnljY0luc3RhbmNlLmxheWVyTGlzdC5sZW5ndGg7YisrKXt2YXIgYz10aGlzLnljY0luc3RhbmNlLmxheWVyTGlzdFtiXTtjLnNob3cmJmMuZW5hYmxlRnJhbWVFdmVudCYmYy5vbkZyYW1lQ29taW5nKGEpfX19KFljYyksZnVuY3Rpb24oYSl7YS5EZWJ1Z2dlcj1mdW5jdGlvbihiKXt0aGlzLnljY0NsYXNzPWEuRGVidWdnZXIsdGhpcy55Y2NJbnN0YW5jZT1iLHRoaXMuZGVsdGFUaW1lPW51bGwsdGhpcy5kZWx0YVRpbWVFeHBlY3Q9bnVsbCx0aGlzLmZyYW1lQWxsQ291bnQ9bnVsbCx0aGlzLmRlbHRhVGltZUF2ZXJhZ2U9bnVsbCx0aGlzLnJlbmRlclRpbWU9bnVsbCx0aGlzLnJlbmRlclVpQ291bnQ9bnVsbCx0aGlzLnRvdGFsSlNIZWFwU2l6ZT1udWxsLHRoaXMudXNlZEpTSGVhcFNpemU9bnVsbCx0aGlzLmpzSGVhcFNpemVMaW1pdD1udWxsLHRoaXMuZmllbGRzPVtdLHRoaXMucmVjdD1udWxsLHRoaXMubGF5ZXI9bnVsbH0sYS5EZWJ1Z2dlci5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3RoaXMucmVjdD1uZXcgYS5VSS5SZWN0KHtuYW1lOlwiZGVidWdnZXJSZWN0XCIscmVjdDpuZXcgYS5NYXRoLlJlY3QoMTAsMTAsMjAwLDE0MCksY29sb3I6XCJyZ2JhKDI1NSwyNTUsMCwwLjUpXCJ9KSx0aGlzLmxheWVyPXljY0luc3RhbmNlLmxheWVyTWFuYWdlci5uZXdMYXllcih7bmFtZTpcImRlYnVn5Zu+5bGCXCJ9KTt2YXIgYj10aGlzO3RoaXMueWNjSW5zdGFuY2UudGlja2VyLmFkZEZyYW1lTGlzdGVuZXIoZnVuY3Rpb24oKXtiLnVwZGF0ZUluZm8oKX0pfSxhLkRlYnVnZ2VyLnByb3RvdHlwZS5zaG93RGVidWdQYW5lbD1mdW5jdGlvbigpe3RoaXMuaW5pdCgpO3ZhciBhPXRoaXMubGF5ZXI7YS51aUxpc3QuaW5kZXhPZih0aGlzLnJlY3QpPT09LTEmJmEuYWRkVUkodGhpcy5yZWN0KX0sYS5EZWJ1Z2dlci5wcm90b3R5cGUudXBkYXRlSW5mbz1mdW5jdGlvbigpe3ZhciBhPXRoaXMueWNjSW5zdGFuY2UubGF5ZXJMaXN0LGI9YS5pbmRleE9mKHRoaXMubGF5ZXIpO2IhPT0tMSYmKGIrMSE9PWEubGVuZ3RoJiYoYS5zcGxpY2UoYiwxKSxhLnB1c2godGhpcy5sYXllcikpLHRoaXMucmVjdC5yZWN0LmhlaWdodD0yMCp0aGlzLmZpZWxkcy5sZW5ndGgsdGhpcy5maWVsZHMuZm9yRWFjaChmdW5jdGlvbihhKXthLnVpLmNvbnRlbnQ9YS5uYW1lK1wiIFwiK2EuY2IoKX0pKX0sYS5EZWJ1Z2dlci5wcm90b3R5cGUuYWRkRmllbGQ9ZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLmZpZWxkcy5sZW5ndGgsZT1uZXcgYS5VSS5TaW5nbGVMaW5lVGV4dCh7Y29udGVudDpcInVzZWRKU0hlYXBTaXplIFwiK2MoKSxmb250U2l6ZTpcIjEycHhcIixyZWN0Om5ldyBhLk1hdGguUmVjdCgwLDIwKmQsMTAwLDIwKSxjb2xvcjpcImdyZWVuXCJ9KTt0aGlzLmZpZWxkcy5wdXNoKHtuYW1lOmIsY2I6Yyx1aTplfSksdGhpcy5yZWN0LmFkZENoaWxkKGUpfSxhLkRlYnVnZ2VyLnByb3RvdHlwZS5hZGRUb0xheWVyPWZ1bmN0aW9uKGEpe2EudWlMaXN0LmluZGV4T2YodGhpcy5yZWN0KT09PS0xJiZhLmFkZFVJKHRoaXMucmVjdCl9LGEuRGVidWdnZXIucHJvdG90eXBlLnVwZGF0ZUZpZWxkPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yzx0aGlzLmZpZWxkcy5sZW5ndGg7YysrKWlmKHRoaXMuZmllbGRzW2NdLm5hbWU9PT1hKXJldHVybiB0aGlzLmZpZWxkc1tjXS5jYj1udWxsLHZvaWQodGhpcy5maWVsZHNbY10uY2I9Yil9LGEuRGVidWdnZXIuTG9nPWZ1bmN0aW9uKGEpe3RoaXMubWVzc2FnZT1cIltZY2MgbG9nZ2VyXT0+IFwiK2F9LGEuRGVidWdnZXIuRXJyb3I9ZnVuY3Rpb24oYSl7dGhpcy5tZXNzYWdlPVwiW1ljYyAgZXJyb3JdPT4gXCIrYX19KFljYyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihiLGMpe2EudXRpbHMuaXNXeCgpJiZiLmluZGV4T2YoXCJjbG91ZDovL1wiKSE9PS0xP3d4LmNsb3VkLmRvd25sb2FkRmlsZSh7ZmlsZUlEOmIsc3VjY2VzczpmdW5jdGlvbihhKXtjLmNhbGwodGhpcyxhLnRlbXBGaWxlUGF0aCl9LGZhaWw6ZnVuY3Rpb24oKXtjLmNhbGwodGhpcyxiKX19KTpjLmNhbGwodGhpcyxiKX1mdW5jdGlvbiBjKCl7dGhpcy5jdXJyZW50VGltZT0wLHRoaXMuc291cmNlPW51bGwsdGhpcy5ydW5uaW5nPSExfWEuTG9hZGVyPWZ1bmN0aW9uKGIpe3RoaXMueWNjQ2xhc3M9YS5Mb2FkZXIsdGhpcy55Y2NJbnN0YW5jZT1iLHRoaXMuYWpheD1uZXcgYS5BamF4LHRoaXMuYmFzZVBhdGg9XCJcIn0sYS5Mb2FkZXIucHJvdG90eXBlLmxvYWRSZXNQYXJhbGxlbD1mdW5jdGlvbihiLGMsZCxlLGYpe2Z1bmN0aW9uIGcoZyxoLGkpe3JldHVybiBmdW5jdGlvbigpe2UucHVzaChnKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgZy5uYW1lJiYoZltnLm5hbWVdPWcucmVzKSxhLnV0aWxzLmlzRm4oZCkmJmQoZyxpLGgpLGIubGVuZ3RoPT09ZS5sZW5ndGgmJmMoZSxmKX19ZT1lfHxbXSxmPWZ8fHt9O2Zvcih2YXIgaD10aGlzLGk9MDtpPGIubGVuZ3RoO2krKyl7dmFyIGo9YltpXSxrPVwibG9hZFwiLGw9XCJlcnJvclwiO2oudHlwZT1qLnR5cGV8fFwiaW1hZ2VcIixcImltYWdlXCI9PT1qLnR5cGUmJihqLnJlcz1oLl9jcmVhdGVJbWFnZSgpLGoucmVzLnNldEF0dHJpYnV0ZSYmai5yZXMuc2V0QXR0cmlidXRlKFwiY3Jvc3NPcmlnaW5cIixqLmNyb3NzT3JpZ2lufHxcIlwiKSxqLnJlcy5zcmM9ai51cmwpLFwiYXVkaW9cIj09PWoudHlwZSYmKGs9XCJsb2FkZWRtZXRhZGF0YVwiLGoucmVzPW5ldyBBdWRpbyxqLnJlcy5zcmM9ai51cmwsai5yZXMucHJlbG9hZD1cImxvYWRcIixqLnJlcy5jcm9zc09yaWdpbj1qLmNyb3NzT3JpZ2lufHxcIlwiKSxqLnJlc1tcIm9uXCIra109ZyhqLGksITApLGoucmVzW1wib25cIitsXT1nKGosaSwhMSl9fSxhLkxvYWRlci5wcm90b3R5cGUubG9hZFJlc09uZUJ5T25lPWZ1bmN0aW9uKGQsZSxmLGcsaCl7ZnVuY3Rpb24gaSgpe2NsZWFyVGltZW91dChwKSxcImltYWdlXCI9PT1tLnR5cGV8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3eCYmXCJhdWRpb1wiPT09bS50eXBlLGcucHVzaChtKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgbS5uYW1lJiYoaFttLm5hbWVdPW0ucmVzKSxhLnV0aWxzLmlzRm4oZikmJmYobSxudWxsLGwpLGsubG9hZFJlc09uZUJ5T25lKGQsZSxmLGcsaCl9ZnVuY3Rpb24gaihiKXtjb25zb2xlLmxvZyhcImxvYWRlcjpcIixtLm5hbWUsXCJlcnJvclwiKSxjbGVhclRpbWVvdXQocCksKFwiaW1hZ2VcIj09PW0udHlwZXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHd4JiZcImF1ZGlvXCI9PT1tLnR5cGUpJiYobS5yZXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihuLGkpLG0ucmVzLnJlbW92ZUV2ZW50TGlzdGVuZXIobyxqKSksZy5wdXNoKG0pLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBtLm5hbWUmJihoW20ubmFtZV09bS5yZXMpLGEudXRpbHMuaXNGbihmKSYmZihtLGIsbCksay5sb2FkUmVzT25lQnlPbmUoZCxlLGYsZyxoKX1pZihnPWd8fFtdLGg9aHx8e30sZC5sZW5ndGg9PT1nLmxlbmd0aClyZXR1cm4gdm9pZCBlKGcsaCk7dmFyIGs9dGhpcyxsPWcubGVuZ3RoLG09ZFtsXSxuPVwibG9hZFwiLG89XCJlcnJvclwiO20udHlwZT1tLnR5cGV8fFwiaW1hZ2VcIjt2YXIgcD0wO2Ioay5iYXNlUGF0aCttLnVybCxmdW5jdGlvbihhKXtpZihcImltYWdlXCI9PT1tLnR5cGUpbS5yZXM9ay5fY3JlYXRlSW1hZ2UoKSxtLnJlcy5zZXRBdHRyaWJ1dGUmJm0ucmVzLnNldEF0dHJpYnV0ZShcImNyb3NzT3JpZ2luXCIsbS5jcm9zc09yaWdpbnx8XCJcIiksbS5yZXMuc3JjPWEsbS5yZXNbXCJvblwiK25dPWksbS5yZXNbXCJvblwiK29dPWoscD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bS5yZXNbXCJvblwiK25dPW51bGwsbS5yZXNbXCJvblwiK29dPW51bGwsaih7bWVzc2FnZTpcIuiOt+WPlui1hOa6kOi2heaXtu+8gVwifSl9LG0udGltZW91dHx8MWU0KTtlbHNlIGlmKFwiYXVkaW9cIj09PW0udHlwZSl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHd4KXJldHVybiBtLnJlcz1uZXcgQXVkaW8sbS5yZXMuc3JjPWEsbj1cImxvYWRlZG1ldGFkYXRhXCIsbz1cImVycm9yXCIsbS5yZXMuYWRkRXZlbnRMaXN0ZW5lcihuLGkpLHZvaWQgbS5yZXMuYWRkRXZlbnRMaXN0ZW5lcihvLGopO2lmKG0ucmVzPW5ldyBjLCFtLnJlcy5jb250ZXh0KXJldHVybiB2b2lkIGooe21lc3NhZ2U6XCLmtY/op4jlmajkuI3mlK/mjIFBdWRpb0NvbnRleHTvvIFcIn0pO2NvbnNvbGUubG9nKGEpLGsuYWpheC5nZXQoYSxmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7YS5yZXMuY29udGV4dC5kZWNvZGVBdWRpb0RhdGEoYixmdW5jdGlvbihiKXthLnJlcy5idWY9YixpKCl9LGopfX0obSksaixcImFycmF5YnVmZmVyXCIpfX0pfSxhLkxvYWRlci5wcm90b3R5cGUuZ2V0UmVzQnlOYW1lPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXS5uYW1lPT09YSlyZXR1cm4gYltjXTtyZXR1cm4gbnVsbH0sYS5Mb2FkZXIucHJvdG90eXBlLl9jcmVhdGVJbWFnZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnljY0luc3RhbmNlJiZcInd4YXBwXCI9PT10aGlzLnljY0luc3RhbmNlLmNvbmZpZy5hcHBlbnY/dGhpcy55Y2NJbnN0YW5jZS5jYW52YXNEb20uY3JlYXRlSW1hZ2UoKTpuZXcgSW1hZ2V9LGMucHJvdG90eXBlLmNvbnRleHQ9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEF1ZGlvQ29udGV4dCYmbmV3IEF1ZGlvQ29udGV4dHx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdlYmtpdEF1ZGlvQ29udGV4dCYmbmV3IHdlYmtpdEF1ZGlvQ29udGV4dCxjLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb250ZXh0O2lmKGEpe3RoaXMucnVubmluZz0hMCx0aGlzLnNvdXJjZSYmdGhpcy5zb3VyY2Uuc3RvcCgpO3ZhciBiPWEuY3JlYXRlQnVmZmVyU291cmNlKCk7Yi5idWZmZXI9dGhpcy5idWYsYi5jb25uZWN0KGEuZGVzdGluYXRpb24pLGIuc3RhcnQodGhpcy5jdXJyZW50VGltZSksdGhpcy5zb3VyY2U9Yn19LGMucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb250ZXh0O2EmJih0aGlzLnJ1bm5pbmc9ITEsdGhpcy5zb3VyY2Uuc3RvcCgpLHRoaXMuc291cmNlPW51bGwpfX0oWWNjKSxmdW5jdGlvbihhKXthLkFqYXg9ZnVuY3Rpb24oKXt0aGlzLnljY0NsYXNzPWEuQWpheH0sYS5BamF4LnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMsZT1cIlwiLGY9XCJqc29uXCI7MT09PWFyZ3VtZW50cy5sZW5ndGg/KGU9XCJcIixiPWEuc3VjY2Vzc0NiLGM9YS5lcnJvckNiLGY9XCJqc29uXCIpOihlPWFyZ3VtZW50c1swXSxiPWFyZ3VtZW50c1sxXSxjPWFyZ3VtZW50c1syXSxmPWFyZ3VtZW50c1szXSk7dmFyIGc9bmV3IFhNTEh0dHBSZXF1ZXN0O2cub3BlbihcIkdFVFwiLGUsITApLGcucmVzcG9uc2VUeXBlPWYsZy5vbmxvYWQ9ZnVuY3Rpb24oKXtiLmNhbGwoZCxnLnJlc3BvbnNlKX0sZy5vbmVycm9yPWZ1bmN0aW9uKGEpe2MuY2FsbChkLGEpfSxnLnNlbmQoKX19KFljYyksZnVuY3Rpb24oYSl7YS5FdmVudD1mdW5jdGlvbihiKXt0aGlzLnljY0NsYXNzPWEuRXZlbnQsdGhpcy50eXBlPWI/YjpcIlwiLHRoaXMueD0wLHRoaXMueT0wLHRoaXMub3JpZ2luRXZlbnQ9bnVsbCx0aGlzLnN0b3A9ITEsdGhpcy50YXJnZXQ9bnVsbCxhLnV0aWxzLmlzT2JqKGIpJiZhLnV0aWxzLmV4dGVuZCh0aGlzLGIpfX0oWWNjKSxmdW5jdGlvbihhKXthLkxpc3RlbmVyPWZ1bmN0aW9uKCl7dGhpcy55Y2NDbGFzcz1hLkxpc3RlbmVyLHRoaXMubGlzdGVuZXJzPXt9LHRoaXMuc3RvcFR5cGU9e30sdGhpcy5kaXNhYmxlVHlwZT17fSx0aGlzLnN0b3BBbGxFdmVudD0hMSx0aGlzLm9uY2xpY2s9bnVsbCx0aGlzLm9ubW91c2Vkb3duPW51bGwsdGhpcy5vbm1vdXNldXA9bnVsbCx0aGlzLm9ubW91c2Vtb3ZlPW51bGwsdGhpcy5vbmRyYWdzdGFydD1udWxsLHRoaXMub25kcmFnZ2luZz1udWxsLHRoaXMub25kcmFnZW5kPW51bGwsdGhpcy5vbm1vdXNlb3Zlcj1udWxsLHRoaXMub25tb3VzZW91dD1udWxsLHRoaXMub250b3VjaHN0YXJ0PW51bGwsdGhpcy5vbnRvdWNobW92ZT1udWxsLHRoaXMub250b3VjaGVuZD1udWxsLHRoaXMub250YXA9bnVsbCx0aGlzLm9uem9vbT1udWxsLHRoaXMub25yb3RhdGU9bnVsbCx0aGlzLm9ubXVsdGlzdGFydD1udWxsLHRoaXMub25tdWx0aWNoYW5nZT1udWxsLHRoaXMub25tdWx0aWVuZD1udWxsfSxhLkxpc3RlbmVyLnJlbGVhc2U9ZnVuY3Rpb24oYil7dmFyIGM9bnVsbDtiLnljY0NsYXNzPW51bGw7Zm9yKGMgaW4gYi5saXN0ZW5lcnMpYi5saXN0ZW5lcnMuaGFzT3duUHJvcGVydHkoYykmJihiLmxpc3RlbmVyc1tjXS5sZW5ndGg9MCxkZWxldGUgYi5saXN0ZW5lcnNbY10pO2EudXRpbHMucmVsZWFzZU9iamVjdChiLnN0b3BUeXBlKSxhLnV0aWxzLnJlbGVhc2VPYmplY3QoYi5kaXNhYmxlVHlwZSksYi5zdG9wQWxsRXZlbnQ9ITAsYi5vbmNsaWNrPW51bGwsYi5vbm1vdXNlZG93bj1udWxsLGIub25tb3VzZXVwPW51bGwsYi5vbm1vdXNlbW92ZT1udWxsLGIub25kcmFnc3RhcnQ9bnVsbCxiLm9uZHJhZ2dpbmc9bnVsbCxiLm9uZHJhZ2VuZD1udWxsLGIub25tb3VzZW92ZXI9bnVsbCxiLm9ubW91c2VvdXQ9bnVsbCxiLm9udG91Y2hzdGFydD1udWxsLGIub250b3VjaG1vdmU9bnVsbCxiLm9udG91Y2hlbmQ9bnVsbCxiLm9udGFwPW51bGx9LGEuTGlzdGVuZXIucHJvdG90eXBlLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5saXN0ZW5lcnNbYV07Y3x8KHRoaXMubGlzdGVuZXJzW2FdPVtdKSx0aGlzLmxpc3RlbmVyc1thXS5pbmRleE9mKGIpPT09LTEmJnRoaXMubGlzdGVuZXJzW2FdLnB1c2goYil9LGEuTGlzdGVuZXIucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oYSl7dGhpcy5zdG9wVHlwZVthXT0hMH0sYS5MaXN0ZW5lci5wcm90b3R5cGUudHJpZ2dlckxpc3RlbmVyPWZ1bmN0aW9uKGIsYyl7aWYoIXRoaXMuc3RvcEFsbEV2ZW50JiYhdGhpcy5kaXNhYmxlVHlwZVtiXSl7dGhpcy5zdG9wVHlwZVtiXXx8YS51dGlscy5pc0ZuKHRoaXNbXCJvblwiK2JdKSYmdGhpc1tcIm9uXCIrYl0uYXBwbHkodGhpcyxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpO3ZhciBkPXRoaXMubGlzdGVuZXJzJiZ0aGlzLmxpc3RlbmVyc1tiXTtpZihkJiZhLnV0aWxzLmlzQXJyYXkoZCkpZm9yKHZhciBlPTA7ZTxkLmxlbmd0aDtlKyspdGhpcy5zdG9wVHlwZVtiXXx8ZFtlXS5hcHBseSh0aGlzLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSl9fSxhLkxpc3RlbmVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMubGlzdGVuZXJzW2JdO2lmKGQmJmEudXRpbHMuaXNBcnJheShkKSlmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKylpZihkW2VdPT09YylyZXR1cm4gdm9pZCBkLnNwbGljZShlLDEpfSxhLkxpc3RlbmVyLnByb3RvdHlwZS5kaXNhYmxlRXZlbnQ9ZnVuY3Rpb24oYSl7dGhpcy5kaXNhYmxlVHlwZVthXT0hMH0sYS5MaXN0ZW5lci5wcm90b3R5cGUucmVzdW1lRXZlbnQ9ZnVuY3Rpb24oYSl7dGhpcy5kaXNhYmxlVHlwZVthXT0hMX19KFljYyksZnVuY3Rpb24oYSl7dmFyIGI9ZnVuY3Rpb24oKXt2YXIgYT0wO3JldHVybiBmdW5jdGlvbigpe3RoaXMuaWQ9YSsrLHRoaXMuc3RhcnRUb3VjaEV2ZW50PW51bGwsdGhpcy5lbmRUb3VjaEV2ZW50PW51bGwsdGhpcy5tb3ZlVG91Y2hFdmVudExpc3Q9W10sdGhpcy5zdGFydFRpbWU9RGF0ZS5ub3coKSx0aGlzLmVuZFRpbWU9MH19KCk7YS5Ub3VjaExpZmVUcmFjZXI9ZnVuY3Rpb24oYil7YS5MaXN0ZW5lci5jYWxsKHRoaXMpLHRoaXMudGFyZ2V0PWIudGFyZ2V0LHRoaXMuX2xpZmVMaXN0PVtdLHRoaXMuY3VycmVudExpZmVMaXN0PVtdLHRoaXMudGFyZ2V0VG91Y2hlcz1bXSx0aGlzLnRvdWNoZXM9W10sdGhpcy5jaGFuZ2VkVG91Y2hlcz1bXSx0aGlzLm9ubGlmZXN0YXJ0PW51bGwsdGhpcy5vbmxpZmVjaGFuZ2U9bnVsbCx0aGlzLm9ubGlmZWVuZD1udWxsLHRoaXMuYWRkTGlmZT1mdW5jdGlvbihhKXt0aGlzLl9saWZlTGlzdC5wdXNoKGEpfSx0aGlzLmZpbmRDdXJyZW50TGlmZUJ5VG91Y2hJRD1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMuY3VycmVudExpZmVMaXN0Lmxlbmd0aDtiKyspe3ZhciBjPXRoaXMuY3VycmVudExpZmVMaXN0W2JdO2lmKGMuc3RhcnRUb3VjaEV2ZW50LmlkZW50aWZpZXI9PT1hKXJldHVybiBjfX0sdGhpcy5kZWxldGVDdXJyZW50TGlmZUJ5VG91Y2hJRD1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPHRoaXMuY3VycmVudExpZmVMaXN0Lmxlbmd0aDtiKyspe3ZhciBjPXRoaXMuY3VycmVudExpZmVMaXN0W2JdO2lmKGMuc3RhcnRUb3VjaEV2ZW50LmlkZW50aWZpZXI9PT1hKXJldHVybiB0aGlzLmN1cnJlbnRMaWZlTGlzdC5zcGxpY2UoYiwxKSwhMH1yZXR1cm4hMX0sdGhpcy5pbml0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXI/KHRoaXMudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy50b3VjaHN0YXJ0LmJpbmQodGhpcykpLHRoaXMudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIix0aGlzLnRvdWNobW92ZS5iaW5kKHRoaXMpKSx2b2lkIHRoaXMudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMudG91Y2hlbmQuYmluZCh0aGlzKSkpOmNvbnNvbGUuZXJyb3IoXCJhZGRFdmVudExpc3RlbmVyIHVuZGVmaW5lZFwiKX0sdGhpcy5pbml0KCl9LGEuVG91Y2hMaWZlVHJhY2VyLnByb3RvdHlwZS50b3VjaHN0YXJ0PWZ1bmN0aW9uKGEpe2NvbnNvbGUubG9nKFwidG91Y2hzdGFydFwiLGEpO3ZhciBjPXRoaXM7YS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpLGMuc3luY1RvdWNoZXMoYSk7dmFyIGQ9bmV3IGI7ZC5zdGFydFRvdWNoRXZlbnQ9YS5jaGFuZ2VkVG91Y2hlc1swXSxjLmFkZExpZmUoZCksYy5jdXJyZW50TGlmZUxpc3QucHVzaChkKSxjLnRyaWdnZXJMaXN0ZW5lcihcImxpZmVzdGFydFwiLGQpfSxhLlRvdWNoTGlmZVRyYWNlci5wcm90b3R5cGUudG91Y2htb3ZlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpLGIuc3luY1RvdWNoZXMoYSk7Zm9yKHZhciBjPWEuY2hhbmdlZFRvdWNoZXMsZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdLGY9Yi5maW5kQ3VycmVudExpZmVCeVRvdWNoSUQoZS5pZGVudGlmaWVyKSxnPWIuaW5kZXhPZlRvdWNoRnJvbU1vdmVUb3VjaEV2ZW50TGlzdChmLm1vdmVUb3VjaEV2ZW50TGlzdCxlKTtnPT09LTE/Zi5tb3ZlVG91Y2hFdmVudExpc3QucHVzaChlKTpmLm1vdmVUb3VjaEV2ZW50TGlzdFtnXT1lLGIudHJpZ2dlckxpc3RlbmVyKFwibGlmZWNoYW5nZVwiLGYpfX0sYS5Ub3VjaExpZmVUcmFjZXIucHJvdG90eXBlLnRvdWNoZW5kPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpLGIuc3luY1RvdWNoZXMoYSk7dmFyIGM9YS5jaGFuZ2VkVG91Y2hlc1swXSxkPWIuZmluZEN1cnJlbnRMaWZlQnlUb3VjaElEKGMuaWRlbnRpZmllcik7ZC5lbmRUb3VjaEV2ZW50PWMsZC5lbmRUaW1lPURhdGUubm93KCksYi5kZWxldGVDdXJyZW50TGlmZUJ5VG91Y2hJRChjLmlkZW50aWZpZXIpLGIudHJpZ2dlckxpc3RlbmVyKFwibGlmZWVuZFwiLGQpfSxhLnV0aWxzLm1lcmdlT2JqZWN0KGEuVG91Y2hMaWZlVHJhY2VyLnByb3RvdHlwZSxhLkxpc3RlbmVyLnByb3RvdHlwZSksYS5Ub3VjaExpZmVUcmFjZXIucHJvdG90eXBlLnN5bmNUb3VjaGVzPWZ1bmN0aW9uKGEpe3RoaXMudG91Y2hlcz1bXSx0aGlzLmNoYW5nZWRUb3VjaGVzPVtdLHRoaXMudGFyZ2V0VG91Y2hlcz1bXTt2YXIgYj0wLGM9W107Zm9yKGM9YS50b3VjaGVzLGI9MDtiPGMubGVuZ3RoO2IrKyljW2JdLnBhZ2VYPWNbYl0ucGFnZVh8fGNbYl0ueCxjW2JdLnBhZ2VZPWNbYl0ucGFnZVl8fGNbYl0ueSxjW2JdLmNsaWVudFg9Y1tiXS5jbGllbnRYfHxjW2JdLngsY1tiXS5jbGllbnRZPWNbYl0uY2xpZW50WXx8Y1tiXS55LHRoaXMudG91Y2hlcy5wdXNoKGNbYl0pO2ZvcihjPWEuY2hhbmdlZFRvdWNoZXMsYj0wO2I8Yy5sZW5ndGg7YisrKWNbYl0ucGFnZVg9Y1tiXS5wYWdlWHx8Y1tiXS54LGNbYl0ucGFnZVk9Y1tiXS5wYWdlWXx8Y1tiXS55LGNbYl0uY2xpZW50WD1jW2JdLmNsaWVudFh8fGNbYl0ueCxjW2JdLmNsaWVudFk9Y1tiXS5jbGllbnRZfHxjW2JdLnksdGhpcy5jaGFuZ2VkVG91Y2hlcy5wdXNoKGNbYl0pO2ZvcihjPWEudGFyZ2V0VG91Y2hlc3x8YS50b3VjaGVzLGI9MDtiPGMubGVuZ3RoO2IrKyljW2JdLnBhZ2VYPWNbYl0ucGFnZVh8fGNbYl0ueCxjW2JdLnBhZ2VZPWNbYl0ucGFnZVl8fGNbYl0ueSxjW2JdLmNsaWVudFg9Y1tiXS5jbGllbnRYfHxjW2JdLngsY1tiXS5jbGllbnRZPWNbYl0uY2xpZW50WXx8Y1tiXS55LHRoaXMudGFyZ2V0VG91Y2hlcy5wdXNoKGNbYl0pfSxhLlRvdWNoTGlmZVRyYWNlci5wcm90b3R5cGUuaW5kZXhPZlRvdWNoRnJvbU1vdmVUb3VjaEV2ZW50TGlzdD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWlmKGIuaWRlbnRpZmllcj09PWFbY10uaWRlbnRpZmllcilyZXR1cm4gYztyZXR1cm4tMX19KFljYyksZnVuY3Rpb24oYSl7YS5HZXN0dXJlPWZ1bmN0aW9uKGIpe2EuTGlzdGVuZXIuY2FsbCh0aGlzKSx0aGlzLnljY0NsYXNzPWEuR2VzdHVyZSxiPWJ8fHt9LHRoaXMub3B0aW9uPXt0YXJnZXQ6bnVsbCx1c2VNdWx0aTohMH0sYS51dGlscy5leHRlbmQodGhpcy5vcHRpb24sYiksdGhpcy5fbG9uZ1RhcFRpbWVvdXQ9bnVsbCx0aGlzLmlzbXV0aWx0b3VjaGluZz0hMSx0aGlzLnRvdWNoTGlmZVRyYWNlcj1udWxsLHRoaXMuX2luaXQoKX0sYS5HZXN0dXJlLnByb3RvdHlwZT1uZXcgYS5MaXN0ZW5lcixhLkdlc3R1cmUucHJvdG90eXBlLl9pbml0PWZ1bmN0aW9uKCl7YS51dGlscy5pc01vYmlsZSgpPyhjb25zb2xlLmxvZyhcIm1vYmlsZSBnZXN0dXJlIGluaXQuLi5cIiksdGhpcy5faW5pdEZvck1vYmlsZSgpKTooY29uc29sZS5sb2coXCJwYyBnZXN0dXJlIGluaXQuLi5cIiksdGhpcy5faW5pdEZvclBDKCkpfSxhLkdlc3R1cmUucHJvdG90eXBlLl9pbml0Rm9yTW9iaWxlPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPW5ldyBhLlRvdWNoTGlmZVRyYWNlcih7dGFyZ2V0OnRoaXMub3B0aW9uLnRhcmdldH0pO3RoaXMudG91Y2hMaWZlVHJhY2VyPWM7dmFyIGQsZSxmPXt0YXA6ITEsc3dpcGU6ITF9O2Mub25saWZlc3RhcnQ9ZnVuY3Rpb24oYSl7aWYoYi50cmlnZ2VyTGlzdGVuZXIoXCJ0YXBcIixiLl9jcmVhdGVFdmVudERhdGEoYS5zdGFydFRvdWNoRXZlbnQsXCJ0YXBcIikpLGIudHJpZ2dlckxpc3RlbmVyKFwibG9nXCIsXCJ0YXAgdHJpZ2dlcmVkXCIpLGIudHJpZ2dlckxpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsYi5fY3JlYXRlRXZlbnREYXRhKGEuc3RhcnRUb3VjaEV2ZW50LFwiZHJhZ3N0YXJ0XCIpKSxjLmN1cnJlbnRMaWZlTGlzdC5sZW5ndGg+MSl7aWYoYi5pc211dGlsdG91Y2hpbmc9ITAsIWIub3B0aW9uLnVzZU11bHRpKXJldHVybjtyZXR1cm4gYi50cmlnZ2VyTGlzdGVuZXIoXCJsb2dcIixcIm11bHRpIHRvdWNoIHN0YXJ0IC4uLlwiKSxiLnRyaWdnZXJMaXN0ZW5lcihcIm11bHRpc3RhcnRcIixjLmN1cnJlbnRMaWZlTGlzdCksZi50YXA9ITEsZi5zd2lwZT0hMSxjbGVhclRpbWVvdXQodGhpcy5fbG9uZ1RhcFRpbWVvdXQpLGQ9Yy5jdXJyZW50TGlmZUxpc3RbMF0sZT1jLmN1cnJlbnRMaWZlTGlzdFsxXSx0aGlzfWIuaXNtdXRpbHRvdWNoaW5nPSExLGYudGFwPSExLGYuc3dpcGU9ITEsdGhpcy5fbG9uZ1RhcFRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2IudHJpZ2dlckxpc3RlbmVyKFwibG9uZ3RhcFwiLGIuX2NyZWF0ZUV2ZW50RGF0YShhLnN0YXJ0VG91Y2hFdmVudCxcImxvbmd0YXBcIikpfSw3NTApfSxjLm9ubGlmZWNoYW5nZT1mdW5jdGlvbihnKXtpZihnLm1vdmVUb3VjaEV2ZW50TGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IudHJpZ2dlckxpc3RlbmVyKFwiZHJhZ2dpbmdcIixiLl9jcmVhdGVFdmVudERhdGEoYSxcImRyYWdnaW5nXCIpKX0pLGMuY3VycmVudExpZmVMaXN0Lmxlbmd0aD4xKXtpZihiLmlzbXV0aWx0b3VjaGluZz0hMCwhYi5vcHRpb24udXNlTXVsdGkpcmV0dXJuO2YudGFwPSEwLGYuc3dpcGU9ITAsYi50cmlnZ2VyTGlzdGVuZXIoXCJsb2dcIixcIm11bHRpIHRvdWNoIG1vdmUgLi4uXCIpLGIudHJpZ2dlckxpc3RlbmVyKFwibXVsdGljaGFuZ2VcIixkLGUpO3ZhciBoPWIuZ2V0Wm9vbVJhdGVBbmRSb3RhdGVBbmdsZShkLGUpO2lmKGEudXRpbHMuaXNOdW0oaC5yYXRlKSl7dmFyIGk9Yi5fY3JlYXRlRXZlbnREYXRhKGQuc3RhcnRUb3VjaEV2ZW50LFwiem9vbVwiKTtpLnpvb21SYXRlPWgucmF0ZSxiLnRyaWdnZXJMaXN0ZW5lcihcInpvb21cIixiLl9jcmVhdGVFdmVudERhdGEoaSxcInpvb21cIikpLGIudHJpZ2dlckxpc3RlbmVyKFwibG9nXCIsXCJ6b29tIHRyaWdnZXJlZFwiLGgucmF0ZSl9aWYoYS51dGlscy5pc051bShoLmFuZ2xlKSl7dmFyIGk9Yi5fY3JlYXRlRXZlbnREYXRhKGQuc3RhcnRUb3VjaEV2ZW50LFwicm90YXRlXCIpO2kuYW5nbGU9aC5hbmdsZSxiLnRyaWdnZXJMaXN0ZW5lcihcInJvdGF0ZVwiLGIuX2NyZWF0ZUV2ZW50RGF0YShpLFwicm90YXRlXCIpKSxiLnRyaWdnZXJMaXN0ZW5lcihcImxvZ1wiLFwicm90YXRlIHRyaWdnZXJlZFwiLGguYW5nbGUpfXJldHVybiB0aGlzfWlmKGcubW92ZVRvdWNoRXZlbnRMaXN0Lmxlbmd0aD4wKXtiLmlzbXV0aWx0b3VjaGluZz0hMTt2YXIgaj1nLnN0YXJ0VG91Y2hFdmVudCxrPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGcubW92ZVRvdWNoRXZlbnRMaXN0LC0xKVswXTsoTWF0aC5hYnMoay5wYWdlWC1qLnBhZ2VYKT4xMHx8TWF0aC5hYnMoay5wYWdlWS1qLnBhZ2VZKT4xMCkmJihmLnRhcD0hMCxjbGVhclRpbWVvdXQodGhpcy5fbG9uZ1RhcFRpbWVvdXQpKX19LGMub25saWZlZW5kPWZ1bmN0aW9uKGEpe2lmKGIudHJpZ2dlckxpc3RlbmVyKFwiZHJhZ2VuZFwiLGIuX2NyZWF0ZUV2ZW50RGF0YShhLmVuZFRvdWNoRXZlbnQsXCJkcmFnZW5kXCIpKSxiLmlzbXV0aWx0b3VjaGluZz0hMCwxPT09Yy5jdXJyZW50TGlmZUxpc3QubGVuZ3RoKXJldHVybiBiLmlzbXV0aWx0b3VjaGluZz0hMSxiLnRyaWdnZXJMaXN0ZW5lcihcIm11bHRpZW5kXCIsZCxlKTtpZigwPT09Yy5jdXJyZW50TGlmZUxpc3QubGVuZ3RoKXtpZihiLmlzbXV0aWx0b3VjaGluZz0hMSwhZi50YXAmJmEuZW5kVGltZS1hLnN0YXJ0VGltZTwzMDApcmV0dXJuIGNsZWFyVGltZW91dCh0aGlzLl9sb25nVGFwVGltZW91dCksZCYmYS5lbmRUaW1lLWQuZW5kVGltZTwzMDAmJk1hdGguYWJzKGQuZW5kVG91Y2hFdmVudC5wYWdlWC1hLmVuZFRvdWNoRXZlbnQucGFnZVgpPDEwJiZNYXRoLmFicyhkLmVuZFRvdWNoRXZlbnQucGFnZVktYS5lbmRUb3VjaEV2ZW50LnBhZ2VZKTwxMD8oYi50cmlnZ2VyTGlzdGVuZXIoXCJkb3VibGV0YXBcIixiLl9jcmVhdGVFdmVudERhdGEoYS5lbmRUb3VjaEV2ZW50LFwiZG91YmxldGFwXCIpKSxiLnRyaWdnZXJMaXN0ZW5lcihcImxvZ1wiLFwiZG91YmxldGFwIHRyaWdnZXJlZFwiKSxkPW51bGwsdGhpcyk6KGQ9YSx0aGlzKTtpZighZi5zd2lwZSYmYS5lbmRUaW1lLWEuc3RhcnRUaW1lPDMwMCl7dmFyIGc9YS5zdGFydFRvdWNoRXZlbnQsaD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhLm1vdmVUb3VjaEV2ZW50TGlzdCwtMSlbMF07aWYoTWF0aC5hYnMoaC5wYWdlWC1nLnBhZ2VYKT4zMHx8TWF0aC5hYnMoaC5wYWdlWS1nLnBhZ2VZKT4zMCl7dmFyIGk9Yi5fZ2V0U3dpcGVEaXJlY3Rpb24oZy5wYWdlWCxnLnBhZ2VZLGgucGFnZVgsaC5wYWdlWSksaj1cInN3aXBlXCIraTtiLnRyaWdnZXJMaXN0ZW5lcihcImxvZ1wiLGopLGEuZW5kVG91Y2hFdmVudC5zd2lwZURpcmVjdGlvbj1pLGIudHJpZ2dlckxpc3RlbmVyKGosYi5fY3JlYXRlRXZlbnREYXRhKGEuZW5kVG91Y2hFdmVudCxqKSksYi50cmlnZ2VyTGlzdGVuZXIoXCJzd2lwZVwiLGIuX2NyZWF0ZUV2ZW50RGF0YShhLmVuZFRvdWNoRXZlbnQsXCJzd2lwZVwiKSksY29uc29sZS5sb2coXCJzd2lwZVwiLGopfXJldHVybiB0aGlzfX19fSxhLkdlc3R1cmUucHJvdG90eXBlLl9pbml0Rm9yUEM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9bnVsbCxjPW51bGwsZD0hMSxlPW51bGwsZj0tMSxnPTA7dGhpcy5vcHRpb24udGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIixmdW5jdGlvbihjKXtjLmlkZW50aWZpZXI9KytnLGI9YS5fY3JlYXRlRXZlbnREYXRhKGMpLGY9c2V0VGltZW91dChmdW5jdGlvbigpe2NvbnNvbGUubG9nKFwibG9uZ3RhcFwiLERhdGUubm93KCksXCIuLi5cIiksYS50cmlnZ2VyTGlzdGVuZXIoXCJsb2dcIixcImxvbmcgdGFwIC4uLlwiKSxhLnRyaWdnZXJMaXN0ZW5lcihcImxvbmd0YXBcIixhLl9jcmVhdGVFdmVudERhdGEoYixcImxvbmd0YXBcIikpfSw3NTApfSksdGhpcy5vcHRpb24udGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixmdW5jdGlvbihlKXtpZihhLnRyaWdnZXJMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGEuX2NyZWF0ZUV2ZW50RGF0YShlLFwibW91c2Vtb3ZlXCIpKSxiKXtpZihiJiZlLmNsaWVudFg9PT1iLmNsaWVudFgmJmUuY2xpZW50WT09PWIuY2xpZW50WSlyZXR1cm47aWYoYyYmZS5jbGllbnRYPT09Yi5jbGllbnRYJiZlLmNsaWVudFk9PT1iLmNsaWVudFkpcmV0dXJuO2NsZWFyVGltZW91dChmKSxkfHwoYS50cmlnZ2VyTGlzdGVuZXIoXCJkcmFnc3RhcnRcIixhLl9jcmVhdGVFdmVudERhdGEoYixcImRyYWdzdGFydFwiKSksXG5kPSEwKSxlLmlkZW50aWZpZXI9ZyxhLnRyaWdnZXJMaXN0ZW5lcihcImRyYWdnaW5nXCIsYS5fY3JlYXRlRXZlbnREYXRhKGUsXCJkcmFnZ2luZ1wiKSl9ZWxzZSBjbGVhclRpbWVvdXQoZil9KSx0aGlzLm9wdGlvbi50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIixmdW5jdGlvbihoKXtpZihoLmlkZW50aWZpZXI9ZyxjPWEuX2NyZWF0ZUV2ZW50RGF0YShoKSxkKXtpZihjbGVhclRpbWVvdXQoZiksYS50cmlnZ2VyTGlzdGVuZXIoXCJkcmFnZW5kXCIsYS5fY3JlYXRlRXZlbnREYXRhKGgsXCJkcmFnZW5kXCIpKSxkJiZjLmNyZWF0ZVRpbWUtYi5jcmVhdGVUaW1lPDMwMCYmKE1hdGguYWJzKGMucGFnZVgtYi5wYWdlWCk+MzB8fE1hdGguYWJzKGMucGFnZVktYi5wYWdlWSk+MzApKXt2YXIgaT1hLl9nZXRTd2lwZURpcmVjdGlvbihiLnBhZ2VYLGIucGFnZVksYy5wYWdlWCxjLnBhZ2VZKSxqPVwic3dpcGVcIitpO2EudHJpZ2dlckxpc3RlbmVyKFwibG9nXCIsaiksYi5zd2lwZURpcmVjdGlvbj1pLGEudHJpZ2dlckxpc3RlbmVyKGosYS5fY3JlYXRlRXZlbnREYXRhKGIsaikpLGEudHJpZ2dlckxpc3RlbmVyKFwic3dpcGVcIixhLl9jcmVhdGVFdmVudERhdGEoYixcInN3aXBlXCIpKSxjb25zb2xlLmxvZyhcInN3aXBlXCIsail9cmV0dXJuIGQ9ITEsYj1udWxsLG51bGx9aWYoIWQmJmImJmMuY3JlYXRlVGltZS1iLmNyZWF0ZVRpbWU8MzAwKXtjbGVhclRpbWVvdXQoZik7dmFyIGs9YS5fY3JlYXRlRXZlbnREYXRhKGIsXCJ0YXBcIik7cmV0dXJuIGEudHJpZ2dlckxpc3RlbmVyKFwidGFwXCIsayksYS50cmlnZ2VyTGlzdGVuZXIoXCJsb2dcIixcInRhcCB0cmlnZ2VyZWRcIiksZSYmay5jcmVhdGVUaW1lLWUuY3JlYXRlVGltZTwzMDAmJk1hdGguYWJzKGUucGFnZVgtay5wYWdlWCk8MTAmJk1hdGguYWJzKGUucGFnZVktay5wYWdlWSk8MTA/KGEudHJpZ2dlckxpc3RlbmVyKFwiZG91YmxldGFwXCIsYS5fY3JlYXRlRXZlbnREYXRhKGssXCJkb3VibGV0YXBcIikpLGEudHJpZ2dlckxpc3RlbmVyKFwibG9nXCIsXCJkb3VibGV0YXAgdHJpZ2dlcmVkXCIpLGU9bnVsbCx0aGlzKTooZT1rLGI9bnVsbCx0aGlzKX19KX0sYS5HZXN0dXJlLnByb3RvdHlwZS5fY3JlYXRlRXZlbnREYXRhPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9e3R5cGU6XCJcIix0YXJnZXQ6bnVsbCxpZGVudGlmaWVyOi0xLHg6MCx5OjAsY2xpZW50WDowLGNsaWVudFk6MCxwYWdlWDowLHBhZ2VZOjAsc2NyZWVuWDowLHNjcmVlblk6MCxmb3JjZToxLHN3aXBlRGlyZWN0aW9uOlwiXCIsem9vbVJhdGU6MSxhbmdsZTowLGNyZWF0ZVRpbWU6RGF0ZS5ub3coKX07cmV0dXJuIGQ9YS51dGlscy5leHRlbmQoZCxiKSxkLnR5cGU9YyxkfSxhLkdlc3R1cmUucHJvdG90eXBlLl9nZXRTd2lwZURpcmVjdGlvbj1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gTWF0aC5hYnMoYS1jKT49TWF0aC5hYnMoYi1kKT9hLWM+MD9cImxlZnRcIjpcInJpZ2h0XCI6Yi1kPjA/XCJ1cFwiOlwiZG93blwifSxhLkdlc3R1cmUucHJvdG90eXBlLmdldFpvb21SYXRlQW5kUm90YXRlQW5nbGU9ZnVuY3Rpb24oYixjKXt0aGlzLnRyaWdnZXJMaXN0ZW5lcihcImxvZ1wiLFwicHJlTGlmZVwiKSx0aGlzLnRyaWdnZXJMaXN0ZW5lcihcImxvZ1wiLGIpLHRoaXMudHJpZ2dlckxpc3RlbmVyKFwibG9nXCIsXCJjdXJMaWZlXCIpLHRoaXMudHJpZ2dlckxpc3RlbmVyKFwibG9nXCIsYyk7dmFyIGQ9Yi5zdGFydFRvdWNoRXZlbnQucGFnZVgsZT1iLnN0YXJ0VG91Y2hFdmVudC5wYWdlWSxmPWMuc3RhcnRUb3VjaEV2ZW50LnBhZ2VYLGc9Yy5zdGFydFRvdWNoRXZlbnQucGFnZVksaD1iLm1vdmVUb3VjaEV2ZW50TGlzdC5sZW5ndGg+MD9iLm1vdmVUb3VjaEV2ZW50TGlzdFtiLm1vdmVUb3VjaEV2ZW50TGlzdC5sZW5ndGgtMV06Yi5zdGFydFRvdWNoRXZlbnQsaT1jLm1vdmVUb3VjaEV2ZW50TGlzdC5sZW5ndGg+MD9jLm1vdmVUb3VjaEV2ZW50TGlzdFtjLm1vdmVUb3VjaEV2ZW50TGlzdC5sZW5ndGgtMV06Yy5zdGFydFRvdWNoRXZlbnQsaj1oLnBhZ2VYLGs9aC5wYWdlWSxsPWkucGFnZVgsbT1pLnBhZ2VZLG49bmV3IGEuTWF0aC5WZWN0b3IoZi1kLGctZSksbz1uZXcgYS5NYXRoLlZlY3RvcihsLWosbS1rKSxwPU1hdGguYWNvcyhvLmRvdChuKS8oby5nZXRMZW5ndGgoKSpuLmdldExlbmd0aCgpKSkvTWF0aC5QSSoxODA7cmV0dXJue3JhdGU6by5nZXRMZW5ndGgoKS9uLmdldExlbmd0aCgpLGFuZ2xlOnAqKG8uY3Jvc3Mobikuej4wPy0xOjEpfX0sYS5HZXN0dXJlLnByb3RvdHlwZS5lbmFibGVNdXRpVG91Y2g9ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb24udXNlTXVsdGk9ITF9fShZY2MpLGZ1bmN0aW9uKGEpe3ZhciBiPTA7YS5MYXllcj1mdW5jdGlvbihjLGQpe2EuTGlzdGVuZXIuY2FsbCh0aGlzKSxkPWR8fHt9LHRoaXMueWNjQ2xhc3M9YS5MYXllcix0aGlzLnVpTGlzdD1bXSx0aGlzLnVpQ291bnRSZWN1cnNpb249MCx0aGlzLnVpQ291bnRSZW5kZXJlZD0wLHRoaXMueWNjSW5zdGFuY2U9Yyx0aGlzLmN0eD1udWxsLHRoaXMudXNlQ2FjaGU9ITEsdGhpcy5jdHhDYWNoZT1udWxsLHRoaXMuY3R4Q2FjaGVSZWN0PW51bGwsdGhpcy5yZW5kZXJDYWNoZVJlY3Q9ITEsdGhpcy5pZD1iKyssdGhpcy50eXBlPVwidWlcIix0aGlzLnRleHRWYWx1ZT1cIlwiLHRoaXMubmFtZT1kLm5hbWU/ZC5uYW1lOlwi5Zu+5bGCX1wiK3RoaXMudHlwZStcIl9cIit0aGlzLmlkLHRoaXMueD0wLHRoaXMueT0wLHRoaXMud2lkdGg9Yy5nZXRTdGFnZVdpZHRoKCksdGhpcy5oZWlnaHQ9Yy5nZXRTdGFnZUhlaWdodCgpLHRoaXMuc2hvdz0hMCx0aGlzLmdob3N0PSExLHRoaXMuZW5hYmxlRXZlbnRNYW5hZ2VyPSExLHRoaXMuZW5hYmxlRnJhbWVFdmVudD0hMSx0aGlzLm9uRnJhbWVDb21pbmc9ZnVuY3Rpb24oKXt9LGEudXRpbHMuZXh0ZW5kKHRoaXMsZCksdGhpcy5pbml0KCl9LGEuTGF5ZXIucHJvdG90eXBlPW5ldyBhLkxpc3RlbmVyLGEuTGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWEuTGF5ZXIsYS5MYXllci5yZWxlYXNlPWZ1bmN0aW9uKGIpe2EuTGlzdGVuZXIucmVsZWFzZShiKSxiLnljY0NsYXNzPW51bGwsYi51aUxpc3Q9bnVsbCxiLnljY0luc3RhbmNlPW51bGwsYi5zaG93PSExLGIuZW5hYmxlRXZlbnRNYW5hZ2VyPSExLGIuZW5hYmxlRnJhbWVFdmVudD0hMSxiLm9uRnJhbWVDb21pbmc9bnVsbH0sYS5MYXllci5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy5jdHg9dGhpcy55Y2NJbnN0YW5jZS5jdHgsdGhpcy5jdHhDYWNoZT10aGlzLnVzZUNhY2hlP3RoaXMueWNjSW5zdGFuY2UuY3JlYXRlQ2FjaGVDdHgoe3dpZHRoOnRoaXMud2lkdGgqdGhpcy55Y2NJbnN0YW5jZS5kcGksaGVpZ2h0OnRoaXMuaGVpZ2h0KnRoaXMueWNjSW5zdGFuY2UuZHBpfSk6dGhpcy5jdHgsYS5fc2V0Q3R4UHJvcHMoKX0sYS5MYXllci5wcm90b3R5cGUuX2luaXRFdmVudD1mdW5jdGlvbigpe2Z1bmN0aW9uIGIoYil7aWYoIWIuc3RvcCYmIShlJiZiLng9PT1lLngmJmIueT09PWUueXx8ZiYmYi54PT09Zi54JiZiLnk9PT1mLnkpKXtpZihnPSEwLGUpe2lmKCFoKXt2YXIgYz1uZXcgYS5FdmVudCh7dHlwZTpcImRyYWdzdGFydFwiLHg6ZS54LHk6ZS55LG1vdXNlRG93blljY0V2ZW50OmV9KTtkLnRyaWdnZXJMaXN0ZW5lcihjLnR5cGUsYyksZS50YXJnZXQmJihjLnRhcmdldD1lLnRhcmdldCxjLnRhcmdldC50cmlnZ2VyTGlzdGVuZXIoYy50eXBlLGMpKX1oPSEwO3ZhciBpPW5ldyBhLkV2ZW50KHt0eXBlOlwiZHJhZ2dpbmdcIix4OmIueCx5OmIueSxtb3VzZURvd25ZY2NFdmVudDplfSk7cmV0dXJuIGQudHJpZ2dlckxpc3RlbmVyKGkudHlwZSxpKSxlLnRhcmdldCYmKGkudGFyZ2V0PWUudGFyZ2V0LGkudGFyZ2V0LnRyaWdnZXJMaXN0ZW5lcihpLnR5cGUsaSkpLG51bGx9Zm9yKHZhciBqPWQudWlMaXN0Lmxlbmd0aC0xO2o+PTA7ai0tKXt2YXIgaz1kLnVpTGlzdFtqXSxsPW5ldyBhLk1hdGguRG90KGIueC1rLmJlbG9uZ1RvLngsYi55LWsuYmVsb25nVG8ueSk7aWYobC5pc0luUmVjdChrLnJlY3QpKXtiLnN0b3A9ITAsYi5tb3VzZURvd25ZY2NFdmVudD1lLGIubW91c2VVcFljY0V2ZW50PWYsYi50YXJnZXQ9ayxrLnRyaWdnZXJMaXN0ZW5lcihiLnR5cGUsYik7YnJlYWt9fX19ZnVuY3Rpb24gYyhiKXtpZighYi5zdG9wKWZvcih2YXIgYz1kLnVpTGlzdC5sZW5ndGgtMTtjPj0wO2MtLSl7dmFyIGc9ZC51aUxpc3RbY10saD1uZXcgYS5NYXRoLkRvdChiLngsYi55KTtpZihnLnJlY3QmJmguaXNJblJlY3QoZy5nZXRBYnNvbHV0ZVBvc2l0aW9uKCkpJiZiLnN0b3A9PT0hMSl7Yi5zdG9wPSEwLGIubW91c2VEb3duWWNjRXZlbnQ9ZSxiLm1vdXNlVXBZY2NFdmVudD1mLGIudGFyZ2V0PWcsYi50YXJnZXREZWx0YVBvc2l0aW9uPW5ldyBhLk1hdGguRG90KGIueC1nLmdldEFic29sdXRlUG9zaXRpb24oKS54LGIueS1nLmdldEFic29sdXRlUG9zaXRpb24oKS55KSxnLnRyaWdnZXJMaXN0ZW5lcihiLnR5cGUsYik7YnJlYWt9fX12YXIgZD10aGlzLGU9bnVsbCxmPW51bGwsZz0hMSxoPSExO3RoaXMuYWRkTGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2d8fGMoYSl9KSx0aGlzLmFkZExpc3RlbmVyKFwibW91c2Vkb3duXCIsZnVuY3Rpb24oYSl7Zz0hMSxoPSExLGU9YSxjKGEpfSksdGhpcy5hZGRMaXN0ZW5lcihcIm1vdXNldXBcIixmdW5jdGlvbihiKXtpZihoKXt2YXIgZz1uZXcgYS5FdmVudCh7dHlwZTpcImRyYWdlbmRcIix4OmIueCx5OmIueSxtb3VzZURvd25ZY2NFdmVudDplfSk7ZC50cmlnZ2VyTGlzdGVuZXIoXCJkcmFnZW5kXCIsZyksZSYmZS50YXJnZXQmJihkLnRhcmdldD1lLnRhcmdldCxkLnRhcmdldC50cmlnZ2VyTGlzdGVuZXIoXCJkcmFnZW5kXCIsZykpfWIubW91c2VEb3duWWNjRXZlbnQ9ZT1udWxsLGY9YixjKGIpfSksdGhpcy5hZGRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLGIpfSxhLkxheWVyLnByb3RvdHlwZS5fc2V0Q3R4UHJvcHM9ZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzO2M9Y3x8ZC5jdHg7dmFyIGU9e2ZvbnRTdHlsZTpcIm5vcm1hbFwiLGZvbnRWYXJpYW50Olwibm9ybWFsXCIsZm9udFdlaWdodDpcIm5vcm1hbFwiLGZvbnRTaXplOlwiMTZweFwiLGZvbnRGYW1pbHk6XCLlvq7ova/pm4Xpu5FcIixmb250OlwiMTZweCDlvq7ova/pm4Xpu5FcIix0ZXh0QmFzZWxpbmU6XCJoYW5naW5nXCIsZmlsbFN0eWxlOlwicmVkXCIsc3Ryb2tlU3R5bGU6XCJibHVlXCJ9O2U9YS51dGlscy5leHRlbmQoZSxiKSxlLmZvbnRTaXplPXBhcnNlSW50KGUuZm9udFNpemUpKnRoaXMueWNjSW5zdGFuY2UuZ2V0U3lzdGVtSW5mbygpLmRldmljZVBpeGVsUmF0aW8rXCJweFwiLGUuZm9udD1bZS5mb250U3R5bGUsZS5mb250VmFyaWFudCxlLmZvbnRXZWlnaHQsZS5mb250U2l6ZSxlLmZvbnRGYW1pbHldLmpvaW4oXCIgXCIpO2Zvcih2YXIgZiBpbiBlKWUuaGFzT3duUHJvcGVydHkoZikmJihjW2ZdPWVbZl0pfSxhLkxheWVyLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuY3R4LmNsZWFyUmVjdCgwLDAsdGhpcy53aWR0aCx0aGlzLmhlaWdodCl9LGEuTGF5ZXIucHJvdG90eXBlLnJlbW92ZUFsbFVJPWZ1bmN0aW9uKCl7dGhpcy51aUxpc3QuZm9yRWFjaChmdW5jdGlvbihiKXthLlVJLnJlbGVhc2UoYil9KSx0aGlzLnVpTGlzdC5sZW5ndGg9MCx0aGlzLnVwZGF0ZUNhY2hlKCl9LGEuTGF5ZXIucHJvdG90eXBlLnJlbW92ZVNlbGY9ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUFsbFVJKCksdGhpcy55Y2NJbnN0YW5jZS5sYXllck1hbmFnZXIuZGVsZXRlTGF5ZXIodGhpcyksYS5MYXllci5yZWxlYXNlKHRoaXMpfSxhLkxheWVyLnByb3RvdHlwZS5yZW5kZXJUb1N0YWdlPWZ1bmN0aW9uKCl7dGhpcy5zaG93JiZ0aGlzLnljY0luc3RhbmNlLmN0eC5kcmF3SW1hZ2UodGhpcy5jdHguY2FudmFzLDAsMCx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KX0sYS5MYXllci5wcm90b3R5cGUuYWRkVUk9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO2EuaXRvcigpLmVhY2goZnVuY3Rpb24oYSl7YS5pbml0KGMpfSk7dmFyIGQ9dGhpcy51aUxpc3QuaW5kZXhPZihiKTtyZXR1cm4gYiYmZCE9PS0xPyh0aGlzLnVpTGlzdC5zcGxpY2UoZCwwLGEpLGEuX29uQWRkZWQmJmEuX29uQWRkZWQoKSx0aGlzLnVwZGF0ZUNhY2hlKCksYSk6KHRoaXMudWlMaXN0LnB1c2goYSksYS5fb25BZGRlZCYmYS5fb25BZGRlZCgpLGEpfSxhLkxheWVyLnByb3RvdHlwZS5yZW1vdmVVST1mdW5jdGlvbihiKXtpZighYilyZXR1cm4hMTt2YXIgYz10aGlzLnVpTGlzdC5pbmRleE9mKGIpO3JldHVybiBjIT09LTEmJihhLlVJLnJlbGVhc2UoYiksdGhpcy51aUxpc3RbY109bnVsbCx0aGlzLnVpTGlzdC5zcGxpY2UoYywxKSx0aGlzLnVwZGF0ZUNhY2hlKCksITApfSxhLkxheWVyLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oYSl7dGhpcy5yZVJlbmRlcihhKX0sYS5MYXllci5wcm90b3R5cGUucmVSZW5kZXI9ZnVuY3Rpb24oYSl7aWYodGhpcy5zaG93KXJldHVybiB0aGlzLnVzZUNhY2hlP3RoaXMucmVuZGVyQ2FjaGVUb1N0YWdlKGEpOnZvaWQgdGhpcy5yZW5kZXJBbGxUb0N0eCh0aGlzLmN0eCl9LGEuTGF5ZXIucHJvdG90eXBlLnJlbmRlckNhY2hlVG9TdGFnZT1mdW5jdGlvbihhKXtpZih0aGlzLnVzZUNhY2hlKXthJiZ0aGlzLnVwZGF0ZUNhY2hlKCk7dmFyIGI9dGhpcy55Y2NJbnN0YW5jZS5kcGk7aWYodGhpcy5jdHhDYWNoZVJlY3Qpe3ZhciBjPXRoaXMuY3R4Q2FjaGVSZWN0LngqYixkPXRoaXMuY3R4Q2FjaGVSZWN0LnkqYixlPXRoaXMuY3R4Q2FjaGVSZWN0LndpZHRoKmIsZj10aGlzLmN0eENhY2hlUmVjdC5oZWlnaHQqYjt0aGlzLmN0eC5kcmF3SW1hZ2UodGhpcy5jdHhDYWNoZS5jYW52YXMsYyxkLGUsZixjLGQsZSxmKX1lbHNlIHRoaXMuY3R4LmRyYXdJbWFnZSh0aGlzLmN0eENhY2hlLmNhbnZhcywwLDApO3RoaXMuY3R4LmRyYXcmJnRoaXMuY3R4LmRyYXcoKX19LGEuTGF5ZXIucHJvdG90eXBlLmdldFVJRnJvbVBvaW50ZXI9ZnVuY3Rpb24oYixjKXtjPSFhLnV0aWxzLmlzQm9vbGVhbihjKXx8Yztmb3IodmFyIGQ9dGhpcyxlPW51bGwsZj0wLGc9MDtnPHRoaXMudWlMaXN0Lmxlbmd0aDtnKyspe3ZhciBoPWQudWlMaXN0W2ddO2MmJiFoLnNob3d8fHRoaXMudWlMaXN0W2ddLml0b3IoKS5kZXB0aERvd24oZnVuY3Rpb24oYSxkKXtyZXR1cm4gYS5naG9zdD8tMTpjJiYhYS5zaG93Py0xOnZvaWQoYS5jb250YWluRG90KGIpJiZkPj1mJiYoZT1hLGY9ZCkpfSl9cmV0dXJuIGV9LGEuTGF5ZXIucHJvdG90eXBlLmdldFVJTGlzdEZyb21Qb2ludGVyPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTA7Yzx0aGlzLnVpTGlzdC5sZW5ndGg7YysrKXRoaXMudWlMaXN0W2NdLml0b3IoKS5kZXB0aERvd24oZnVuY3Rpb24oYyxkKXtjLmNvbnRhaW5Eb3QoYSkmJmIucHVzaChjKX0pO3JldHVybiBifSxhLkxheWVyLnByb3RvdHlwZS50cmFuc2Zvcm1Ub0Fic29sdXRlPWZ1bmN0aW9uKGIpe3ZhciBjPW51bGw7aWYoYS51dGlscy5pc0FycmF5KGIpKXtjPVtdO2Zvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1uZXcgYS5NYXRoLkRvdCgwLDApLGY9YltkXTtlLng9dGhpcy54K2YueCxlLnk9dGhpcy55K2YueSxjLnB1c2goZSl9cmV0dXJuIGN9cmV0dXJuIGM9bmV3IGEuTWF0aC5Eb3QoMCwwKSxjLng9dGhpcy54K2IueCxjLnk9dGhpcy55K2IueSxjfSxhLkxheWVyLnByb3RvdHlwZS50cmFuc2Zvcm1Ub0xvY2FsPWZ1bmN0aW9uKGIpe3ZhciBjPW51bGw7aWYoYS51dGlscy5pc0FycmF5KGIpKXtjPVtdO2Zvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1uZXcgYS5NYXRoLkRvdCgwLDApLGY9YltkXTtlLng9Zi54LXRoaXMueCxlLnk9Zi55LXRoaXMueSxjLnB1c2goZSl9cmV0dXJuIGN9cmV0dXJuIGM9bmV3IGEuTWF0aC5Eb3QoMCwwKSxjLng9Yi54LXRoaXMueCxjLnk9Yi55LXRoaXMueSxjfSxhLkxheWVyLnByb3RvdHlwZS5yZW5kZXJBbGxUb0N0eD1mdW5jdGlvbihhKXt2YXIgYj10aGlzO2IudWlDb3VudFJlY3Vyc2lvbj0wLGIudWlDb3VudFJlbmRlcmVkPTA7Zm9yKHZhciBjPTA7Yzx0aGlzLnVpTGlzdC5sZW5ndGg7YysrKXRoaXMudWlMaXN0W2NdLnNob3cmJih0aGlzLnVpTGlzdFtjXS5pdG9yKCkuZGVwdGhEb3duKGZ1bmN0aW9uKGEsYyl7aWYoYi51aUNvdW50UmVjdXJzaW9uKyssIWEuc2hvdylyZXR1cm4tMTt2YXIgZD1hLl9fcmVuZGVyKCk7Yi51c2VDYWNoZSYmYi5fbWVyZ2VDdHhDYWNoZVJlY3QoYS5nZXRBYnNvbHV0ZVBvc2l0aW9uUmVjdCgpKSxkfHxiLnVpQ291bnRSZW5kZXJlZCsrfSksdGhpcy51aUxpc3RbY10uX29uQ2hpbGRyZW5SZW5kZXJlZCYmdGhpcy51aUxpc3RbY10uX29uQ2hpbGRyZW5SZW5kZXJlZCgpKTt2YXIgZD10aGlzLmN0eENhY2hlUmVjdDtpZih0aGlzLnVzZUNhY2hlJiZkJiZ0aGlzLnJlbmRlckNhY2hlUmVjdCl7dmFyIGU9dGhpcy55Y2NJbnN0YW5jZS5kcGksZj10aGlzLnljY0luc3RhbmNlLmdldFN0YWdlV2lkdGgoKS9lLGc9dGhpcy55Y2NJbnN0YW5jZS5nZXRTdGFnZUhlaWdodCgpL2UsaD1kLng8MD8wOmQueCxpPWQueTwwPzA6ZC55LGo9ZC53aWR0aD5mP2Y6ZC53aWR0aCxrPWQuaGVpZ2h0Pmc/ZzpkLmhlaWdodDthLnNhdmUoKSxhLmJlZ2luUGF0aCgpLGEuc3Ryb2tlU3R5bGU9XCJyZWRcIixhLnN0cm9rZVdpZHRoPTIsYS5yZWN0KGgqZSxpKmUsaiplLGsqZSksYS5jbG9zZVBhdGgoKSxhLnN0cm9rZSgpLGEucmVzdG9yZSgpfWEuZHJhdyYmYS5kcmF3KCl9LGEuTGF5ZXIucHJvdG90eXBlLl9tZXJnZUN0eENhY2hlUmVjdD1mdW5jdGlvbihiKXt2YXIgYz10aGlzLnljY0luc3RhbmNlO2lmKCF0aGlzLmN0eENhY2hlUmVjdClyZXR1cm4gdGhpcy5jdHhDYWNoZVJlY3Q9bmV3IGEuTWF0aC5SZWN0KGIpO3ZhciBkPWMuZ2V0U3RhZ2VXaWR0aCgpLGU9Yy5nZXRTdGFnZUhlaWdodCgpLGY9Yy5kcGksZz10aGlzLmN0eENhY2hlUmVjdCxoPWcueCtnLndpZHRoLGk9Zy55K2cuaGVpZ2h0LGo9Yi54K2Iud2lkdGgsaz1iLnkrYi5oZWlnaHQ7cmV0dXJuIGcueD1nLng8Yi54P2cueDpiLngsZy55PWcueTxiLnk/Zy55OmIueSxnLndpZHRoPWg8aj9qLWcueDpoLWcueCxnLmhlaWdodD1pPGs/ay1nLnk6aS1nLnksZy54PWcueDwwPzA6Zy54LGcueT1nLnk8MD8wOmcueSxnLndpZHRoPWcueCtnLndpZHRoPmQvZj9kL2YtZy54Omcud2lkdGgsZy5oZWlnaHQ9Zy55K2cuaGVpZ2h0PmUvZj9lL2YtZy55OmcuaGVpZ2h0LGd9LGEuTGF5ZXIucHJvdG90eXBlLnVwZGF0ZUNhY2hlPWZ1bmN0aW9uKCl7dGhpcy51c2VDYWNoZSYmKHRoaXMuY2xlYXJDYWNoZSgpLHRoaXMucmVuZGVyQWxsVG9DdHgodGhpcy5jdHhDYWNoZSkpfSxhLkxheWVyLnByb3RvdHlwZS5jbGVhckNhY2hlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jdHhDYWNoZS5jYW52YXMud2lkdGg7dGhpcy5jdHhDYWNoZS5jYW52YXMud2lkdGg9YSx0aGlzLmN0eENhY2hlUmVjdD1udWxsfX0oWWNjKSxmdW5jdGlvbihhKXthLkxheWVyTWFuYWdlcj1mdW5jdGlvbihhKXt0aGlzLnljY0luc3RhbmNlPWEsdGhpcy5yZW5kZXJUaW1lPTAsdGhpcy5tYXhSZW5kZXJUaW1lPTAsdGhpcy5yZW5kZXJVaUNvdW50PTB9LGEuTGF5ZXJNYW5hZ2VyLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7fSxhLkxheWVyTWFuYWdlci5wcm90b3R5cGUubmV3TGF5ZXI9ZnVuY3Rpb24oYil7dmFyIGM9bmV3IGEuTGF5ZXIodGhpcy55Y2NJbnN0YW5jZSxiKTtyZXR1cm4gdGhpcy55Y2NJbnN0YW5jZS5sYXllckxpc3QucHVzaChjKSxjfSxhLkxheWVyTWFuYWdlci5wcm90b3R5cGUuZGVsZXRlTGF5ZXI9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMueWNjSW5zdGFuY2UubGF5ZXJMaXN0LGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdLmlkPT09YS5pZClyZXR1cm4gdGhpcy55Y2NJbnN0YW5jZS5sYXllckxpc3Quc3BsaWNlKGMsMSksYTtyZXR1cm4gYX0sYS5MYXllck1hbmFnZXIucHJvdG90eXBlLmRlbGV0ZUFsbExheWVyPWZ1bmN0aW9uKCl7Zm9yKHZhciBiPTA7Yjx0aGlzLnljY0luc3RhbmNlLmxheWVyTGlzdC5sZW5ndGg7YisrKXt2YXIgYz10aGlzLnljY0luc3RhbmNlLmxheWVyTGlzdFtiXTtjLnJlbW92ZUFsbFVJKCksYS5MYXllci5yZWxlYXNlKGMpLGM9bnVsbH10aGlzLnljY0luc3RhbmNlLmxheWVyTGlzdD1bXX0sYS5MYXllck1hbmFnZXIucHJvdG90eXBlLnJlUmVuZGVyQWxsTGF5ZXJUb1N0YWdlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueWNjSW5zdGFuY2U7aWYoYi50aWNrZXIuY3VycmVudEZyYW1lJiZiLnRpY2tlci5jdXJyZW50RnJhbWUuaXNSZW5kZXJlZClyZXR1cm4gY29uc29sZS5sb2coXCJzdG9wIG92ZXJkcmF3IVwiKTt2YXIgYz1EYXRlLm5vdygpO3RoaXMucmVuZGVyVWlDb3VudD0wLHRoaXMueWNjSW5zdGFuY2UuY2xlYXJTdGFnZSgpO2Zvcih2YXIgZD0wO2Q8dGhpcy55Y2NJbnN0YW5jZS5sYXllckxpc3QubGVuZ3RoO2QrKyl7dmFyIGU9dGhpcy55Y2NJbnN0YW5jZS5sYXllckxpc3RbZF07ZS5zaG93JiYoZS5yZVJlbmRlcihhKSx0aGlzLnJlbmRlclVpQ291bnQrPWUudWlDb3VudFJlbmRlcmVkKX10aGlzLnJlbmRlclRpbWU9RGF0ZS5ub3coKS1jLHRoaXMubWF4UmVuZGVyVGltZT10aGlzLnJlbmRlclRpbWU+dGhpcy5tYXhSZW5kZXJUaW1lP3RoaXMucmVuZGVyVGltZTp0aGlzLm1heFJlbmRlclRpbWUsYi50aWNrZXIuY3VycmVudEZyYW1lJiYoYi50aWNrZXIuY3VycmVudEZyYW1lLmlzUmVuZGVyZWQ9ITApfSxhLkxheWVyTWFuYWdlci5wcm90b3R5cGUuZW5hYmxlRXZlbnRNYW5hZ2VyT25seT1mdW5jdGlvbihhKXtpZighYSlyZXR1cm4hMTtmb3IodmFyIGI9MDtiPHRoaXMueWNjSW5zdGFuY2UubGF5ZXJMaXN0Lmxlbmd0aDtiKyspdGhpcy55Y2NJbnN0YW5jZS5sYXllckxpc3RbYl0uZW5hYmxlRXZlbnRNYW5hZ2VyPSExO3JldHVybiBhLmVuYWJsZUV2ZW50TWFuYWdlcj0hMCx0aGlzfSxhLkxheWVyTWFuYWdlci5wcm90b3R5cGUuZW5hYmxlRXZlbnRNYW5hZ2VyQWxsPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy55Y2NJbnN0YW5jZS5sYXllckxpc3QubGVuZ3RoO2IrKyl0aGlzLnljY0luc3RhbmNlLmxheWVyTGlzdFtiXS5lbmFibGVFdmVudE1hbmFnZXI9YTtyZXR1cm4gdGhpc30sYS5MYXllck1hbmFnZXIucHJvdG90eXBlLnJlbmRlckFsbExheWVyQnlKc29uQXJyYXk9ZnVuY3Rpb24oYil7aWYoIWEudXRpbHMuaXNBcnJheShiKSlyZXR1cm4gY29uc29sZS5lcnJvcihcImpzb25BcnJheSBpcyBub3QgYW4gQXJyYXkhXCIsYik7Zm9yKHZhciBjPXRoaXMsZD0wO2Q8Yi5sZW5ndGg7ZCsrKXt2YXIgZT1iW2RdO2lmKCFhLnV0aWxzLmlzT2JqKGUpKXJldHVybiBjb25zb2xlLmVycm9yKFwiaXRlbSBpbiBqc29uQXJyYXkgc2hvdWxkIGJlIGFuIE9iamVjdCFcIixlKTtmb3IodmFyIGY9Yy5uZXdMYXllcihlLm9wdGlvbiksZz0wO2c8ZS51aS5sZW5ndGg7ZysrKXt2YXIgaD1lLnVpW2ddO2YuYWRkVUkobmV3IGEuVUlbaC50eXBlXShoLm9wdGlvbikpfWYucmVuZGVyKCl9fX0oWWNjKSxmdW5jdGlvbihhKXt2YXIgYj1mdW5jdGlvbihhKXt0aGlzLmltYWdlRGF0YT1hLHRoaXMuY3JlYXRlVGltZT1uZXcgRGF0ZSx0aGlzLmlkPXRoaXMuY3JlYXRlVGltZS5nZXRUaW1lKCl9O2EuUGhvdG9NYW5hZ2VyPWZ1bmN0aW9uKGEpe3RoaXMueWNjSW5zdGFuY2U9YSx0aGlzLmN0eD1hLmN0eCx0aGlzLl9waG90b3M9W119LGEuUGhvdG9NYW5hZ2VyLnByb3RvdHlwZS50YWtlUGhvdG89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGhvdG9zLnB1c2gobmV3IGIodGhpcy5jdHguZ2V0SW1hZ2VEYXRhKDAsMCx0aGlzLnljY0luc3RhbmNlLmdldFN0YWdlV2lkdGgoKSx0aGlzLnljY0luc3RhbmNlLmdldFN0YWdlSGVpZ2h0KCkpKSksdGhpc30sYS5QaG90b01hbmFnZXIucHJvdG90eXBlLmdldEhpc3RvcnlQaG90b3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGhvdG9zfSxhLlBob3RvTWFuYWdlci5wcm90b3R5cGUuc2hvd1Bob3RvPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmN0eC5wdXRJbWFnZURhdGEoYS5pbWFnZURhdGEsMCwwKSxhfSxhLlBob3RvTWFuYWdlci5wcm90b3R5cGUuc2hvd0xhc3RQaG90bz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuX3Bob3Rvcy5sZW5ndGgsYj0hMTtyZXR1cm4gYT49MSYmKGI9dGhpcy5fcGhvdG9zW2EtMV0sdGhpcy5zaG93UGhvdG8oYikpLGJ9LGEuUGhvdG9NYW5hZ2VyLnByb3RvdHlwZS5kZWxQaG90b0J5SWQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuX3Bob3Rvcy5zbGljZSgwKSxjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXS5pZD09PWEpcmV0dXJuIGIuc3BsaWNlKGMrMSwxKSx0aGlzLl9waG90b3M9YixiW2NdO3JldHVybiExfX0oWWNjKSxmdW5jdGlvbihhKXtpZighYXx8IWEudXRpbHMpcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjogWWNjLnVpIG5lZWRzIG1vZHVsZSBgWWNjYCBhbmQgYFljYy51dGlsc2AhXCIpO2EudXRpbHMuaXNPYmosYS51dGlscy5pc0FycmF5LGEudXRpbHMuaXNTdHJpbmcsYS51dGlscy5pc051bSxhLnV0aWxzLmV4dGVuZDthLlVJPWZ1bmN0aW9uKGIpe3RoaXMueWNjQ2xhc3M9YS5VSSx0aGlzLl9waG90b3M9W10sdGhpcy5jdHg9Yi5jdHgsdGhpcy5jdHhXaWR0aD1iLmdldFN0YWdlV2lkdGgoKSx0aGlzLmN0eEhlaWdodD1iLmdldFN0YWdlSGVpZ2h0KCl9LGEuVUkucHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLmN0eC5zYXZlKCksYz90aGlzLmN0eC5maWxsVGV4dChiLGFbMF0sYVsxXSk6dGhpcy5jdHguc3Ryb2tlVGV4dChiLGFbMF0sYVsxXSksdGhpcy5jdHgucmVzdG9yZSgpLHRoaXN9LGEuVUkucHJvdG90eXBlLmxpbmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jdHguc2F2ZSgpLHRoaXMuY3R4LmJlZ2luUGF0aCgpLHRoaXMuY3R4Lm1vdmVUbyhhWzBdLGFbMV0pLHRoaXMuY3R4LmxpbmVUbyhiWzBdLGJbMV0pLHRoaXMuY3R4LnN0cm9rZSgpLHRoaXMuY3R4LmNsb3NlUGF0aCgpLHRoaXMuY3R4LnJlc3RvcmUoKSx0aGlzfSxhLlVJLnByb3RvdHlwZS5yZWN0PWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5jdHguc2F2ZSgpLHRoaXMuY3R4LmJlZ2luUGF0aCgpLHRoaXMuY3R4LnJlY3QoYVswXSxhWzFdLGJbMF0tYVswXSxiWzFdLWFbMV0pLHRoaXMuY3R4LmNsb3NlUGF0aCgpLGM/dGhpcy5jdHguZmlsbCgpOnRoaXMuY3R4LnN0cm9rZSgpLHRoaXMuY3R4LnJlc3RvcmUoKSx0aGlzfSxhLlVJLnByb3RvdHlwZS5lbGxpcHNlPWZ1bmN0aW9uKGEsYixjLGQsZSl7dGhpcy5jdHguc2F2ZSgpO3ZhciBmPWI+Yz9iOmMsZz1iL2YsaD1jL2Y7cmV0dXJuIHRoaXMuY3R4LnRyYW5zbGF0ZShhWzBdLGFbMV0pLHRoaXMuY3R4LnJvdGF0ZShwYXJzZUludChkKSpNYXRoLlBJLzE4MCksdGhpcy5jdHgudHJhbnNsYXRlKC1hWzBdLC1hWzFdKSx0aGlzLmN0eC5zY2FsZShnLGgpLHRoaXMuY3R4LmJlZ2luUGF0aCgpLHRoaXMuY3R4LmFyYyhhWzBdL2csYVsxXS9oLGYsMCwyKk1hdGguUEksITEpLHRoaXMuY3R4LmNsb3NlUGF0aCgpLGU/dGhpcy5jdHguZmlsbCgpOnRoaXMuY3R4LnN0cm9rZSgpLHRoaXMuY3R4LnJlc3RvcmUoKSx0aGlzfSxhLlVJLnByb3RvdHlwZS5jaXJjbGVBcmM9ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gdGhpcy5jdHguc2F2ZSgpLHRoaXMuY3R4LmJlZ2luUGF0aCgpLHRoaXMuY3R4LmFyYyhhWzBdLGFbMV0sYixjLzE4MCpNYXRoLlBJLGQvMTgwKk1hdGguUEksZSksdGhpcy5jdHguc3Ryb2tlKCksdGhpcy5jdHguY2xvc2VQYXRoKCksdGhpcy5jdHgucmVzdG9yZSgpLHRoaXN9LGEuVUkucHJvdG90eXBlLnNlY3Rvcj1mdW5jdGlvbihhLGIsYyxkLGUsZil7cmV0dXJuIHRoaXMuY3R4LnNhdmUoKSx0aGlzLmN0eC5iZWdpblBhdGgoKSx0aGlzLmN0eC5saW5lVG8oYVswXSxhWzFdKSx0aGlzLmN0eC5hcmMoYVswXSxhWzFdLGIsYypNYXRoLlBJLzE4MCxkKk1hdGguUEkvMTgwLGYpLHRoaXMuY3R4LmxpbmVUbyhhWzBdLGFbMV0pLHRoaXMuY3R4LmNsb3NlUGF0aCgpLGU/dGhpcy5jdHguZmlsbCgpOnRoaXMuY3R4LnN0cm9rZSgpLHRoaXMuY3R4LnJlc3RvcmUoKSx0aGlzfSxhLlVJLnByb3RvdHlwZS5mb2xkTGluZT1mdW5jdGlvbihhKXtpZihhLmxlbmd0aDwyKXJldHVybiBjb25zb2xlLmVycm9yKFwiRXJyb3I6IOWPguaVsOmUmeivr++8gVwiKTt0aGlzLmN0eC5zYXZlKCksdGhpcy5jdHguYmVnaW5QYXRoKCksdGhpcy5jdHgubW92ZVRvKGFbMF1bMF0sYVswXVsxXSk7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspdGhpcy5jdHgubGluZVRvKGFbYl1bMF0sYVtiXVsxXSk7cmV0dXJuIHRoaXMuY3R4LnN0cm9rZSgpLHRoaXMuY3R4LnJlc3RvcmUoKSx0aGlzfSxhLlVJLnByb3RvdHlwZS5jaXJjbGU9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLmVsbGlwc2UoYSxiLGIsMCxjKSx0aGlzfSxhLlVJLnByb3RvdHlwZS5pbWFnZT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7cmV0dXJuIGI9Ynx8WzAsMF0sYy5jdHguc2F2ZSgpLGMuY3R4LmJlZ2luUGF0aCgpLGMuY3R4LmRyYXdJbWFnZShhLGJbMF0sYlsxXSksYy5jdHguY2xvc2VQYXRoKCksYy5jdHgucmVzdG9yZSgpLHRoaXN9LGEuVUkucHJvdG90eXBlLl9nZXRNYXhMZW5Db250ZW50PWZ1bmN0aW9uKGEsYil7dmFyIGM9YSxkPTA7aWYodGhpcy5jdHgubWVhc3VyZVRleHQoYSkud2lkdGg8PWIpcmV0dXJuIGE7Zm9yKHZhciBlPTA7ZTxhLmxlbmd0aDtlKyspaWYoYz1hLnNsaWNlKDAsZSksZD10aGlzLmN0eC5tZWFzdXJlVGV4dChjKS53aWR0aCxkPmIpcmV0dXJuIGEuc2xpY2UoMCxlLTEpfSxhLlVJLnByb3RvdHlwZS5zY2FsZT1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmN0eC5zY2FsZShhLGIpLHRoaXN9LGEuVUkucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dmFyIGE9e2ZpbGxTdHlsZTpcIiNmZmZcIn07cmV0dXJuIHRoaXMuY3R4LmZpbGxTdHlsZT1hLmZpbGxTdHlsZSx0aGlzLmN0eC5zYXZlKCksdGhpcy5jdHguYmVnaW5QYXRoKCksdGhpcy5jdHgucmVjdCgwLDAsdGhpcy5jdHhXaWR0aCx0aGlzLmN0eEhlaWdodCksdGhpcy5jdHguZmlsbCgpLHRoaXMuY3R4LmNsb3NlUGF0aCgpLHRoaXMuY3R4LnJlc3RvcmUoKSx0aGlzfX0oWWNjKSxmdW5jdGlvbihhKXt2YXIgYj0wLGM9MTthLlVJLkJhc2U9ZnVuY3Rpb24oYyl7YS5MaXN0ZW5lci5jYWxsKHRoaXMpLGEuVHJlZS5jYWxsKHRoaXMpLHRoaXMueWNjQ2xhc3M9YS5VSS5CYXNlLHRoaXMuaWQ9YisrLHRoaXMubmFtZT1cIlwiLHRoaXMuY3R4PW51bGwsdGhpcy5jdHhDYWNoZT1udWxsLHRoaXMuZHBpPTEsdGhpcy5yZWN0PW5ldyBhLk1hdGguUmVjdCx0aGlzLng9MCx0aGlzLnk9MCx0aGlzLmFuY2hvclg9MCx0aGlzLmFuY2hvclk9MCx0aGlzLnJvdGF0aW9uPTAsdGhpcy5yZWN0QmdDb2xvcj1cInJnYmEoMCwwLDAsMClcIix0aGlzLnJlY3RCb3JkZXJXaWR0aD0wLHRoaXMucmVjdEJvcmRlckNvbG9yPVwiIzAwMFwiLHRoaXMuc2hvdz0hMCx0aGlzLmdob3N0PSExLHRoaXMuc3RvcEV2ZW50QnViYmxlVXA9ITAsdGhpcy5vcGFjaXR5PTEsdGhpcy5saW5lV2lkdGg9MSx0aGlzLmZpbGxTdHlsZT1cImJsYWNrXCIsdGhpcy5zdHJva2VTdHlsZT1cImJsYWNrXCIsdGhpcy5iZWxvbmdUbz1udWxsLHRoaXMudXNlckRhdGE9bnVsbCx0aGlzLmlzU2hvd1JvdGF0ZUJlZm9yZVVJPSExLHRoaXMuYmFzZVVJPW51bGwsdGhpcy5fYmVmb3JlSW5pdD1udWxsLHRoaXMuX2FmdGVySW5pdD1udWxsLHRoaXMuX29uQWRkZWQ9bnVsbCx0aGlzLl9vbkNoaWxkcmVuUmVuZGVyZWQ9bnVsbCx0aGlzLm9uY29tcHV0ZXN0YXJ0PW51bGwsdGhpcy5vbmNvbXB1dGVlbmQ9bnVsbCx0aGlzLm9ucmVuZGVyc3RhcnQ9bnVsbCx0aGlzLm9ucmVuZGVyZW5kPW51bGwsdGhpcy5leHRlbmQoYyl9LGEudXRpbHMubWVyZ2VPYmplY3QoYS5VSS5CYXNlLnByb3RvdHlwZSxhLkxpc3RlbmVyLnByb3RvdHlwZSksYS51dGlscy5tZXJnZU9iamVjdChhLlVJLkJhc2UucHJvdG90eXBlLGEuVHJlZS5wcm90b3R5cGUpLGEuVUkuQmFzZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihiKXthLnV0aWxzLmlzRm4odGhpcy5fYmVmb3JlSW5pdCkmJnRoaXMuX2JlZm9yZUluaXQoKSx0aGlzLmJlbG9uZ1RvPWIsdGhpcy5jdHg9Yi5jdHgsdGhpcy5jdHhDYWNoZT10aGlzLmJlbG9uZ1RvLmN0eENhY2hlLHRoaXMuZHBpPXRoaXMuYmVsb25nVG8ueWNjSW5zdGFuY2UuZ2V0U3lzdGVtSW5mbygpLmRldmljZVBpeGVsUmF0aW8sYS51dGlscy5pc0ZuKHRoaXMuX2FmdGVySW5pdCkmJnRoaXMuX2FmdGVySW5pdCgpfSxhLlVJLkJhc2UucHJvdG90eXBlLmNvbXB1dGVVSVByb3BzPWZ1bmN0aW9uKCl7fSxhLlVJLkJhc2UucHJvdG90eXBlLnJlbmRlclJlY3RCZ0NvbG9yPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRBYnNvbHV0ZVBvc2l0aW9uUG9seWdvbigpO2lmKCFifHwwPT09Yi5sZW5ndGgpcmV0dXJuIGNvbnNvbGUubG9nKG5ldyBhLkRlYnVnZ2VyLkxvZyhcIm5vIHBvbHlnb24gY29vcmRpcmF0ZXMhXCIpLm1lc3NhZ2UpO3ZhciBjPXRoaXMuY3R4Q2FjaGU7Yy5zYXZlKCksYy5maWxsU3R5bGU9dGhpcy5yZWN0QmdDb2xvcixjLmJlZ2luUGF0aCgpLGMubW92ZVRvKGJbMF0ueCp0aGlzLmRwaSxiWzBdLnkqdGhpcy5kcGkpO2Zvcih2YXIgZD0xO2Q8Yi5sZW5ndGgtMTtkKyspYy5saW5lVG8oYltkXS54KnRoaXMuZHBpLGJbZF0ueSp0aGlzLmRwaSk7Yy5jbG9zZVBhdGgoKSxjLmZpbGwoKSxjLnJlc3RvcmUoKX0sYS5VSS5CYXNlLnByb3RvdHlwZS5yZW5kZXJSZWN0Qm9yZGVyPWZ1bmN0aW9uKCl7aWYoISh0aGlzLnJlY3RCb3JkZXJXaWR0aDw9MCkpe3ZhciBiPXRoaXMuZ2V0QWJzb2x1dGVQb3NpdGlvblBvbHlnb24oKTtpZighYnx8MD09PWIubGVuZ3RoKXJldHVybiBjb25zb2xlLmxvZyhuZXcgYS5EZWJ1Z2dlci5Mb2coXCJubyBwb2x5Z29uIGNvb3JkaXJhdGVzIVwiKS5tZXNzYWdlKTt2YXIgYz10aGlzLmN0eENhY2hlO2Muc2F2ZSgpLGMuc2V0TGluZURhc2gmJmMuc2V0TGluZURhc2goWzBdKSxjLnN0cm9rZVN0eWxlPXRoaXMucmVjdEJvcmRlckNvbG9yLGMubGluZVdpZHRoPXRoaXMucmVjdEJvcmRlcldpZHRoLGMuYmVnaW5QYXRoKCksYy5tb3ZlVG8oYlswXS54KnRoaXMuZHBpLGJbMF0ueSp0aGlzLmRwaSk7Zm9yKHZhciBkPTE7ZDxiLmxlbmd0aC0xO2QrKyljLmxpbmVUbyhiW2RdLngqdGhpcy5kcGksYltkXS55KnRoaXMuZHBpKTtjLmNsb3NlUGF0aCgpLGMuc3Ryb2tlKCksYy5yZXN0b3JlKCl9fSxhLlVJLkJhc2UucHJvdG90eXBlLnJlbmRlckRhc2hCZWZvcmVVST1mdW5jdGlvbihhKXt9LGEuVUkuQmFzZS5wcm90b3R5cGUucmVtb3ZlU2VsZj1mdW5jdGlvbigpe3RoaXMuYmVsb25nVG8ucmVtb3ZlVUkodGhpcyl9LGEuVUkuQmFzZS5wcm90b3R5cGUuYWRkQ2hpbGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYmVsb25nVG8mJmEuaW5pdCh0aGlzLmJlbG9uZ1RvKSx0aGlzLmFkZENoaWxkVHJlZShhKSxhfSxhLlVJLkJhc2UucHJvdG90eXBlLnJlbW92ZUNoaWxkPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnJlbW92ZUNoaWxkVHJlZShiKSxhLlVJLnJlbGVhc2UoYiksdGhpc30sYS5VSS5CYXNlLnByb3RvdHlwZS5zY2FsZUFuZFJvdGF0ZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0QWJzb2x1dGVQb3NpdGlvblJlY3QoKTt0aGlzLmN0eC50cmFuc2xhdGUodGhpcy5hbmNob3JYK2EueCx0aGlzLmFuY2hvclkrYS55KSx0aGlzLmN0eC5yb3RhdGUodGhpcy5yb3RhdGlvbipNYXRoLlBJLzE4MCksdGhpcy5jdHgudHJhbnNsYXRlKC10aGlzLmFuY2hvclgtYS54LC10aGlzLmFuY2hvclktYS55KX0sYS5VSS5CYXNlLnByb3RvdHlwZS5pc091dE9mU3RhZ2U9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJlbG9uZ1RvLnljY0luc3RhbmNlLmdldFN0YWdlV2lkdGgoKSxiPXRoaXMuYmVsb25nVG8ueWNjSW5zdGFuY2UuZ2V0U3RhZ2VIZWlnaHQoKSxjPXRoaXMuZ2V0QWJzb2x1dGVQb3NpdGlvblJlY3QoKTtyZXR1cm4gYy54PmF8fGMueCtjLndpZHRoPDB8fGMueT5ifHxjLnkrYy5oZWlnaHQ8MH0sYS5VSS5CYXNlLnByb3RvdHlwZS5pc091dE9mUmVjdD1mdW5jdGlvbihhKXt2YXIgYj1hLngsYz1hLnksZD1hLndpZHRoLGU9YS5oZWlnaHQsZj10aGlzLmdldEFic29sdXRlUG9zaXRpb25SZWN0KCk7cmV0dXJuIGYueD5kfHxmLngrZi53aWR0aDxifHxmLnk+ZXx8Zi55K2YuaGVpZ2h0PGN9LGEuVUkucmVsZWFzZT1mdW5jdGlvbihiKXtiLml0b3IoKS5sZWZ0Q2hpbGRGaXJzdChmdW5jdGlvbihiKXtiLnljY0NsYXNzIT09YS5VSS5JbWFnZSYmYi55Y2NDbGFzcyE9PWEuVUkuSW1hZ2VGcmFtZUFuaW1hdGlvbnx8KGIucmVzPW51bGwpLGEuVHJlZS5yZWxlYXNlKGIpLGEuTGlzdGVuZXIucmVsZWFzZShiKSxiLnljY0luc3RhbmNlPW51bGwsYi55Y2NDbGFzcz1udWxsLGIuY3R4PW51bGwsYi5iZWxvbmdUbz1udWxsLGIudXNlckRhdGE9bnVsbCxiLmJhc2VVST1udWxsLGIuX2JlZm9yZUluaXQ9bnVsbCxiLl9hZnRlckluaXQ9bnVsbCxiLm9uY29tcHV0ZXN0YXJ0PW51bGwsYi5vbmNvbXB1dGVlbmQ9bnVsbCxiLm9ucmVuZGVyc3RhcnQ9bnVsbCxiLm9ucmVuZGVyZW5kPW51bGx9KX0sYS5VSS5CYXNlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt9LGEuVUkuQmFzZS5wcm90b3R5cGUuX3JlbmRlckNvbnRhaW5lcj1mdW5jdGlvbihhKXt2YXIgYj1hLGM9dGhpcy5jdHhDYWNoZTtjLnNhdmUoKSxjLmJlZ2luUGF0aCgpLGMuc3Ryb2tlU3R5bGU9XCIjZmYwMDAwXCIsYy5yZWN0KGIueCp0aGlzLmRwaSxiLnkqdGhpcy5kcGksYi53aWR0aCp0aGlzLmRwaSxiLmhlaWdodCp0aGlzLmRwaSksYy5jbG9zZVBhdGgoKSxjLnN0cm9rZSgpLGMucmVzdG9yZSgpLGI9bnVsbH0sYS5VSS5CYXNlLnByb3RvdHlwZS5fX3JlbmRlcj1mdW5jdGlvbigpe3RoaXMudHJpZ2dlckxpc3RlbmVyKFwiY29tcHV0ZXN0YXJ0XCIsbmV3IGEuRXZlbnQoXCJjb21wdXRlc3RhcnRcIikpO3ZhciBiPXRoaXMuY29tcHV0ZVVJUHJvcHMoKTtpZih0aGlzLnRyaWdnZXJMaXN0ZW5lcihcImNvbXB1dGVlbmRcIixuZXcgYS5FdmVudChcImNvbXB1dGVlbmRcIikpLGIpcmV0dXJuIGI7aWYoIXRoaXMuYmVsb25nVG8udXNlQ2FjaGUmJnRoaXMuaXNPdXRPZlN0YWdlKCkpcmV0dXJue21lc3NhZ2U6XCJVSei2heWHuuiInuWPsO+8gVwifTtpZih0aGlzLmJlbG9uZ1RvLnVzZUNhY2hlJiZ0aGlzLmlzT3V0T2ZSZWN0KG5ldyBhLk1hdGguUmVjdCgwLDAsdGhpcy5jdHhDYWNoZS5jYW52YXMud2lkdGgqdGhpcy5kcGksdGhpcy5jdHhDYWNoZS5jYW52YXMuaGVpZ2h0KnRoaXMuZHBpKSkpcmV0dXJue21lc3NhZ2U6XCJVSei2heWHuuemu+Wxj0NhbnZhc++8gVwifTt0aGlzLl9wcm9jZXNzQmVmb3JlUmVuZGVyKCk7dmFyIGM9dGhpcy5nZXRBYnNvbHV0ZVBvc2l0aW9uUmVjdCgpO3RoaXMucmVuZGVyUmVjdEJnQ29sb3IoYyksdGhpcy5yZW5kZXJSZWN0Qm9yZGVyKGMpLHRoaXMucmVuZGVyRGFzaEJlZm9yZVVJKHRoaXMuY3R4Q2FjaGUpLHRoaXMuYmVsb25nVG8ueWNjSW5zdGFuY2UuY29uZmlnLmRlYnVnRHJhd0NvbnRhaW5lciYmdGhpcy5fcmVuZGVyQ29udGFpbmVyKGMpLHRoaXMucmVuZGVyKCksdGhpcy5fcHJvY2Vzc0FmdGVyUmVuZGVyKCl9LGEuVUkuQmFzZS5wcm90b3R5cGUuX3Byb2Nlc3NCZWZvcmVSZW5kZXI9ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXJMaXN0ZW5lcihcInJlbmRlcnN0YXJ0XCIsbmV3IGEuRXZlbnQoXCJyZW5kZXJzdGFydFwiKSksYz10aGlzLmN0eC5nbG9iYWxBbHBoYSx0aGlzLmN0eC5nbG9iYWxBbHBoYT10aGlzLm9wYWNpdHl9LGEuVUkuQmFzZS5wcm90b3R5cGUuX3Byb2Nlc3NBZnRlclJlbmRlcj1mdW5jdGlvbigpe3RoaXMuY3R4Lmdsb2JhbEFscGhhPWMsdGhpcy50cmlnZ2VyTGlzdGVuZXIoXCJyZW5kZXJlbmRcIixuZXcgYS5FdmVudChcInJlbmRlcmVuZFwiKSl9LGEuVUkuQmFzZS5wcm90b3R5cGUuZ2V0TWF4Q29udGVudEluV2lkdGg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLGQ9MCxlPXRoaXMuY3R4Q2FjaGU7aWYoZS5tZWFzdXJlVGV4dChhKS53aWR0aDw9YilyZXR1cm4gYTtmb3IodmFyIGY9MDtmPGEubGVuZ3RoO2YrKylpZihjPWEuc2xpY2UoMCxmKzEpLGQ9ZS5tZWFzdXJlVGV4dChjKS53aWR0aCxkPmIpcmV0dXJuIGEuc2xpY2UoMCxmKX0sYS5VSS5CYXNlLnByb3RvdHlwZS5leHRlbmQ9ZnVuY3Rpb24oYSl7YT1hfHx7fTtmb3IodmFyIGIgaW4gdGhpcylcInVuZGVmaW5lZFwiIT10eXBlb2YgYVtiXSYmKHRoaXNbYl09YVtiXSk7cmV0dXJuIHRoaXN9LGEuVUkuQmFzZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgdGhpcy55Y2NDbGFzcztyZXR1cm4gYS5leHRlbmQodGhpcyksYX0sYS5VSS5CYXNlLnByb3RvdHlwZS5nZXRBYnNvbHV0ZVBvc2l0aW9uUG9seWdvbj1mdW5jdGlvbigpe30sYS5VSS5CYXNlLnByb3RvdHlwZS5nZXRBYnNvbHV0ZVBvc2l0aW9uUmVjdD1mdW5jdGlvbigpe3ZhciBiPXRoaXMuZ2V0QWJzb2x1dGVQb3NpdGlvbigpO3JldHVybiBuZXcgYS5NYXRoLlJlY3QoYi54LGIueSx0aGlzLnJlY3Qud2lkdGgsdGhpcy5yZWN0LmhlaWdodCl9LGEuVUkuQmFzZS5wcm90b3R5cGUuZ2V0QWJzb2x1dGVQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBiPW5ldyBhLk1hdGguUmVjdCxjPXRoaXMuZ2V0UGFyZW50KCk7aWYoYi53aWR0aD10aGlzLnJlY3Qud2lkdGgsYi5oZWlnaHQ9dGhpcy5yZWN0LmhlaWdodCxjKXt2YXIgZD1jLmdldEFic29sdXRlUG9zaXRpb24oKTtiLng9dGhpcy5yZWN0LngrZC54LGIueT10aGlzLnJlY3QueStkLnl9ZWxzZSBiLng9dGhpcy5yZWN0LngrdGhpcy5iZWxvbmdUby54LGIueT10aGlzLnJlY3QueSt0aGlzLmJlbG9uZ1RvLnk7cmV0dXJuIGJ9LGEuVUkuQmFzZS5wcm90b3R5cGUudHJhbnNmb3JtVG9BYnNvbHV0ZT1mdW5jdGlvbihiKXt2YXIgYz10aGlzO2lmKGEudXRpbHMuaXNBcnJheShiKSlyZXR1cm4gYi5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGMudHJhbnNmb3JtVG9BYnNvbHV0ZShhKX0pO3ZhciBkPXRoaXMuZ2V0UGFyZW50KCk7aWYoZCl7dmFyIGU9ZC5nZXRBYnNvbHV0ZVBvc2l0aW9uKCk7cmV0dXJuIG5ldyBhLk1hdGguRG90KGIueCtlLngsYi55K2UueSl9cmV0dXJuIG5ldyBhLk1hdGguRG90KGIueCt0aGlzLmJlbG9uZ1RvLngsYi55K3RoaXMuYmVsb25nVG8ueSl9LGEuVUkuQmFzZS5wcm90b3R5cGUudHJhbnNmb3JtVG9Mb2NhbD1mdW5jdGlvbihiKXt2YXIgYz1udWxsLGQ9dGhpcy5nZXRBYnNvbHV0ZVBvc2l0aW9uKCk7aWYoYS51dGlscy5pc0FycmF5KGIpKXtjPVtdO2Zvcih2YXIgZT0wO2U8Yi5sZW5ndGg7ZSsrKXt2YXIgZj1uZXcgYS5NYXRoLkRvdCgwLDApLGc9YltlXTtmLng9Zy54LWQueCt0aGlzLngsZi55PWcueS1kLnkrdGhpcy55LGMucHVzaChmKX1yZXR1cm4gY31yZXR1cm4gYz1uZXcgYS5NYXRoLkRvdCgwLDApLGMueD1iLngtZC54K3RoaXMueCxjLnk9Yi55LWQueSt0aGlzLnksY30sYS5VSS5CYXNlLnByb3RvdHlwZS5jb250YWluRG90PWZ1bmN0aW9uKGEpe3JldHVybiBhLmlzSW5SZWN0KHRoaXMuZ2V0QWJzb2x1dGVQb3NpdGlvbigpKX0sYS5VSS5CYXNlLnByb3RvdHlwZS5nZXREZWVwTGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQYXJlbnRMaXN0KCkubGVuZ3RoKzF9LGEuVUkuQmFzZS5wcm90b3R5cGUudHJhbnNmb3JtQnlSb3RhdGU9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcztpZihhLnV0aWxzLmlzQXJyYXkoYikpcmV0dXJuIGIubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBjLnRyYW5zZm9ybUJ5Um90YXRlKGEpfSk7dmFyIGQ9bmV3IGEuTWF0aC5Eb3QsZT0odGhpcy5nZXRBYnNvbHV0ZVBvc2l0aW9uKCksYi54KSxmPWIueSxnPShlLXRoaXMuYW5jaG9yWCkqTWF0aC5jb3ModGhpcy5yb3RhdGlvbi8xODAqTWF0aC5QSSktKGYtdGhpcy5hbmNob3JZKSpNYXRoLnNpbih0aGlzLnJvdGF0aW9uLzE4MCpNYXRoLlBJKSt0aGlzLmFuY2hvclgsaD0oZi10aGlzLmFuY2hvclkpKk1hdGguY29zKHRoaXMucm90YXRpb24vMTgwKk1hdGguUEkpKyhlLXRoaXMuYW5jaG9yWCkqTWF0aC5zaW4odGhpcy5yb3RhdGlvbi8xODAqTWF0aC5QSSkrdGhpcy5hbmNob3JZO3JldHVybiBkPXRoaXMudHJhbnNmb3JtVG9BYnNvbHV0ZSh7eDpnLHk6aH0pfSxhLlVJLkJhc2UucHJvdG90eXBlLl9zZXRDdHhQcm9wcz1mdW5jdGlvbihiLGMpe3ZhciBkPXRoaXM7Yz1jfHxkLmN0eENhY2hlO3ZhciBlPXtmb250U3R5bGU6XCJub3JtYWxcIixmb250VmFyaWFudDpcIm5vcm1hbFwiLGZvbnRXZWlnaHQ6XCJub3JtYWxcIixmb250U2l6ZTpcIjE2cHhcIixmb250RmFtaWx5Olwi5b6u6L2v6ZuF6buRXCIsZm9udDpcIjE2cHgg5b6u6L2v6ZuF6buRXCIsdGV4dEJhc2VsaW5lOlwiaGFuZ2luZ1wiLGZpbGxTdHlsZTpcInJlZFwiLHN0cm9rZVN0eWxlOlwiYmx1ZVwifTtlPWEudXRpbHMuZXh0ZW5kKGUsYiksZS5mb250U2l6ZT1wYXJzZUludChlLmZvbnRTaXplKSp0aGlzLmRwaStcInB4XCIsZS5mb250PVtlLmZvbnRTdHlsZSxlLmZvbnRWYXJpYW50LGUuZm9udFdlaWdodCxlLmZvbnRTaXplLGUuZm9udEZhbWlseV0uam9pbihcIiBcIik7Zm9yKHZhciBmIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShmKSYmKGNbZl09ZVtmXSl9LGEuVUkuQmFzZS5wcm90b3R5cGUudHJpZ2dlclVJRXZlbnRCdWJibGVVcD1mdW5jdGlvbihiLGMsZCxlKXt2YXIgZj10aGlzLGc9W107aWYoZiYmZi5iZWxvbmdUbyYmZi5iZWxvbmdUby5lbmFibGVFdmVudE1hbmFnZXIpe2lmKGYudHJpZ2dlckxpc3RlbmVyKGIsbmV3IGEuRXZlbnQoe3g6Yyx5OmQsdHlwZTpiLHRhcmdldDpmLG9yaWdpbkV2ZW50OmV9KSksZi5zdG9wRXZlbnRCdWJibGVVcClyZXR1cm47Zm9yKHZhciBoPWYuZ2V0UGFyZW50TGlzdCgpLnJldmVyc2UoKSxpPTA7aTxoLmxlbmd0aDtpKyspe3ZhciBqPWhbaV07aWYoai50cmlnZ2VyTGlzdGVuZXIoYixuZXcgYS5FdmVudCh7eDpjLHk6ZCx0eXBlOmIsdGFyZ2V0Omosb3JpZ2luRXZlbnQ6ZX0pKSxnLnB1c2goaiksai5zdG9wRXZlbnRCdWJibGVVcClicmVha319cmV0dXJuIGd9fShZY2MpLGZ1bmN0aW9uKGEpe2EuVUkuUG9seWdvbj1mdW5jdGlvbihiKXtiPWJ8fHt9LGEuVUkuQmFzZS5jYWxsKHRoaXMsYiksdGhpcy55Y2NDbGFzcz1hLlVJLlBvbHlnb24sdGhpcy54PTAsdGhpcy55PTAsdGhpcy5maWxsPSEwLHRoaXMuZmlsbFN0eWxlPVwiYmx1ZVwiLHRoaXMubm9uZVplcm9Nb2RlPTEsdGhpcy5pc0RyYXdJbmRleD0hMSx0aGlzLmNvb3JkaW5hdGVzPWIuY29vcmRpbmF0ZXN8fFtdLHRoaXMuZXh0ZW5kKGIpfSxhLnV0aWxzLm1lcmdlT2JqZWN0KGEuVUkuUG9seWdvbi5wcm90b3R5cGUsYS5VSS5CYXNlLnByb3RvdHlwZSksYS5VSS5Qb2x5Z29uLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hLlVJLlBvbHlnb24sYS5VSS5Qb2x5Z29uLnByb3RvdHlwZS5jb21wdXRlVUlQcm9wcz1mdW5jdGlvbigpe3RoaXMuY29vcmRpbmF0ZXNbMF0mJih0aGlzLng9dGhpcy5jb29yZGluYXRlc1swXS54LHRoaXMueT10aGlzLmNvb3JkaW5hdGVzWzBdLnkpfSxhLlVJLlBvbHlnb24ucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3JldHVybiBhPWF8fGIuY3R4Q2FjaGUsYi5jdHg/KGEuc2F2ZSgpLGEuZmlsbFN0eWxlPXRoaXMuZmlsbFN0eWxlLGEuc3Ryb2tlU3R5bGU9dGhpcy5zdHJva2VTdHlsZSx0aGlzLnJlbmRlclBhdGgoYSksdGhpcy5maWxsP2EuZmlsbCgpOmEuc3Ryb2tlKCksdm9pZCBhLnJlc3RvcmUoKSk6dm9pZCBjb25zb2xlLmVycm9yKFwiW1ljYyBlcnJvcl06XCIsXCJjdHggaXMgbnVsbCAhXCIpfSxhLlVJLlBvbHlnb24ucHJvdG90eXBlLnJlbmRlclBhdGg9ZnVuY3Rpb24oKXtpZigwIT09dGhpcy5jb29yZGluYXRlcy5sZW5ndGgpe3ZhciBhPXRoaXMuY3R4Q2FjaGUsYj10aGlzLnRyYW5zZm9ybUJ5Um90YXRlKHRoaXMuY29vcmRpbmF0ZXNbMF0pO2EuYmVnaW5QYXRoKCksYS5tb3ZlVG8oYi54KnRoaXMuZHBpLGIueSp0aGlzLmRwaSk7Zm9yKHZhciBjPTA7Yzx0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aC0xO2MrKyl7dmFyIGQ9dGhpcy50cmFuc2Zvcm1CeVJvdGF0ZSh0aGlzLmNvb3JkaW5hdGVzW2NdKTt0aGlzLmlzRHJhd0luZGV4JiZhLmZpbGxUZXh0KGMrXCJcIixkLngtMTAsZC55KzEwKSxhLmxpbmVUbyhkLngqdGhpcy5kcGksZC55KnRoaXMuZHBpKX1hLmNsb3NlUGF0aCgpfX0sYS5VSS5Qb2x5Z29uLnByb3RvdHlwZS5nZXRBYnNvbHV0ZVBvc2l0aW9uUG9seWdvbj1mdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIHRoaXMuY29vcmRpbmF0ZXMubWFwKGZ1bmN0aW9uKGIpe3JldHVybiBhLnRyYW5zZm9ybUJ5Um90YXRlKGIpfSl9LGEuVUkuUG9seWdvbi5wcm90b3R5cGUuZ2V0QWJzb2x1dGVQb3NpdGlvbj1mdW5jdGlvbihiKXtiPWJ8fG5ldyBhLk1hdGguRG90KHRoaXMueCx0aGlzLnkpO3ZhciBjPXRoaXMuZ2V0UGFyZW50KCk7aWYoYyl7dmFyIGQ9Yy5nZXRBYnNvbHV0ZVBvc2l0aW9uKCk7Yi54Kz1kLngsYi55Kz1kLnl9ZWxzZSBiLng9dGhpcy54K3RoaXMuYmVsb25nVG8ueCxiLnk9dGhpcy55K3RoaXMuYmVsb25nVG8ueTtyZXR1cm4gYn0sYS5VSS5Qb2x5Z29uLnByb3RvdHlwZS5nZXRBYnNvbHV0ZVBvc2l0aW9uUmVjdD1mdW5jdGlvbigpe2lmKCF0aGlzLmNvb3JkaW5hdGVzWzBdKXJldHVybiBjb25zb2xlLmxvZyhuZXcgYS5EZWJ1Z2dlci5FcnJvcihcIm5lZWQgY29tcHV0ZSBwcm9wIGNvb3JkaW5hdGVzXCIpLm1lc3NhZ2UpO2Zvcih2YXIgYj10aGlzLmNvb3JkaW5hdGVzWzBdLGM9Yi54LGQ9Yi55LGU9Yi54LGY9Yi55LGc9MDtnPHRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoLTE7ZysrKXt2YXIgaD10aGlzLmNvb3JkaW5hdGVzW2ddO2gueDxjJiYoYz1oLngpLGgueD49ZSYmKGU9aC54KSxoLnk8ZCYmKGQ9aC55KSxoLnk+PWYmJihmPWgueSl9dmFyIGk9dGhpcy50cmFuc2Zvcm1Ub0Fic29sdXRlKHt4OmMseTpkfSk7cmV0dXJuIG5ldyBhLk1hdGguUmVjdChpLngsaS55LGUtYyxmLWQpfSxhLlVJLlBvbHlnb24ucHJvdG90eXBlLnJlbmRlckRhc2hCZWZvcmVVST1mdW5jdGlvbihiKXtpZih0aGlzLmlzU2hvd1JvdGF0ZUJlZm9yZVVJJiYwIT09dGhpcy5jb29yZGluYXRlcy5sZW5ndGgpe3ZhciBjPXRoaXM7Yj1ifHxjLmN0eDt2YXIgZD10aGlzLmdldFBhcmVudCgpLGU9ZD9kLmdldEFic29sdXRlUG9zaXRpb24oKTpuZXcgYS5NYXRoLkRvdCxmPW5ldyBhLk1hdGguRG90KHRoaXMuY29vcmRpbmF0ZXNbMF0ueCtlLngsdGhpcy5jb29yZGluYXRlc1swXS55K2UueSk7Yi5zYXZlKCksYi5zZXRMaW5lRGFzaCYmYi5zZXRMaW5lRGFzaChbMTBdKSxiLmJlZ2luUGF0aCgpLGIubW92ZVRvKGYueCp0aGlzLmRwaSxmLnkqdGhpcy5kcGkpO2Zvcih2YXIgZz0wO2c8Yy5jb29yZGluYXRlcy5sZW5ndGgtMTtnKyspe3ZhciBoPWMuY29vcmRpbmF0ZXNbZ107Yi5saW5lVG8oaC54KnRoaXMuZHBpK2UueCp0aGlzLmRwaSxoLnkqdGhpcy5kcGkrZS55KnRoaXMuZHBpKX1iLmNsb3NlUGF0aCgpLGIuc3Ryb2tlU3R5bGU9dGhpcy5zdHJva2VTdHlsZSxiLnN0cm9rZSgpLGIucmVzdG9yZSgpfX0sYS5VSS5Qb2x5Z29uLnByb3RvdHlwZS5jb250YWluRG90PWZ1bmN0aW9uKGEsYil7Yj1ifHx0aGlzLm5vbmVaZXJvTW9kZTtmb3IodmFyIGM9YSxkPWMueCxlPWMueSxmPTAsZz0wLGg9MCxpPTA7aTx0aGlzLmNvb3JkaW5hdGVzLmxlbmd0aC0xO2krKyl7dmFyIGo9dGhpcy50cmFuc2Zvcm1CeVJvdGF0ZSh0aGlzLmNvb3JkaW5hdGVzW2ldKSxrPXRoaXMudHJhbnNmb3JtQnlSb3RhdGUodGhpcy5jb29yZGluYXRlc1tpKzFdKTtpZihqLnghPT1rLngpe3ZhciBsPShrLnktai55KS8oay54LWoueCksbT0oZS1qLnkpL2wrai54O2Q+bXx8KGsueD5qLngmJm0+PWoueCYmbTw9ay54JiYoZisrLGw+PTA/ZysrOmgrKyksay54PGoueCYmbT49ay54JiZtPD1qLngmJihmKyssbD49MD9oKys6ZysrKSl9ZWxzZXtpZihkPmoueCljb250aW51ZTtrLnk+ai55JiZlPj1qLnkmJmU8PWsueSYmKGcrKyxmKyspLGsueTxqLnkmJmU+PWsueSYmZTw9ai55JiYoaCsrLGYrKyl9fXJldHVybiAxPT09Yj9nLWghPT0wOmYlMj09PTF9fShZY2MpLGZ1bmN0aW9uKGEpe2EuVUkuRWxsaXBzZT1mdW5jdGlvbihiKXthLlVJLlBvbHlnb24uY2FsbCh0aGlzLGIpLHRoaXMueWNjQ2xhc3M9YS5VSS5FbGxpcHNlLHRoaXMucG9pbnQ9bmV3IGEuTWF0aC5Eb3QsdGhpcy53aWR0aD0yMCx0aGlzLmhlaWdodD0xMCx0aGlzLmFuZ2xlPTAsdGhpcy5jb2xvcj1cImJsYWNrXCIsdGhpcy5maWxsPSExLHRoaXMuZXh0ZW5kKGIpfSxhLnV0aWxzLm1lcmdlT2JqZWN0KGEuVUkuRWxsaXBzZS5wcm90b3R5cGUsYS5VSS5Qb2x5Z29uLnByb3RvdHlwZSksYS5VSS5FbGxpcHNlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hLlVJLkVsbGlwc2UsYS5VSS5FbGxpcHNlLnByb3RvdHlwZS5jb21wdXRlVUlQcm9wcz1mdW5jdGlvbigpe3ZhciBhPXRoaXMucG9pbnQueCxiPXRoaXMucG9pbnQueSxjPXRoaXMud2lkdGgvMixkPXRoaXMuaGVpZ2h0LzIsZT10aGlzLmFuZ2xlLzE4MCpNYXRoLlBJLGY9TWF0aC5zcXJ0KE1hdGguY29zKGUpKk1hdGguY29zKGUpKmQqZCtNYXRoLnNpbihlKSpNYXRoLnNpbihlKSpjKmMpK2IsZz0tZisyKmIsaD1NYXRoLnNxcnQoTWF0aC5jb3MoZSkqTWF0aC5jb3MoZSkqYypjK01hdGguc2luKGUpKk1hdGguc2luKGUpKmQqZCkrYSxpPS1oKzIqYTt0aGlzLnJlY3QueD1pLHRoaXMucmVjdC55PWcsdGhpcy5yZWN0LndpZHRoPWgtaSx0aGlzLnJlY3QuaGVpZ2h0PWYtZyx0aGlzLmNvb3JkaW5hdGVzPXRoaXMucmVjdC5nZXRWZXJ0aWNlcygpLHRoaXMueD10aGlzLnBvaW50LngsdGhpcy55PXRoaXMucG9pbnQueX0sYS5VSS5FbGxpcHNlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLndpZHRoKnRoaXMuZHBpLGI9dGhpcy5hbmdsZSxjPXRoaXMuaGVpZ2h0KnRoaXMuZHBpLGQ9dGhpcy50cmFuc2Zvcm1CeVJvdGF0ZSh0aGlzLnBvaW50KSxlPXRoaXMuY3R4Q2FjaGU7ZS5zYXZlKCk7dmFyIGY9YT5jP2E6YyxnPWQueCp0aGlzLmRwaSxoPWQueSp0aGlzLmRwaSxpPWEvZixqPWMvZjtlLnRyYW5zbGF0ZShnLGgpLGUucm90YXRlKHBhcnNlSW50KGIpKk1hdGguUEkvMTgwKSxlLnRyYW5zbGF0ZSgtZywtaCksZS5zY2FsZShpLGopLGUuYmVnaW5QYXRoKCksZS5hcmMoZy9pLGgvaixmLzIsMCwyKk1hdGguUEksITEpLGUuY2xvc2VQYXRoKCksZS5maWxsU3R5bGU9dGhpcy5jdHguc3Ryb2tlU3R5bGU9dGhpcy5jb2xvcix0aGlzLmZpbGw/ZS5maWxsKCk6ZS5zdHJva2UoKSxlLnJlc3RvcmUoKX0sYS5VSS5FbGxpcHNlLnByb3RvdHlwZS5jb250YWluRG90PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy50cmFuc2Zvcm1CeVJvdGF0ZSh0aGlzLnBvaW50KTtyZXR1cm4gYj1uZXcgYS5NYXRoLkRvdChiKS5yb3RhdGUoLXRoaXMuYW5nbGUsZCksTWF0aC5wb3coKGIueC1kLngpL3RoaXMud2lkdGgqMiwyKStNYXRoLnBvdygoYi55LWQueSkvdGhpcy5oZWlnaHQqMiwyKTw9MX0sYS5VSS5FbGxpcHNlLnByb3RvdHlwZS5yZW5kZXJEYXNoQmVmb3JlVUk9ZnVuY3Rpb24oYSl7aWYodGhpcy5pc1Nob3dSb3RhdGVCZWZvcmVVSSYmMCE9PXRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoKXt2YXIgYj10aGlzLndpZHRoLGM9KHRoaXMuYW5nbGUsdGhpcy5oZWlnaHQpLGQ9dGhpcy5nZXRQYXJlbnQoKSxlPWQ/ZC50cmFuc2Zvcm1Ub0Fic29sdXRlKHRoaXMucG9pbnQpOnRoaXMucG9pbnQ7dGhpcy5jdHguc2F2ZSgpO3ZhciBmPWI+Yz9iOmMsZz1iL2YsaD1jL2Y7dGhpcy5jdHguc2NhbGUoZyxoKSx0aGlzLmN0eC5iZWdpblBhdGgoKSx0aGlzLmN0eC5hcmMoZS54L2csZS55L2gsZi8yLDAsMipNYXRoLlBJLCExKSx0aGlzLmN0eC5jbG9zZVBhdGgoKSx0aGlzLmN0eC5zdHJva2VTdHlsZT10aGlzLmNvbG9yLHRoaXMuY3R4LnNldExpbmVEYXNoJiZ0aGlzLmN0eC5zZXRMaW5lRGFzaChbMTBdKSx0aGlzLmN0eC5zdHJva2UoKSx0aGlzLmN0eC5yZXN0b3JlKCl9fX0oWWNjKSxmdW5jdGlvbihhKXthLlVJLkNpcmNsZT1mdW5jdGlvbihiKXthLlVJLlBvbHlnb24uY2FsbCh0aGlzLGIpLHRoaXMueWNjQ2xhc3M9YS5VSS5DaXJjbGUsdGhpcy5wb2ludD1udWxsLHRoaXMucj0xMCx0aGlzLmNvbG9yPVwiYmxhY2tcIix0aGlzLmZpbGw9ITAsdGhpcy5saW5lV2lkdGg9MSx0aGlzLmV4dGVuZChiKX0sYS51dGlscy5tZXJnZU9iamVjdChhLlVJLkNpcmNsZS5wcm90b3R5cGUsYS5VSS5Qb2x5Z29uLnByb3RvdHlwZSksYS5VSS5DaXJjbGUucHJvdG90eXBlLmNvbXB1dGVVSVByb3BzPWZ1bmN0aW9uKCl7aWYoIXRoaXMucG9pbnQpcmV0dXJuIG5ldyBhLkRlYnVnZ2VyLkVycm9yKFwiQ2lyY2xlIG5lZWQgcHJvcCBwb2ludFwiKTt2YXIgYj10aGlzLnBvaW50LngsYz10aGlzLnBvaW50LnksZD10aGlzLnI7dGhpcy5yZWN0PW5ldyBhLk1hdGguUmVjdChiLWQsYy1kLDIqZCwyKmQpLHRoaXMuY29vcmRpbmF0ZXM9dGhpcy5yZWN0LmdldFZlcnRpY2VzKCksdGhpcy54PXRoaXMucG9pbnQueCx0aGlzLnk9dGhpcy5wb2ludC55fSxhLlVJLkNpcmNsZS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jdHhDYWNoZSxiPXRoaXMudHJhbnNmb3JtQnlSb3RhdGUodGhpcy5wb2ludCk7YS5zYXZlKCksYS5iZWdpblBhdGgoKSxhLmZpbGxTdHlsZT10aGlzLmNvbG9yLGEuc3Ryb2tlU3R5bGU9dGhpcy5jb2xvcixhLmxpbmVXaWR0aD10aGlzLmxpbmVXaWR0aCxhLmFyYyhiLngqdGhpcy5kcGksYi55KnRoaXMuZHBpLHRoaXMucip0aGlzLmRwaSwwLDIqTWF0aC5QSSksYS5jbG9zZVBhdGgoKSx0aGlzLmZpbGw/YS5maWxsKCk6YS5zdHJva2UoKSxhLnJlc3RvcmUoKX0sYS5VSS5DaXJjbGUucHJvdG90eXBlLnJlbmRlckRhc2hCZWZvcmVVST1mdW5jdGlvbihhKXtpZih0aGlzLmlzU2hvd1JvdGF0ZUJlZm9yZVVJJiYwIT09dGhpcy5jb29yZGluYXRlcy5sZW5ndGgpe2E9dGhpcy5jdHg7dmFyIGI9dGhpcy5nZXRQYXJlbnQoKSxjPWI/Yi50cmFuc2Zvcm1Ub0Fic29sdXRlKHRoaXMucG9pbnQpOnRoaXMucG9pbnQ7YS5zYXZlKCksYS5zZXRMaW5lRGFzaCYmYS5zZXRMaW5lRGFzaChbMTBdKSxhLmJlZ2luUGF0aCgpLHRoaXMuY3R4LmFyYyhjLngsYy55LHRoaXMuciwwLDIqTWF0aC5QSSksYS5jbG9zZVBhdGgoKSxhLnN0cm9rZVN0eWxlPXRoaXMuY29sb3IsYS5zdHJva2UoKSxhLnJlc3RvcmUoKX19LGEuVUkuQ2lyY2xlLnByb3RvdHlwZS5jb250YWluRG90PWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy50cmFuc2Zvcm1CeVJvdGF0ZSh0aGlzLnBvaW50KTtyZXR1cm4gTWF0aC5wb3coYS54LWMueCwyKStNYXRoLnBvdyhhLnktYy55LDIpPD1NYXRoLnBvdyh0aGlzLnIsMil9fShZY2MpLGZ1bmN0aW9uKGEpe2EuVUkuSW1hZ2U9ZnVuY3Rpb24oYil7YS5VSS5Qb2x5Z29uLmNhbGwodGhpcyxiKSx0aGlzLnljY0NsYXNzPWEuVUkuSW1hZ2UsdGhpcy5maWxsTW9kZT1cIm5vbmVcIix0aGlzLnJlcz1udWxsLHRoaXMubWlycm9yPTAsdGhpcy5zY2FsZTlHcmlkUmVjdD1udWxsLHRoaXMuc2NhbGVSZXBlYXRSZWN0PW51bGwsdGhpcy5leHRlbmQoYil9LGEudXRpbHMubWVyZ2VPYmplY3QoYS5VSS5JbWFnZS5wcm90b3R5cGUsYS5VSS5Qb2x5Z29uLnByb3RvdHlwZSksYS5VSS5JbWFnZS5wcm90b3R5cGUuY29uc3RydWN0b3I9YS5VSS5JbWFnZSxhLlVJLkltYWdlLnByb3RvdHlwZS5jb21wdXRlVUlQcm9wcz1mdW5jdGlvbigpe1wiYXV0b1wiPT09dGhpcy5maWxsTW9kZSYmKHRoaXMucmVjdC53aWR0aD10aGlzLnJlcy53aWR0aCx0aGlzLnJlY3QuaGVpZ2h0PXRoaXMucmVzLmhlaWdodCksdGhpcy5jb29yZGluYXRlcz10aGlzLnJlY3QuZ2V0VmVydGljZXMoKSx0aGlzLng9dGhpcy5yZWN0LngsdGhpcy55PXRoaXMucmVjdC55fSxhLlVJLkltYWdlLnByb3RvdHlwZS5fcHJvY2Vzc01pcnJvcj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmN0eENhY2hlLGM9YS54KnRoaXMuZHBpLGQ9YS55KnRoaXMuZHBpLGU9YS53aWR0aCp0aGlzLmRwaSxmPWEuaGVpZ2h0KnRoaXMuZHBpOzE9PT10aGlzLm1pcnJvciYmKGIuc2NhbGUoLTEsMSksYi50cmFuc2xhdGUoMiotYy1lLDApKSwyPT09dGhpcy5taXJyb3ImJihiLnNjYWxlKDEsLTEpLGIudHJhbnNsYXRlKDAsMiotZC1mKSksMz09PXRoaXMubWlycm9yJiYoYi5zY2FsZSgtMSwtMSksYi50cmFuc2xhdGUoMiotYy1lLDIqLWQtZikpfSxhLlVJLkltYWdlLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmN0eENhY2hlO2Iuc2F2ZSgpO3ZhciBjLGQsZSxmLGcsaCxpPXRoaXMuZ2V0QWJzb2x1dGVQb3NpdGlvblJlY3QoKSxqPXRoaXMucmVzLGs9aS54KnRoaXMuZHBpLGw9aS55KnRoaXMuZHBpLG09aS53aWR0aCp0aGlzLmRwaSxuPWkuaGVpZ2h0KnRoaXMuZHBpLG89ai53aWR0aCp0aGlzLmRwaSxwPWouaGVpZ2h0KnRoaXMuZHBpLHE9dGhpcy50cmFuc2Zvcm1Ub0Fic29sdXRlKHt4OnRoaXMuYW5jaG9yWCx5OnRoaXMuYW5jaG9yWX0pO2lmKGIudHJhbnNsYXRlKHEueCp0aGlzLmRwaSxxLnkqdGhpcy5kcGkpLGIucm90YXRlKHRoaXMucm90YXRpb24qTWF0aC5QSS8xODApLGIudHJhbnNsYXRlKC1xLngqdGhpcy5kcGksLXEueSp0aGlzLmRwaSksdGhpcy5fcHJvY2Vzc01pcnJvcihpKSxcIm5vbmVcIj09PXRoaXMuZmlsbE1vZGUpYi5kcmF3SW1hZ2UodGhpcy5yZXMsMCwwLGkud2lkdGgsaS5oZWlnaHQsaS54LGkueSxpLndpZHRoLGkuaGVpZ2h0KTtlbHNlIGlmKFwic2NhbGVcIj09PXRoaXMuZmlsbE1vZGUpYi5kcmF3SW1hZ2UodGhpcy5yZXMsMCwwLGoud2lkdGgsai5oZWlnaHQsayxsLG0sbik7ZWxzZSBpZihcImF1dG9cIj09PXRoaXMuZmlsbE1vZGUpYi5kcmF3SW1hZ2UodGhpcy5yZXMsMCwwLGoud2lkdGgsai5oZWlnaHQsayxsLG0sbik7ZWxzZSBpZihcInJlcGVhdFwiPT09dGhpcy5maWxsTW9kZSlmb3IoZT1wYXJzZUludChtL28pKzEsZj1wYXJzZUludChuL3ApKzEsYz0wO2M8ZTtjKyspZm9yKGQ9MDtkPGY7ZCsrKWc9ai53aWR0aCxoPWouaGVpZ2h0LGM9PT1lLTEmJihnPWkud2lkdGgtYypqLndpZHRoKSxkPT09Zi0xJiYoaD1pLmhlaWdodC1kKmouaGVpZ2h0KSxiLmRyYXdJbWFnZSh0aGlzLnJlcywwLDAsZyxoLGsrbypjLGwrcCpkLGcqdGhpcy5kcGksaCp0aGlzLmRwaSk7ZWxzZSBpZihcInNjYWxlUmVwZWF0XCI9PT10aGlzLmZpbGxNb2RlKWZvcihlPXBhcnNlSW50KGkud2lkdGgvdGhpcy5zY2FsZVJlcGVhdFJlY3Qud2lkdGgpKzEsZj1wYXJzZUludChpLmhlaWdodC90aGlzLnNjYWxlUmVwZWF0UmVjdC5oZWlnaHQpKzEsYz0wO2M8ZTtjKyspZm9yKGQ9MDtkPGY7ZCsrKWc9dGhpcy5zY2FsZVJlcGVhdFJlY3Qud2lkdGgsaD10aGlzLnNjYWxlUmVwZWF0UmVjdC5oZWlnaHQsYz09PWUtMSYmKGc9aS53aWR0aC1jKnRoaXMuc2NhbGVSZXBlYXRSZWN0LndpZHRoKSxkPT09Zi0xJiYoaD1pLmhlaWdodC1kKnRoaXMuc2NhbGVSZXBlYXRSZWN0LmhlaWdodCksdGhpcy5jdHguZHJhd0ltYWdlKHRoaXMucmVzLDAsMCxqLndpZHRoLGouaGVpZ2h0LGkueCp0aGlzLmRwaSt0aGlzLnNjYWxlUmVwZWF0UmVjdC53aWR0aCpjLGkueSp0aGlzLmRwaSt0aGlzLnNjYWxlUmVwZWF0UmVjdC5oZWlnaHQqZCxnKnRoaXMuZHBpLGgqdGhpcy5kcGkpO2Vsc2UgaWYoXCJzY2FsZTlHcmlkXCI9PT10aGlzLmZpbGxNb2RlKXt2YXIgcixzLHQ9dGhpcy5zY2FsZTlHcmlkUmVjdCx1PVtdO3VbMF09e30sdVswXS5zcmM9bmV3IGEuTWF0aC5SZWN0KDAsMCx0LngsdC55KSx1WzBdLmRlc3Q9bmV3IGEuTWF0aC5SZWN0KGkueCxpLnksdC54LHQueSksdVsyXT17fSx1WzJdLnNyYz1uZXcgYS5NYXRoLlJlY3QodC54K3Qud2lkdGgsMCxqLndpZHRoLXQueC10LndpZHRoLHQueSksdVsyXS5kZXN0PW5ldyBhLk1hdGguUmVjdChpLndpZHRoLXVbMl0uc3JjLndpZHRoK2kueCxpLnksdVsyXS5zcmMud2lkdGgsdVsyXS5zcmMuaGVpZ2h0KSx1WzZdPXt9LHVbNl0uc3JjPW5ldyBhLk1hdGguUmVjdCgwLHQueSt0LmhlaWdodCx0Lngsai5oZWlnaHQtdC55LXQuaGVpZ2h0KSx1WzZdLmRlc3Q9bmV3IGEuTWF0aC5SZWN0KGkueCxpLnkraS5oZWlnaHQtdVs2XS5zcmMuaGVpZ2h0LHVbNl0uc3JjLndpZHRoLHVbNl0uc3JjLmhlaWdodCksdVs4XT17fSx1WzhdLnNyYz1uZXcgYS5NYXRoLlJlY3QodC54K3Qud2lkdGgsdC55K3QuaGVpZ2h0LGoud2lkdGgtdC54LXQud2lkdGgsai5oZWlnaHQtdC55LXQuaGVpZ2h0KSxcbnVbOF0uZGVzdD1uZXcgYS5NYXRoLlJlY3QoaS53aWR0aC11WzhdLnNyYy53aWR0aCtpLngsaS55K2kuaGVpZ2h0LXVbOF0uc3JjLmhlaWdodCx1WzhdLnNyYy53aWR0aCx1WzhdLnNyYy5oZWlnaHQpLHVbMV09e30sdVsxXS5zcmM9bmV3IGEuTWF0aC5SZWN0KHQueCwwLHQud2lkdGgsdC55KSx1WzFdLmRlc3Q9bmV3IGEuTWF0aC5SZWN0KHVbMF0uZGVzdC54K3VbMF0uZGVzdC53aWR0aCxpLnksaS53aWR0aC11WzBdLmRlc3Qud2lkdGgtdVsyXS5kZXN0LndpZHRoLHQueSksdVszXT17fSx1WzNdLnNyYz1uZXcgYS5NYXRoLlJlY3QodVswXS5zcmMueCx0LnksdVswXS5zcmMud2lkdGgsdC5oZWlnaHQpLHVbM10uZGVzdD1uZXcgYS5NYXRoLlJlY3QodVswXS5kZXN0LngsdVswXS5kZXN0LnkrdVswXS5kZXN0LmhlaWdodCx1WzBdLmRlc3Qud2lkdGgsaS5oZWlnaHQtdVswXS5kZXN0LmhlaWdodC11WzZdLmRlc3QuaGVpZ2h0KSx1WzVdPXt9LHVbNV0uc3JjPW5ldyBhLk1hdGguUmVjdCh1WzJdLnNyYy54LHQueSx1WzJdLnNyYy53aWR0aCx0LmhlaWdodCksdVs1XS5kZXN0PW5ldyBhLk1hdGguUmVjdCh1WzJdLmRlc3QueCx1WzNdLmRlc3QueSx1WzJdLmRlc3Qud2lkdGgsdVszXS5kZXN0LmhlaWdodCksdVs3XT17fSx1WzddLnNyYz1uZXcgYS5NYXRoLlJlY3QodVsxXS5zcmMueCx1WzZdLnNyYy55LHQud2lkdGgsdVs2XS5zcmMuaGVpZ2h0KSx1WzddLmRlc3Q9bmV3IGEuTWF0aC5SZWN0KHVbMV0uZGVzdC54LHVbNl0uZGVzdC55LHVbMV0uZGVzdC53aWR0aCx1WzZdLmRlc3QuaGVpZ2h0KSx1WzRdPXt9LHVbNF0uc3JjPW5ldyBhLk1hdGguUmVjdCh0LngsdC55LHQud2lkdGgsdC5oZWlnaHQpLHVbNF0uZGVzdD1uZXcgYS5NYXRoLlJlY3QodVsxXS5kZXN0LngsdVs1XS5kZXN0LnksdVsxXS5kZXN0LndpZHRoLHVbNV0uZGVzdC5oZWlnaHQpO2Zvcih2YXIgdj0wO3Y8dS5sZW5ndGg7disrKXVbdl0mJihyPXVbdl0uc3JjLHM9dVt2XS5kZXN0LGIuZHJhd0ltYWdlKHRoaXMucmVzLHIueCxyLnksci53aWR0aCxyLmhlaWdodCxzLngqdGhpcy5kcGkscy55KnRoaXMuZHBpLHMud2lkdGgqdGhpcy5kcGkscy5oZWlnaHQqdGhpcy5kcGkpKX1iLnJlc3RvcmUoKX19KFljYyksZnVuY3Rpb24oYSl7YS5VSS5JbWFnZUZyYW1lQW5pbWF0aW9uPWZ1bmN0aW9uKGIpe2EuVUkuUG9seWdvbi5jYWxsKHRoaXMsYiksdGhpcy55Y2NDbGFzcz1hLlVJLkltYWdlRnJhbWVBbmltYXRpb24sdGhpcy5yZXM9bnVsbCx0aGlzLmZyYW1lU3BhY2U9MSx0aGlzLmZpcnN0RnJhbWVSZWN0PW51bGwsdGhpcy5zdGFydEZyYW1lQ291bnQ9MCx0aGlzLmZyYW1lUmVjdENvdW50PTEsdGhpcy5hdXRvcGxheT0hMSx0aGlzLmlzUnVubmluZz0hMSx0aGlzLm1pcnJvcj0wLHRoaXMuZXh0ZW5kKGIpLHRoaXMuaXNSdW5uaW5nPXRoaXMuYXV0b3BsYXl9LGEudXRpbHMubWVyZ2VPYmplY3QoYS5VSS5JbWFnZUZyYW1lQW5pbWF0aW9uLnByb3RvdHlwZSxhLlVJLlBvbHlnb24ucHJvdG90eXBlKSxhLlVJLkltYWdlRnJhbWVBbmltYXRpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yPWEuVUkuSW1hZ2VGcmFtZUFuaW1hdGlvbixhLlVJLkltYWdlRnJhbWVBbmltYXRpb24ucHJvdG90eXBlLmNvbXB1dGVVSVByb3BzPWZ1bmN0aW9uKCl7dGhpcy5jb29yZGluYXRlcz10aGlzLnJlY3QuZ2V0VmVydGljZXMoKSx0aGlzLng9dGhpcy5yZWN0LngsdGhpcy55PXRoaXMucmVjdC55fSxhLlVJLkltYWdlRnJhbWVBbmltYXRpb24ucHJvdG90eXBlLl9wcm9jZXNzTWlycm9yPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3R4Q2FjaGUsYz1hLngqdGhpcy5kcGksZD1hLnkqdGhpcy5kcGksZT1hLndpZHRoKnRoaXMuZHBpLGY9YS5oZWlnaHQqdGhpcy5kcGk7MT09PXRoaXMubWlycm9yJiYoYi5zY2FsZSgtMSwxKSxiLnRyYW5zbGF0ZSgyKi1jLWUsMCkpLDI9PT10aGlzLm1pcnJvciYmKGIuc2NhbGUoMSwtMSksYi50cmFuc2xhdGUoMCwyKi1kLWYpKSwzPT09dGhpcy5taXJyb3ImJihiLnNjYWxlKC0xLC0xKSxiLnRyYW5zbGF0ZSgyKi1jLWUsMiotZC1mKSl9LGEuVUkuSW1hZ2VGcmFtZUFuaW1hdGlvbi5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jdHhDYWNoZSxiPXRoaXMuZ2V0QWJzb2x1dGVQb3NpdGlvblJlY3QoKSxjPWIueCp0aGlzLmRwaSxkPWIueSp0aGlzLmRwaSxlPWIud2lkdGgqdGhpcy5kcGksZj1iLmhlaWdodCp0aGlzLmRwaSxnPXBhcnNlSW50KCh0aGlzLmJlbG9uZ1RvLnljY0luc3RhbmNlLnRpY2tlci5mcmFtZUFsbENvdW50LXRoaXMuc3RhcnRGcmFtZUNvdW50KS90aGlzLmZyYW1lU3BhY2UpJXRoaXMuZnJhbWVSZWN0Q291bnQrMTsoIXRoaXMuaXNSdW5uaW5nfHxnPj10aGlzLmZyYW1lUmVjdENvdW50KSYmKGc9MCksYS5zYXZlKCksdGhpcy5zY2FsZUFuZFJvdGF0ZSgpLHRoaXMuX3Byb2Nlc3NNaXJyb3IoYiksYS5kcmF3SW1hZ2UodGhpcy5yZXMsdGhpcy5maXJzdEZyYW1lUmVjdC54K3RoaXMuZmlyc3RGcmFtZVJlY3Qud2lkdGgqZyx0aGlzLmZpcnN0RnJhbWVSZWN0LnksdGhpcy5maXJzdEZyYW1lUmVjdC53aWR0aCx0aGlzLmZpcnN0RnJhbWVSZWN0LmhlaWdodCxjLGQsZSxmKSxhLnJlc3RvcmUoKX0sYS5VSS5JbWFnZUZyYW1lQW5pbWF0aW9uLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuc3RhcnRGcmFtZUNvdW50PXRoaXMuYmVsb25nVG8ueWNjSW5zdGFuY2UudGlja2VyLmZyYW1lQWxsQ291bnQsdGhpcy5pc1J1bm5pbmc9ITB9LGEuVUkuSW1hZ2VGcmFtZUFuaW1hdGlvbi5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuaXNSdW5uaW5nPSExfX0oWWNjKSxmdW5jdGlvbihhKXthLlVJLkxpbmU9ZnVuY3Rpb24oYil7YS5VSS5Qb2x5Z29uLmNhbGwodGhpcyxiKSx0aGlzLnljY0NsYXNzPWEuVUkuTGluZSx0aGlzLnN0YXJ0PW5ldyBhLk1hdGguRG90KDAsMCksdGhpcy5lbmQ9bmV3IGEuTWF0aC5Eb3QoMCwwKSx0aGlzLndpZHRoPTEsdGhpcy5jb2xvcj1cImJsYWNrXCIsdGhpcy5leHRlbmQoYil9LGEudXRpbHMubWVyZ2VPYmplY3QoYS5VSS5MaW5lLnByb3RvdHlwZSxhLlVJLlBvbHlnb24ucHJvdG90eXBlKSxhLlVJLkxpbmUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWEuVUkuTGluZSxhLlVJLkxpbmUucHJvdG90eXBlLmNvbXB1dGVVSVByb3BzPWZ1bmN0aW9uKCl7dGhpcy5yZWN0Lng9dGhpcy5zdGFydC54PHRoaXMuZW5kLng/dGhpcy5zdGFydC54OnRoaXMuZW5kLngsdGhpcy5yZWN0Lnk9dGhpcy5zdGFydC55PHRoaXMuZW5kLnk/dGhpcy5zdGFydC55OnRoaXMuZW5kLnksdGhpcy5yZWN0LndpZHRoPU1hdGguYWJzKHRoaXMuc3RhcnQueC10aGlzLmVuZC54KSx0aGlzLnJlY3QuaGVpZ2h0PU1hdGguYWJzKHRoaXMuc3RhcnQueS10aGlzLmVuZC55KTt2YXIgYT10aGlzLnN0YXJ0LngsYj10aGlzLnN0YXJ0LnksYz10aGlzLmVuZC54LGQ9dGhpcy5lbmQueSxlPS0oYy1hKS8oZC1iKTtpZihkLWI9PT0wKXRoaXMuY29vcmRpbmF0ZXM9W3t4OnRoaXMuc3RhcnQueCx5OnRoaXMuc3RhcnQueS10aGlzLndpZHRoLzJ9LHt4OnRoaXMuc3RhcnQueCx5OnRoaXMuc3RhcnQueSt0aGlzLndpZHRoLzJ9LHt4OnRoaXMuZW5kLngseTp0aGlzLmVuZC55K3RoaXMud2lkdGgvMn0se3g6dGhpcy5lbmQueCx5OnRoaXMuZW5kLnktdGhpcy53aWR0aC8yfSx7eDp0aGlzLnN0YXJ0LngseTp0aGlzLnN0YXJ0LnktdGhpcy53aWR0aC8yfV07ZWxzZXt2YXIgZj1hLU1hdGgucG93KE1hdGgucG93KHRoaXMud2lkdGgvMiwyKS8oZSplKzEpLC41KSxnPWErTWF0aC5wb3coTWF0aC5wb3codGhpcy53aWR0aC8yLDIpLyhlKmUrMSksLjUpLGg9YytNYXRoLnBvdyhNYXRoLnBvdyh0aGlzLndpZHRoLzIsMikvKGUqZSsxKSwuNSksaT1jLU1hdGgucG93KE1hdGgucG93KHRoaXMud2lkdGgvMiwyKS8oZSplKzEpLC41KSxqPWUqKGYtYSkrYixrPWUqKGctYSkrYixsPWUqKGgtYykrZCxtPWUqKGktYykrZDt0aGlzLmNvb3JkaW5hdGVzPVt7eDpmLHk6an0se3g6Zyx5Omt9LHt4OmgseTpsfSx7eDppLHk6bX0se3g6Zix5Omp9XX10aGlzLng9dGhpcy5zdGFydC54LHRoaXMueT10aGlzLnN0YXJ0LnksdGhpcy5zdHJva2VTdHlsZT10aGlzLmNvbG9yLHRoaXMuZmlsbFN0eWxlPXRoaXMuY29sb3J9fShZY2MpLGZ1bmN0aW9uKGEpe2EuVUkuQnJva2VuTGluZT1mdW5jdGlvbihiKXthLlVJLlBvbHlnb24uY2FsbCh0aGlzLGIpLHRoaXMueWNjQ2xhc3M9YS5VSS5Ccm9rZW5MaW5lLHRoaXMucG9pbnRMaXN0PVtdLHRoaXMud2lkdGg9MSx0aGlzLmNvbG9yPVwiYmxhY2tcIix0aGlzLnNtb290aD0hMSx0aGlzLmV4dGVuZChiKX0sYS51dGlscy5tZXJnZU9iamVjdChhLlVJLkJyb2tlbkxpbmUucHJvdG90eXBlLGEuVUkuUG9seWdvbi5wcm90b3R5cGUpLGEuVUkuQnJva2VuTGluZS5wcm90b3R5cGUuY29tcHV0ZVVJUHJvcHM9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5wb2ludExpc3QubGVuZ3RoKXJldHVybiB0aGlzLnJlY3QueD0wLHRoaXMucmVjdC55PTAsdGhpcy5yZWN0LndpZHRoPTAsdGhpcy5yZWN0LmhlaWdodD0wLG51bGw7Zm9yKHZhciBhPXRoaXMucG9pbnRMaXN0WzBdLngsYj10aGlzLnBvaW50TGlzdFswXS55LGM9dGhpcy5wb2ludExpc3RbMF0ueCxkPXRoaXMucG9pbnRMaXN0WzBdLnksZT0wO2U8dGhpcy5wb2ludExpc3QubGVuZ3RoO2UrKyl7dmFyIGY9dGhpcy5wb2ludExpc3RbZV07Zi54PGE/YT1mLng6Zi54PmMmJihjPWYueCksZi55PGI/Yj1mLnk6Zi55PmQmJihkPWYueSl9dGhpcy5yZWN0Lng9YSx0aGlzLnJlY3QueT1iLHRoaXMucmVjdC53aWR0aD1jLWEsdGhpcy5yZWN0LmhlaWdodD1kLWIsdGhpcy5jb29yZGluYXRlcz10aGlzLnJlY3QuZ2V0VmVydGljZXMoKSx0aGlzLng9dGhpcy5yZWN0LngsdGhpcy55PXRoaXMucmVjdC55fSxhLlVJLkJyb2tlbkxpbmUucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe2lmKHRoaXMucG9pbnRMaXN0Lmxlbmd0aDwyKXJldHVybiBudWxsO3ZhciBhPXRoaXMuY3R4Q2FjaGU7dGhpcy5nZXRQYXJlbnQoKTthLnNhdmUoKSxhLnN0cm9rZVN0eWxlPXRoaXMuY29sb3IsYS5zdHJva2VXaWR0aD10aGlzLndpZHRoLGEuYmVnaW5QYXRoKCk7dmFyIGI9dGhpcy50cmFuc2Zvcm1CeVJvdGF0ZSh0aGlzLnBvaW50TGlzdCk7dGhpcy5zbW9vdGg/dGhpcy5fc21vb3RoTGluZVJlbmRlcihiKTp0aGlzLl9ub3JtYWxSZW5kZXIoYiksYS5jbG9zZVBhdGgoKSxhLnJlc3RvcmUoKX0sYS5VSS5Ccm9rZW5MaW5lLnByb3RvdHlwZS5fbm9ybWFsUmVuZGVyPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3R4Q2FjaGU7Yi5tb3ZlVG8oYVswXS54KnRoaXMuZHBpLGFbMF0ueSp0aGlzLmRwaSk7Zm9yKHZhciBjPTE7YzxhLmxlbmd0aDtjKyspYi5saW5lVG8oYVtjXS54KnRoaXMuZHBpLGFbY10ueSp0aGlzLmRwaSk7Yi5zdHJva2UoKX0sYS5VSS5Ccm9rZW5MaW5lLnByb3RvdHlwZS5fc21vb3RoTGluZVJlbmRlcj1mdW5jdGlvbihiKXtmdW5jdGlvbiBjKGIpe3ZhciBjPTEvMyxkPVtdO2QucHVzaCh7c3RhcnQ6YlswXSxlbmQ6YlsxXSxkb3QxOmJbMF0sZG90MjpudWxsfSk7Zm9yKHZhciBlPTE7ZTxiLmxlbmd0aC0xO2UrKyl7dmFyIGY9YltlXSxnPWJbZSsxXSxoPWJbZS0xXSxpPW5ldyBhLk1hdGguRG90KGYueC1jKk1hdGguYWJzKGYueC1oLngpLGYueSksaj1uZXcgYS5NYXRoLkRvdChmLngrYypNYXRoLmFicyhmLngtZy54KSxmLnkpO2RbZS0xXS5kb3QyPWksZC5wdXNoKHtzdGFydDpmLGVuZDpnLGRvdDE6aixkb3QyOm51bGx9KX1yZXR1cm4gZFtkLmxlbmd0aC0xXS5kb3QyPWJbYi5sZW5ndGgtMV0sZH12YXIgZD10aGlzLmN0eENhY2hlLGU9YyhiKTtkLmJlZ2luUGF0aCgpO2Zvcih2YXIgZj0wO2Y8ZS5sZW5ndGg7ZisrKWQubW92ZVRvKGVbZl0uc3RhcnQueCp0aGlzLmRwaSxlW2ZdLnN0YXJ0LnkqdGhpcy5kcGkpLGQuYmV6aWVyQ3VydmVUbyhlW2ZdLmRvdDEueCp0aGlzLmRwaSxlW2ZdLmRvdDEueSp0aGlzLmRwaSxlW2ZdLmRvdDIueCp0aGlzLmRwaSxlW2ZdLmRvdDIueSp0aGlzLmRwaSxlW2ZdLmVuZC54KnRoaXMuZHBpLGVbZl0uZW5kLnkqdGhpcy5kcGkpO2Quc3Ryb2tlKCl9LGEuVUkuQnJva2VuTGluZS5wcm90b3R5cGUuX3Ntb290aExpbmVSZW5kZXIwMj1mdW5jdGlvbihhKXt9fShZY2MpLGZ1bmN0aW9uKGEpe2EuVUkuTXVsdGlMaW5lVGV4dD1mdW5jdGlvbihiKXthLlVJLlBvbHlnb24uY2FsbCh0aGlzLGIpLHRoaXMueWNjQ2xhc3M9YS5VSS5NdWx0aUxpbmVUZXh0LHRoaXMuZGlzcGxheUxpbmVzPVtdLHRoaXMuY29udGVudD1cIlwiLHRoaXMuZm9udFNpemU9XCIxNnB4XCIsdGhpcy5saW5lSGVpZ2h0PTI0LHRoaXMuZmlsbD0hMCx0aGlzLmNvbG9yPVwiYmxhY2tcIix0aGlzLndvcmRCcmVhaz1cImJyZWFrLWFsbFwiLHRoaXMub3ZlcmZsb3c9XCJhdXRvXCIsdGhpcy5leHRlbmQoYil9LGEudXRpbHMubWVyZ2VPYmplY3QoYS5VSS5NdWx0aUxpbmVUZXh0LnByb3RvdHlwZSxhLlVJLlBvbHlnb24ucHJvdG90eXBlKSxhLlVJLk11bHRpTGluZVRleHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPWEuVUkuTXVsdGlMaW5lVGV4dCxhLlVJLk11bHRpTGluZVRleHQucHJvdG90eXBlLmNvbXB1dGVVSVByb3BzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe2Z1bmN0aW9uIGEoKXtmdW5jdGlvbiBhKGUpe3ZhciBmPVtdLGc9Yy5tZWFzdXJlVGV4dChlKS53aWR0aDtpZihnPD1kLnJlY3Qud2lkdGgqYi5kcGkpcmV0dXJuIGYucHVzaChlKSxmO2Zvcih2YXIgaD0wO2g8ZS5sZW5ndGg7aCsrKXt2YXIgaT1lLnNsaWNlKDAsaCsxKSxqPWMubWVhc3VyZVRleHQoaSkud2lkdGg7aWYoaj5kLnJlY3Qud2lkdGgqYi5kcGkpe3ZhciBrPWUuc2xpY2UoMCxoLTEpO2YucHVzaChrKTt2YXIgbD1lLnNsaWNlKGgtMSk7cmV0dXJuIGY9Zi5jb25jYXQoYShsKSl9fX1mb3IodmFyIGY9W10sZz0wO2c8ZS5sZW5ndGg7ZysrKXt2YXIgaD1lW2ddLGk9YShoKTtmPWYuY29uY2F0KGkpfXJldHVybiBmfWZ1bmN0aW9uIGYoKXtmdW5jdGlvbiBhKGUpe3ZhciBmPVtdLGc9Yy5tZWFzdXJlVGV4dChlKS53aWR0aDtpZihnPD1kLnJlY3Qud2lkdGgqYi5kcGkpcmV0dXJuIGYucHVzaChlKSxmO2Zvcih2YXIgaD0wLGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIGo9ZS5zbGljZSgwLGkrMSksaz1jLm1lYXN1cmVUZXh0KGopLndpZHRoLGw9ZVtpXTtpZihcIiBcIj09PWwmJihoPWkpLGs+ZC5yZWN0LndpZHRoKmIuZHBpKXt2YXIgbT1cIlwiLG49XCJcIjtyZXR1cm5cIiBcIj09PWx8fDA9PT1oPyhtPWUuc2xpY2UoMCxpKSxmLnB1c2gobSksbj1lLnNsaWNlKGkpLGY9Zi5jb25jYXQoYShuKSkpOihtPWUuc2xpY2UoMCxoKSxmLnB1c2gobSksbj1lLnNsaWNlKGgpLGY9Zi5jb25jYXQoYShuKSkpfX19Zm9yKHZhciBmPVtdLGc9MDtnPGUubGVuZ3RoO2crKyl7dmFyIGg9ZVtnXSxpPWEoaCk7Zj1mLmNvbmNhdChpKX1yZXR1cm4gZn1zd2l0Y2goZC53b3JkQnJlYWspe2Nhc2VcIm5vLWJyZWFrXCI6Y2FzZVwiYnJlYWstYWxsXCI6cmV0dXJuIGEoKTtjYXNlXCJicmVhay13b3JkXCI6cmV0dXJuIGYoKTtkZWZhdWx0OnJldHVybiBhKCl9fXZhciBiPXRoaXMsYz10aGlzLmN0eENhY2hlO2IuYmVsb25nVG8uX3NldEN0eFByb3BzKGIsYyk7dmFyIGQ9dGhpcyxlPXRoaXMuY29udGVudC5zcGxpdCgvKD86XFxyXFxufFxccnxcXG4pLyk7dGhpcy5kaXNwbGF5TGluZXM9YSgpLFwiYXV0b1wiPT09ZC5vdmVyZmxvdyYmKGQucmVjdC5oZWlnaHQ9ZC5saW5lSGVpZ2h0KnRoaXMuZGlzcGxheUxpbmVzLmxlbmd0aCksdGhpcy5jb29yZGluYXRlcz10aGlzLnJlY3QuZ2V0VmVydGljZXMoKSx0aGlzLng9dGhpcy5yZWN0LngsdGhpcy55PXRoaXMucmVjdC55fSxhLlVJLk11bHRpTGluZVRleHQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGE9YXx8dGhpcy5jdHhDYWNoZSwhYSlyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiW1ljYyBlcnJvcl06XCIsXCJjdHggaXMgbnVsbCAhXCIpO3ZhciBjPXRoaXMsZD10aGlzLmdldEFic29sdXRlUG9zaXRpb25SZWN0KCksZT1jLmxpbmVIZWlnaHQqYi5kcGk7YS5zYXZlKCksYS5maWxsU3R5bGU9Yy5jb2xvcixhLnN0cm9rZVN0eWxlPWMuY29sb3I7dmFyIGY9dGhpcy50cmFuc2Zvcm1Ub0Fic29sdXRlKHt4OnRoaXMuYW5jaG9yWCx5OnRoaXMuYW5jaG9yWX0pO2EudHJhbnNsYXRlKGYueCxmLnkpLGEucm90YXRlKHRoaXMucm90YXRpb24qTWF0aC5QSS8xODApLGEudHJhbnNsYXRlKC1mLngsLWYueSk7Zm9yKHZhciBnPTA7ZzxiLmRpc3BsYXlMaW5lcy5sZW5ndGg7ZysrKXt2YXIgaD1kLngqYi5kcGksaT1kLnkqYi5kcGkrZypjLmxpbmVIZWlnaHQqYi5kcGk7aWYoaStlPmQueSpiLmRwaStkLmhlaWdodCpiLmRwaSlicmVhazthLmZpbGxUZXh0KGIuZGlzcGxheUxpbmVzW2ddLGgsaSl9YS5yZXN0b3JlKCl9fShZY2MpLGZ1bmN0aW9uKGEpe2EuVUkuUmVjdD1mdW5jdGlvbihiKXthLlVJLlBvbHlnb24uY2FsbCh0aGlzLGIpLHRoaXMueWNjQ2xhc3M9YS5VSS5SZWN0LHRoaXMuZmlsbD0hMCx0aGlzLmNvbG9yPVwiYmxhY2tcIix0aGlzLmV4dGVuZChiKX0sYS51dGlscy5tZXJnZU9iamVjdChhLlVJLlJlY3QucHJvdG90eXBlLGEuVUkuUG9seWdvbi5wcm90b3R5cGUpLGEuVUkuUmVjdC5wcm90b3R5cGUuY29tcHV0ZVVJUHJvcHM9ZnVuY3Rpb24oKXt0aGlzLmNvb3JkaW5hdGVzPXRoaXMucmVjdC5nZXRWZXJ0aWNlcygpLHRoaXMueD10aGlzLnJlY3QueCx0aGlzLnk9dGhpcy5yZWN0Lnl9LGEuVUkuUmVjdC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7cmV0dXJuKGE9YXx8Yi5jdHhDYWNoZSk/KGEuc2F2ZSgpLGEuZmlsbFN0eWxlPXRoaXMuY29sb3IsYS5zdHJva2VTdHlsZT10aGlzLmNvbG9yLHRoaXMucmVuZGVyUGF0aChhKSx0aGlzLmZpbGw/YS5maWxsKCk6YS5zdHJva2UoKSx2b2lkIGEucmVzdG9yZSgpKTp2b2lkIGNvbnNvbGUuZXJyb3IoXCJbWWNjIGVycm9yXTpcIixcImN0eCBpcyBudWxsICFcIil9fShZY2MpLGZ1bmN0aW9uKGEpe2EuVUkuQ3JvcFJlY3Q9ZnVuY3Rpb24oYil7YS5VSS5Qb2x5Z29uLmNhbGwodGhpcyxiKSx0aGlzLnljY0NsYXNzPWEuVUkuQ3JvcFJlY3QsdGhpcy5jdHJsU2l6ZT02LHRoaXMuZW5hYmxlRHJhZ091dD0hMSx0aGlzLmZpbGw9ITAsdGhpcy5jdHJsUmVjdDE9bmV3IGEuTWF0aC5SZWN0LHRoaXMuY3RybFJlY3QyPW5ldyBhLk1hdGguUmVjdCx0aGlzLmN0cmxSZWN0Mz1uZXcgYS5NYXRoLlJlY3QsdGhpcy5jdHJsUmVjdDQ9bmV3IGEuTWF0aC5SZWN0LHRoaXMuYnRucz1bXSx0aGlzLmJ0bkhlaWdodD0zOCx0aGlzLmJ0blZlcnRpY2FsUGFkZGluZz0xMCx0aGlzLnNob3dOYW1lPSEwLHRoaXMuZXh0ZW5kKGIpLHRoaXMuX2luaXRVSSgpfSxhLnV0aWxzLm1lcmdlT2JqZWN0KGEuVUkuQ3JvcFJlY3QucHJvdG90eXBlLGEuVUkuUG9seWdvbi5wcm90b3R5cGUpLGEuVUkuQ3JvcFJlY3QucHJvdG90eXBlLnNob3dCdG5zPWZ1bmN0aW9uKGIpe2lmKHRoaXMuYnRucy5sZW5ndGg+MCl7Zm9yKHZhciBjPTA7Yzx0aGlzLmJ0bnMubGVuZ3RoO2MrKylhLnV0aWxzLmlzT2JqKHRoaXMuYnRuc1tjXSkmJih0aGlzLmJ0bnNbY10uc2hvdz1iKTt0aGlzLmJlbG9uZ1RvLnljY0luc3RhbmNlLmxheWVyTWFuYWdlci5yZVJlbmRlckFsbExheWVyVG9TdGFnZSgpfX0sYS5VSS5Dcm9wUmVjdC5wcm90b3R5cGUuc2V0Q3RybEJ0bnM9ZnVuY3Rpb24oYil7dmFyIGM9dGhpczswIT09Yi5sZW5ndGgmJmIuZm9yRWFjaChmdW5jdGlvbihiKXtiPWEudXRpbHMuZXh0ZW5kKHtjb250ZW50OlwiXCIscmVjdEJnQ29sb3I6XCIjNjY2XCIsY29sb3I6XCIjZmZmXCIsb250YXA6ZnVuY3Rpb24oKXt9fSxiKTt2YXIgZD1uZXcgYS5VSS5TaW5nbGVMaW5lVGV4dChiKTtkLmFkZExpc3RlbmVyKFwibW91c2VvdmVyXCIsZnVuY3Rpb24oKXt0aGlzLmNvbG9yPVwiI2NjY1wiLHRoaXMuYmVsb25nVG8ueWNjSW5zdGFuY2UubGF5ZXJNYW5hZ2VyLnJlUmVuZGVyQWxsTGF5ZXJUb1N0YWdlKCl9KSxkLmFkZExpc3RlbmVyKFwibW91c2VvdXRcIixmdW5jdGlvbigpe3RoaXMuY29sb3I9XCIjZmZmXCIsdGhpcy5iZWxvbmdUby55Y2NJbnN0YW5jZS5sYXllck1hbmFnZXIucmVSZW5kZXJBbGxMYXllclRvU3RhZ2UoKX0pLGMuYnRucy5wdXNoKGQpLGMuYmVsb25nVG8uYWRkVUkoZCl9KX0sYS5VSS5Dcm9wUmVjdC5wcm90b3R5cGUuY29tcHV0ZVVJUHJvcHM9ZnVuY3Rpb24oKXt0aGlzLmJlbG9uZ1RvLl9zZXRDdHhQcm9wcyh0aGlzKTt2YXIgYj10aGlzLnJlY3QsYz0wLGQ9MCxlPXRoaXMucmVjdC54LGY9dGhpcy5yZWN0LnkrdGhpcy5yZWN0LmhlaWdodCxnPXRoaXMuYmVsb25nVG8ueWNjSW5zdGFuY2UuZ2V0U3RhZ2VXaWR0aCgpLGg9dGhpcy5iZWxvbmdUby55Y2NJbnN0YW5jZS5nZXRTdGFnZUhlaWdodCgpO2lmKHRoaXMuY3RybFJlY3QxPW5ldyBhLk1hdGguUmVjdChiLngsYi55LHRoaXMuY3RybFNpemUsdGhpcy5jdHJsU2l6ZSksdGhpcy5jdHJsUmVjdDI9bmV3IGEuTWF0aC5SZWN0KGIueCtiLndpZHRoLXRoaXMuY3RybFNpemUsYi55LHRoaXMuY3RybFNpemUsdGhpcy5jdHJsU2l6ZSksdGhpcy5jdHJsUmVjdDM9bmV3IGEuTWF0aC5SZWN0KGIueCxiLnkrYi5oZWlnaHQtdGhpcy5jdHJsU2l6ZSx0aGlzLmN0cmxTaXplLHRoaXMuY3RybFNpemUpLHRoaXMuY3RybFJlY3Q0PW5ldyBhLk1hdGguUmVjdChiLngrYi53aWR0aC10aGlzLmN0cmxTaXplLGIueStiLmhlaWdodC10aGlzLmN0cmxTaXplLHRoaXMuY3RybFNpemUsdGhpcy5jdHJsU2l6ZSksMCE9PXRoaXMuYnRucy5sZW5ndGgpe2Zvcih2YXIgaT0wO2k8dGhpcy5idG5zLmxlbmd0aDtpKyspe3ZhciBqPXRoaXMuYnRuc1tpXTtqLm92ZXJmbG93PVwiYXV0b1wiLGoueEFsaWduPVwiY2VudGVyXCIsai5yZWN0LndpZHRoPXBhcnNlSW50KHRoaXMuY3R4Lm1lYXN1cmVUZXh0KGouY29udGVudCkud2lkdGgrMip0aGlzLmJ0blZlcnRpY2FsUGFkZGluZyksai5yZWN0LmhlaWdodD10aGlzLmJ0bkhlaWdodCxjKz1qLnJlY3Qud2lkdGgrMX1lK2M+ZyYmKGU9Zy1jKSxmK3RoaXMuYnRuSGVpZ2h0PmgmJihmPXRoaXMucmVjdC55PHRoaXMuYnRuSGVpZ2h0PzA6dGhpcy5yZWN0LnktdGhpcy5idG5IZWlnaHQtMik7Zm9yKHZhciBrPTA7azx0aGlzLmJ0bnMubGVuZ3RoO2srKyl7dmFyIGw9dGhpcy5idG5zW2tdO2wucmVjdC54PWUrZCxsLnJlY3QueT1mKzIsZCs9bC5yZWN0LndpZHRoKzF9dGhpcy5jb29yZGluYXRlcz10aGlzLnJlY3QuZ2V0VmVydGljZXMoKSx0aGlzLng9dGhpcy5yZWN0LngsdGhpcy55PXRoaXMucmVjdC55fX0sYS5VSS5Dcm9wUmVjdC5wcm90b3R5cGUuX2luaXRVST1mdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1udWxsLGQ9bnVsbDt0aGlzLnVzZXJEYXRhPXRoaXMudXNlckRhdGE/dGhpcy51c2VyRGF0YTp7fSx0aGlzLmFkZExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coXCJkcmFnc3RhcnRcIixlKSx0aGlzLnVzZXJEYXRhLmN0cmxTdGFydD0wLHRoaXMudXNlckRhdGEuZHJhZ1N0YXJ0UG9zaXRpb249bmV3IGEuTWF0aC5SZWN0KHRoaXMucmVjdCksdGhpcy51c2VyRGF0YS5kcmFnU3RhcnRNb3VzZVBvc2l0aW9uPW5ldyBhLk1hdGguRG90KGUpO3ZhciBmPW5ldyBhLk1hdGguRG90KGUpO2M9ZixkPW5ldyBhLk1hdGguUmVjdChiLnJlY3QpO2Zvcih2YXIgZz0xO2c8PTQ7ZysrKWlmKGYuaXNJblJlY3QodGhpc1tcImN0cmxSZWN0XCIrZ10pKXJldHVybiB0aGlzLnVzZXJEYXRhLmN0cmxTdGFydD1nLG51bGx9KSx0aGlzLmFkZExpc3RlbmVyKFwiZHJhZ2dpbmdcIixmdW5jdGlvbihhKXt2YXIgYixlLGYsZyxoPXRoaXMudXNlckRhdGEuZHJhZ1N0YXJ0UG9zaXRpb24saT10aGlzLnVzZXJEYXRhLmRyYWdTdGFydE1vdXNlUG9zaXRpb247aWYodGhpcy51c2VyRGF0YS5jdHJsU3RhcnQ8PTQmJnRoaXMudXNlckRhdGEuY3RybFN0YXJ0Pj0xPygxPT09dGhpcy51c2VyRGF0YS5jdHJsU3RhcnQmJihiPWEueC0oaS54LWgueCksZT1hLnktKGkueS1oLnkpLGY9aC53aWR0aC0oYS54LWgueCksZz1oLmhlaWdodC0oYS55LWgueSksYjw9aC54K2gud2lkdGgtMip0aGlzLmN0cmxTaXplJiYodGhpcy5yZWN0Lng9YiksZTw9aC55K2guaGVpZ2h0LTIqdGhpcy5jdHJsU2l6ZSYmKHRoaXMucmVjdC55PWUpKSwyPT09dGhpcy51c2VyRGF0YS5jdHJsU3RhcnQmJihiPWgueCxlPWEueS0oaS55LWgueSksZj1hLngtaC54KyhoLndpZHRoK2gueC1pLngpLGc9aC5oZWlnaHQtKGEueS1oLnkpLHRoaXMucmVjdC54PWIsZTw9aC55K2guaGVpZ2h0LTIqdGhpcy5jdHJsU2l6ZSYmKHRoaXMucmVjdC55PWUpKSwzPT09dGhpcy51c2VyRGF0YS5jdHJsU3RhcnQmJihiPWEueC0oaS54LWgueCksZT1oLnksZj1oLndpZHRoLShhLngtaC54KSxnPWEueS1oLnkrKGguaGVpZ2h0K2gueS1pLnkpLGI8PWgueCtoLndpZHRoLTIqdGhpcy5jdHJsU2l6ZSYmKHRoaXMucmVjdC54PWIpLHRoaXMucmVjdC55PWUpLDQ9PT10aGlzLnVzZXJEYXRhLmN0cmxTdGFydCYmKHRoaXMucmVjdC54PWgueCx0aGlzLnJlY3QueT1oLnksdGhpcy5yZWN0LndpZHRoPWEueC1oLngrKGgueCtoLndpZHRoLWkueCksdGhpcy5yZWN0LmhlaWdodD1hLnktaC55KyhoLnkraC5oZWlnaHQtaS55KSksZj49Mip0aGlzLmN0cmxTaXplJiYodGhpcy5yZWN0LndpZHRoPWYpLGc+PTIqdGhpcy5jdHJsU2l6ZSYmKHRoaXMucmVjdC5oZWlnaHQ9ZykpOih0aGlzLnJlY3QueD1kLngrYS54LWMueCx0aGlzLnJlY3QueT1kLnkrYS55LWMueSksdGhpcy5yZWN0LndpZHRoPD0yKnRoaXMuY3RybFNpemUmJih0aGlzLnJlY3Qud2lkdGg9Mip0aGlzLmN0cmxTaXplKSx0aGlzLnJlY3QuaGVpZ2h0PD0yKnRoaXMuY3RybFNpemUmJih0aGlzLnJlY3QuaGVpZ2h0PTIqdGhpcy5jdHJsU2l6ZSksIXRoaXMuZW5hYmxlRHJhZ091dCl7dmFyIGo9dGhpcy5iZWxvbmdUby55Y2NJbnN0YW5jZS5nZXRTdGFnZVdpZHRoKCksaz10aGlzLmJlbG9uZ1RvLnljY0luc3RhbmNlLmdldFN0YWdlSGVpZ2h0KCk7dGhpcy5yZWN0Lng8PTAmJih0aGlzLnJlY3QueD0wKSx0aGlzLnJlY3QueTw9MCYmKHRoaXMucmVjdC55PTApLHRoaXMucmVjdC54K3RoaXMucmVjdC53aWR0aD49aiYmKHRoaXMucmVjdC54PWotdGhpcy5yZWN0LndpZHRoKSx0aGlzLnJlY3QueSt0aGlzLnJlY3QuaGVpZ2h0Pj1rJiYodGhpcy5yZWN0Lnk9ay10aGlzLnJlY3QuaGVpZ2h0KX10aGlzLmJlbG9uZ1RvLnljY0luc3RhbmNlLmxheWVyTWFuYWdlci5yZVJlbmRlckFsbExheWVyVG9TdGFnZSgpfSksdGhpcy5hZGRMaXN0ZW5lcihcImRyYWdlbmRcIixmdW5jdGlvbihhKXtiLnNob3dCdG5zKCEwKX0pfSxhLlVJLkNyb3BSZWN0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlY3Q7dGhpcy5jdHguc2F2ZSgpLHRoaXMuY3R4LmZpbGxTdHlsZT10aGlzLmZpbGxTdHlsZSx0aGlzLmN0eC5zdHJva2VTdHlsZT10aGlzLnN0cm9rZVN0eWxlLHRoaXMuY3R4LmJlZ2luUGF0aCgpLHRoaXMuY3R4LnJlY3QoYS54LGEueSxhLndpZHRoLGEuaGVpZ2h0KSx0aGlzLmN0eC5jbG9zZVBhdGgoKSx0aGlzLmZpbGw/dGhpcy5jdHguZmlsbCgpOnRoaXMuY3R4LnN0cm9rZSgpLHRoaXMuY3R4LmJlZ2luUGF0aCgpLHRoaXMuY3R4LnJlY3QodGhpcy5jdHJsUmVjdDEueCx0aGlzLmN0cmxSZWN0MS55LHRoaXMuY3RybFJlY3QxLndpZHRoLHRoaXMuY3RybFJlY3QxLmhlaWdodCksdGhpcy5jdHgucmVjdCh0aGlzLmN0cmxSZWN0Mi54LHRoaXMuY3RybFJlY3QyLnksdGhpcy5jdHJsUmVjdDIud2lkdGgsdGhpcy5jdHJsUmVjdDIuaGVpZ2h0KSx0aGlzLmN0eC5yZWN0KHRoaXMuY3RybFJlY3QzLngsdGhpcy5jdHJsUmVjdDMueSx0aGlzLmN0cmxSZWN0My53aWR0aCx0aGlzLmN0cmxSZWN0My5oZWlnaHQpLHRoaXMuY3R4LnJlY3QodGhpcy5jdHJsUmVjdDQueCx0aGlzLmN0cmxSZWN0NC55LHRoaXMuY3RybFJlY3Q0LndpZHRoLHRoaXMuY3RybFJlY3Q0LmhlaWdodCksdGhpcy5jdHguY2xvc2VQYXRoKCksdGhpcy5jdHguZmlsbCgpLHRoaXMuY3R4LnJlc3RvcmUoKSx0aGlzLmN0eC5zYXZlKCksdGhpcy5jdHguYmVnaW5QYXRoKCksdGhpcy5jdHguZmlsbFN0eWxlPVwiYmx1ZVwiLHRoaXMuY3R4LmZvbnQ9XCJub3JtYWwgbm9ybWFsIGJvbGQgMTRweCBBcmlhbFwiLHRoaXMuY3R4LmZpbGxUZXh0KHRoaXMubmFtZSxhLngrMTAsYS55KzEwKSx0aGlzLmN0eC5jbG9zZVBhdGgoKSx0aGlzLmN0eC5yZXN0b3JlKCl9LGEuVUkuQ3JvcFJlY3QucHJvdG90eXBlLnJlbW92ZVNlbGY9ZnVuY3Rpb24oKXt0aGlzLmJlbG9uZ1RvLnJlbW92ZVVJKHRoaXMpLHRoaXMuYnRucy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EucmVtb3ZlU2VsZigpfSl9fShZY2MpLGZ1bmN0aW9uKGEpe2EuVUkuU2luZ2xlTGluZVRleHQ9ZnVuY3Rpb24oYil7YS5VSS5Qb2x5Z29uLmNhbGwodGhpcyxiKSx0aGlzLnljY0NsYXNzPWEuVUkuU2luZ2xlTGluZVRleHQsdGhpcy5kaXNwbGF5Q29udGVudD1cIlwiLHRoaXMuY29udGVudD1cIlwiLHRoaXMuZm9udFNpemU9XCIxNnB4XCIsdGhpcy5maWxsPSEwLHRoaXMuY29sb3I9XCJibGFja1wiLHRoaXMueEFsaWduPVwibGVmdFwiLHRoaXMueUFsaWduPVwiY2VudGVyXCIsdGhpcy5vdmVyZmxvdz1cImF1dG9cIix0aGlzLmV4dGVuZChiKX0sYS51dGlscy5tZXJnZU9iamVjdChhLlVJLlNpbmdsZUxpbmVUZXh0LnByb3RvdHlwZSxhLlVJLlBvbHlnb24ucHJvdG90eXBlKSxhLlVJLlNpbmdsZUxpbmVUZXh0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hLlVJLlNpbmdsZUxpbmVUZXh0LGEuVUkuU2luZ2xlTGluZVRleHQucHJvdG90eXBlLmNvbXB1dGVVSVByb3BzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPXRoaXMuY3R4Q2FjaGUsYz10aGlzLnJlY3QsZD0oYy54KnRoaXMuZHBpLGMueSp0aGlzLmRwaSxjLndpZHRoKnRoaXMuZHBpKTtjLmhlaWdodCp0aGlzLmRwaTt0aGlzLl9zZXRDdHhQcm9wcyhhKTt2YXIgZT1iLm1lYXN1cmVUZXh0KHRoaXMuY29udGVudCkud2lkdGg7dGhpcy5kaXNwbGF5Q29udGVudD10aGlzLmNvbnRlbnQsXCJoaWRkZW5cIj09PXRoaXMub3ZlcmZsb3c/ZT5kJiYoYS5kaXNwbGF5Q29udGVudD1hLmdldE1heENvbnRlbnRJbldpZHRoKHRoaXMuY29udGVudCxkKSk6XCJhdXRvXCI9PT10aGlzLm92ZXJmbG93JiYoZT5kJiYodGhpcy5yZWN0LndpZHRoPWUvdGhpcy5kcGkpLHBhcnNlSW50KHRoaXMuZm9udFNpemUpPnRoaXMucmVjdC5oZWlnaHQmJih0aGlzLnJlY3QuaGVpZ2h0PXBhcnNlSW50KHRoaXMuZm9udFNpemUpKSksdGhpcy5jb29yZGluYXRlcz10aGlzLnJlY3QuZ2V0VmVydGljZXMoKSx0aGlzLng9dGhpcy5yZWN0LngsdGhpcy55PXRoaXMucmVjdC55fSxhLlVJLlNpbmdsZUxpbmVUZXh0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcztpZihiPWJ8fGMuY3R4Q2FjaGUsIWIpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIltZY2MgZXJyb3JdOlwiLFwiY3R4IGlzIG51bGwgIVwiKTtjLmJlbG9uZ1RvLl9zZXRDdHhQcm9wcyhjLGIpO3ZhciBkLGUsZj10aGlzLmJlbG9uZ1RvLnljY0luc3RhbmNlLmdldFN5c3RlbUluZm8oKS5kZXZpY2VQaXhlbFJhdGlvLGc9cGFyc2VJbnQoYy5mb250U2l6ZSkqZixoPXRoaXMsaT10aGlzLmdldEFic29sdXRlUG9zaXRpb25SZWN0KCk7aT1uZXcgYS5NYXRoLlJlY3QoaS54KmYsaS55KmYsaS53aWR0aCpmLGkuaGVpZ2h0KmYpLGQ9aS54O3ZhciBqPWIubWVhc3VyZVRleHQodGhpcy5kaXNwbGF5Q29udGVudCkud2lkdGg7aWYoXCJjZW50ZXJcIj09PXRoaXMueEFsaWduJiYoZCs9KGkud2lkdGgtaikvMiksXCJyaWdodFwiPT09dGhpcy54QWxpZ24mJihkKz1pLndpZHRoLWopLGU9aS55LGc+aS5oZWlnaHQpcmV0dXJuIGNvbnNvbGUud2FybihcIltZY2Mgd2FybmluZ10gOiBcIixcIuihjOmrmOS4jeWkn++8jOaIluiAheaWh+Wtl+WkquWkp++8gVwiLGgpO1wiY2VudGVyXCI9PT1oLnlBbGlnbiYmKGU9ZStpLmhlaWdodC8yLWcvMiksYi5zYXZlKCk7dmFyIGs9dGhpcy50cmFuc2Zvcm1Ub0Fic29sdXRlKHt4OnRoaXMuYW5jaG9yWCx5OnRoaXMuYW5jaG9yWX0pO2IudHJhbnNsYXRlKGsueCp0aGlzLmRwaSxrLnkqdGhpcy5kcGkpLGIucm90YXRlKHRoaXMucm90YXRpb24qTWF0aC5QSS8xODApLGIudHJhbnNsYXRlKC1rLngqdGhpcy5kcGksLWsueSp0aGlzLmRwaSksYi5maWxsU3R5bGU9aC5jb2xvcixiLnN0cm9rZVN0eWxlPWguY29sb3IsYi5maWxsVGV4dChjLmRpc3BsYXlDb250ZW50LGQsZSksYi5yZXN0b3JlKCl9fShZY2MpLGZ1bmN0aW9uKGEpe2EuVUkuU2Nyb2xsZXJSZWN0PWZ1bmN0aW9uKGIpe2EuVUkuUG9seWdvbi5jYWxsKHRoaXMsYiksdGhpcy55Y2NDbGFzcz1hLlVJLlNjcm9sbGVyUmVjdCx0aGlzLnNlbGZSZW5kZXI9ITEsdGhpcy5jb250ZW50Vz0wLHRoaXMuY29udGVudEg9MCx0aGlzLmVuYWJsZVN3aXBlPSExLHRoaXMuc3dpcGVGcmFtZUNvdW50PTEwLHRoaXMuc3dpcGVBY2NlbGVyYXRpb249LjUsdGhpcy5zd2lwZUluaXRTcGVlZD0yMCx0aGlzLmV4dGVuZChiKSx0aGlzLmdob3N0PSEwLHRoaXMuX3dyYXBwZXI9bnVsbCx0aGlzLl9ldmVudFdyYXBwZXI9bnVsbCx0aGlzLnN0b3BFdmVudEJ1YmJsZVVwPSExLHRoaXMuX29uQWRkZWQ9ZnVuY3Rpb24oKXt0aGlzLl9pbml0V3JhcHBlclJlY3QoKSx0aGlzLl9pbml0RXZlbnQoKX0sdGhpcy5fb25DaGlsZHJlblJlbmRlcmVkPWZ1bmN0aW9uKCl7dGhpcy5jdHgucmVzdG9yZSgpfX0sYS51dGlscy5tZXJnZU9iamVjdChhLlVJLlNjcm9sbGVyUmVjdC5wcm90b3R5cGUsYS5VSS5Qb2x5Z29uLnByb3RvdHlwZSksYS5VSS5TY3JvbGxlclJlY3QucHJvdG90eXBlLmNvbXB1dGVVSVByb3BzPWZ1bmN0aW9uKCl7dGhpcy5jb29yZGluYXRlcz10aGlzLnJlY3QuZ2V0VmVydGljZXMoKSx0aGlzLng9dGhpcy5yZWN0LngsdGhpcy55PXRoaXMucmVjdC55fSxhLlVJLlNjcm9sbGVyUmVjdC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YT1hfHxiLmN0eENhY2hlLGEuc2F2ZSgpLHRoaXMucmVuZGVyUGF0aChhKSxhLmNsaXAoKX0sYS5VSS5TY3JvbGxlclJlY3QucHJvdG90eXBlLmFkZENoaWxkPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmJlbG9uZ1RvJiZhLmluaXQodGhpcy5iZWxvbmdUbyksYT09PXRoaXMuX3dyYXBwZXJ8fGE9PT10aGlzLl9ldmVudFdyYXBwZXI/dGhpcy5hZGRDaGlsZFRyZWUoYSk6dGhpcy5fd3JhcHBlci5hZGRDaGlsZFRyZWUoYSksYX0sYS5VSS5TY3JvbGxlclJlY3QucHJvdG90eXBlLl9pbml0RXZlbnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKCl7Yy5zZWxmUmVuZGVyJiZjLmJlbG9uZ1RvJiZjLmJlbG9uZ1RvLnljY0luc3RhbmNlJiZjLmJlbG9uZ1RvLnljY0luc3RhbmNlLmxheWVyTWFuYWdlci5yZVJlbmRlckFsbExheWVyVG9TdGFnZSgpfXZhciBjPXRoaXM7aWYoIWMuYmVsb25nVG8pcmV0dXJuIGNvbnNvbGUubG9nKFwic2Nyb2xsZXIgbmVlZCBhZGQgdG8gc3RhZ2UhXCIpO3ZhciBkPWMuYmVsb25nVG8ueWNjSW5zdGFuY2UudGlja2VyLGU9e3JlY3Q6bnVsbCxzdGFydEV2ZW50Om51bGwsdGlja2VySXNSdW5uaW5nOiExfSxmPXtyZWN0Om51bGwsZW5kRXZlbnQ6bnVsbH0sZz0hMTt0aGlzLl9ldmVudFdyYXBwZXIuYWRkTGlzdGVuZXIoXCJ0YXBcIixmdW5jdGlvbihhKXt2YXIgYj1jLmJlbG9uZ1RvLmdldFVJTGlzdEZyb21Qb2ludGVyKGEse3VpSXNTaG93OiEwLHVpSXNHaG9zdDohMX0pO2I9Yi5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2hvdyYmIWEuZ2hvc3R9KSxiLmxlbmd0aDw9MXx8YltiLmxlbmd0aC0yXS50cmlnZ2VyVUlFdmVudEJ1YmJsZVVwKFwidGFwXCIsYS54LGEueSl9KSx0aGlzLl9ldmVudFdyYXBwZXIuYWRkTGlzdGVuZXIoXCJkcmFnc3RhcnRcIixmdW5jdGlvbihmKXtlLnRpY2tlcklzUnVubmluZz1kLl9pc1J1bm5pbmcsZS5zdGFydEV2ZW50PWYsZS5yZWN0PW5ldyBhLk1hdGguUmVjdChjLl93cmFwcGVyLnJlY3QpLGc9ITAsZC5zdGFydCgpLGQuYWRkRnJhbWVMaXN0ZW5lcihiKX0pLHRoaXMuX2V2ZW50V3JhcHBlci5hZGRMaXN0ZW5lcihcImRyYWdnaW5nXCIsZnVuY3Rpb24oYSl7dmFyIGI9YS54LWUuc3RhcnRFdmVudC54LGQ9YS55LWUuc3RhcnRFdmVudC55O2c9ITAsYy5fd3JhcHBlci5yZWN0Lng9ZS5yZWN0LngrYixjLl93cmFwcGVyLnJlY3QueT1lLnJlY3QueStkLGMuX2NoZWNrUmFuZ2VMaW1pdCgpfSksdGhpcy5fZXZlbnRXcmFwcGVyLmFkZExpc3RlbmVyKFwiZHJhZ2VuZFwiLGZ1bmN0aW9uKGUpe2YuZW5kRXZlbnQ9ZSxmLnJlY3Q9bmV3IGEuTWF0aC5SZWN0KGMuX3dyYXBwZXIucmVjdCksZC5yZW1vdmVGcmFtZUxpc3RlbmVyKGIpfSksdGhpcy5fZXZlbnRXcmFwcGVyLmFkZExpc3RlbmVyKFwic3dpcGVcIixmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7cmV0dXJuIGwrKyxrPWwqKGktYy5zd2lwZUFjY2VsZXJhdGlvbipsKSxsPj1qfHxrPD0wfHxnP3ZvaWQgZC5yZW1vdmVGcmFtZUxpc3RlbmVyKGIpOihcImxlZnRcIiE9PWUmJlwicmlnaHRcIiE9PWV8fChjLl93cmFwcGVyLnJlY3QueD1mLnJlY3QueCtoW2VdKmspLFwidXBcIiE9PWUmJlwiZG93blwiIT09ZXx8KGMuX3dyYXBwZXIucmVjdC55PWYucmVjdC55K2hbZV0qayksYy5fY2hlY2tSYW5nZUxpbWl0KCksdm9pZChjLnNlbGZSZW5kZXImJmMuYmVsb25nVG8mJmMuYmVsb25nVG8ueWNjSW5zdGFuY2UmJmMuYmVsb25nVG8ueWNjSW5zdGFuY2UubGF5ZXJNYW5hZ2VyLnJlUmVuZGVyQWxsTGF5ZXJUb1N0YWdlKCkpKX1pZighYy5lbmFibGVTd2lwZSl7dmFyIGU9YS5vcmlnaW5FdmVudC5zd2lwZURpcmVjdGlvbixoPXtsZWZ0Oi0xLHJpZ2h0OjEsdXA6LTEsZG93bjoxfSxpPWMuc3dpcGVJbml0U3BlZWQsaj1jLnN3aXBlRnJhbWVDb3VudCxrPTAsbD0wO2c9ITEsZC5hZGRGcmFtZUxpc3RlbmVyKGIpfX0pfSxhLlVJLlNjcm9sbGVyUmVjdC5wcm90b3R5cGUuX2luaXRXcmFwcGVyUmVjdD1mdW5jdGlvbigpe3RoaXMuX3dyYXBwZXI9bmV3IGEuVUkuUmVjdCh7bmFtZTpcIua7muWKqOWMulVJ5a655ZmoXCIsb3BhY2l0eTowLHJlY3Q6bmV3IGEuTWF0aC5SZWN0KDAsMCx0aGlzLnJlY3Qud2lkdGgsdGhpcy5yZWN0LmhlaWdodCksZ2hvc3Q6ITB9KSx0aGlzLl9ldmVudFdyYXBwZXI9bmV3IGEuVUkuUmVjdCh7bmFtZTpcIua7muWKqOWMuuS6i+S7tuWuueWZqFwiLG9wYWNpdHk6MCxyZWN0Om5ldyBhLk1hdGguUmVjdCh0aGlzLnJlY3QueCx0aGlzLnJlY3QueSx0aGlzLnJlY3Qud2lkdGgsdGhpcy5yZWN0LmhlaWdodCksZ2hvc3Q6ITF9KSx0aGlzLmFkZENoaWxkKHRoaXMuX3dyYXBwZXIpLHRoaXMuYmVsb25nVG8uYWRkVUkodGhpcy5fZXZlbnRXcmFwcGVyKX0sYS5VSS5TY3JvbGxlclJlY3QucHJvdG90eXBlLl9jaGVja1JhbmdlTGltaXQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jb250ZW50Vy1hLnJlY3Qud2lkdGgsYz1hLmNvbnRlbnRILWEucmVjdC5oZWlnaHQ7YS5fd3JhcHBlci5yZWN0Lng9YS5fd3JhcHBlci5yZWN0Lng+PTA/MDphLl93cmFwcGVyLnJlY3QueCxhLl93cmFwcGVyLnJlY3QueT1hLl93cmFwcGVyLnJlY3QueT49MD8wOmEuX3dyYXBwZXIucmVjdC55LGEuX3dyYXBwZXIucmVjdC54PWEuX3dyYXBwZXIucmVjdC54PC1iPy1iOmEuX3dyYXBwZXIucmVjdC54LGEuX3dyYXBwZXIucmVjdC55PWEuX3dyYXBwZXIucmVjdC55PC1jPy1jOmEuX3dyYXBwZXIucmVjdC55LGEuY29udGVudFc8PWEucmVjdC53aWR0aCYmKGEuX3dyYXBwZXIucmVjdC54PTApLGEuY29udGVudEg8PWEucmVjdC5oZWlnaHQmJihhLl93cmFwcGVyLnJlY3QueT0wKX19KFljYyksZnVuY3Rpb24oYSl7YS5VSS5Db21wb25lbnRCdXR0b249ZnVuY3Rpb24oYil7YS5VSS5CYXNlLmNhbGwodGhpcyxiKSx0aGlzLnljY0NsYXNzPWEuVUkuQ29tcG9uZW50QnV0dG9uLHRoaXMucmVjdEJvcmRlcldpZHRoPTEsdGhpcy5yZWN0Qm9yZGVyQ29sb3I9XCIjMDAwXCIsdGhpcy5iYWNrZ3JvdW5kSW1hZ2VSZXM9bnVsbCx0aGlzLnRleHQ9XCJcIix0aGlzLnRleHRDb2xvcj1cImJsYWNrXCIsdGhpcy5fX2JnVUk9bnVsbCx0aGlzLl9fdGV4dFVJPW51bGwsdGhpcy5leHRlbmQoYiksdGhpcy5fX2NvbXBvbmVudEluaXQoKX0sYS51dGlscy5tZXJnZU9iamVjdChhLlVJLkNvbXBvbmVudEJ1dHRvbi5wcm90b3R5cGUsYS5VSS5CYXNlLnByb3RvdHlwZSksYS5VSS5Db21wb25lbnRCdXR0b24ucHJvdG90eXBlLmNvbnN0cnVjdG9yPWEuVUkuQ29tcG9uZW50QnV0dG9uLGEuVUkuQ29tcG9uZW50QnV0dG9uLnByb3RvdHlwZS5fX2NvbXBvbmVudEluaXQ9ZnVuY3Rpb24oKXt0aGlzLmJhY2tncm91bmRJbWFnZVJlcyYmKHRoaXMuX19iZ1VJPW5ldyBhLlVJLkltYWdlKHtyZWN0Om5ldyBhLk1hdGguUmVjdCgwLDAsdGhpcy5yZWN0LndpZHRoLHRoaXMucmVjdC5oZWlnaHQpLGZpbGxNb2RlOlwic2NhbGVcIixyZXM6dGhpcy5iYWNrZ3JvdW5kSW1hZ2VSZXMsc3RvcEV2ZW50QnViYmxlVXA6ITF9KSx0aGlzLmFkZENoaWxkKHRoaXMuX19iZ1VJKSksXCJcIiE9PXRoaXMudGV4dCYmKHRoaXMuX190ZXh0VUk9bmV3IGEuVUkuU2luZ2xlTGluZVRleHQoe3JlY3Q6bmV3IGEuTWF0aC5SZWN0KDAsMCx0aGlzLnJlY3Qud2lkdGgsdGhpcy5yZWN0LmhlaWdodCksY29udGVudDp0aGlzLnRleHQsY29sb3I6dGhpcy50ZXh0Q29sb3IseEFsaWduOlwiY2VudGVyXCIsc3RvcEV2ZW50QnViYmxlVXA6ITF9KSx0aGlzLmFkZENoaWxkKHRoaXMuX190ZXh0VUkpKX0sYS5VSS5CYXNlLnByb3RvdHlwZS5jb21wdXRlVUlQcm9wcz1mdW5jdGlvbigpe3RoaXMuX19iZ1VJJiYodGhpcy5fX2JnVUkucmVjdC53aWR0aD10aGlzLnJlY3Qud2lkdGgsdGhpcy5fX2JnVUkucmVjdC5oZWlnaHQ9dGhpcy5yZWN0LmhlaWdodCx0aGlzLl9fYmdVSS5yZXM9dGhpcy5iYWNrZ3JvdW5kSW1hZ2VSZXMpLHRoaXMuX190ZXh0VUkmJih0aGlzLl9fdGV4dFVJLnJlY3Qud2lkdGg9dGhpcy5yZWN0LndpZHRoLHRoaXMuX190ZXh0VUkucmVjdC5oZWlnaHQ9dGhpcy5yZWN0LmhlaWdodCx0aGlzLl9fdGV4dFVJLmNvbnRlbnQ9dGhpcy50ZXh0LHRoaXMuX190ZXh0VUkuY29sb3I9dGhpcy50ZXh0Q29sb3IpfX0oWWNjKSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd3gmJihZY2MudXRpbHMuaXNNb2JpbGU9ZnVuY3Rpb24oKXtyZXR1cm4gY29uc29sZS5sb2coXCJ3eCBpc01vYmlsZVwiKSwhMH0sXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHBlcmZvcm1hbmNlJiYocGVyZm9ybWFuY2Uubm93PWZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCl9KSxZY2MucHJvdG90eXBlLmdldFN5c3RlbUluZm89ZnVuY3Rpb24oKXt2YXIgYT13eC5nZXRTeXN0ZW1JbmZvU3luYygpO3JldHVybnttb2RlbDphLm1vZGVsLHBpeGVsUmF0aW86YS5waXhlbFJhdGlvLHdpbmRvd1dpZHRoOmEud2luZG93V2lkdGgsd2luZG93SGVpZ2h0OmEud2luZG93SGVpZ2h0LHNjcmVlbldpZHRoOmEuc2NyZWVuV2lkdGgsc2NyZWVuSGVpZ2h0OmEuc2NyZWVuSGVpZ2h0LGRldmljZVBpeGVsUmF0aW86YS5kZXZpY2VQaXhlbFJhdGlvfHwxfX0pLFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPVljYztlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSlkZWZpbmUoXCJZY2NcIixZY2MpO2Vsc2V7dmFyIGc7Zz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsZy5ZY2M9WWNjfVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9eWNjLm1pbi5qcy5tYXAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n')},,function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(global) {/* harmony import */ var _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * 裁剪类的封装\n * @requires {Ycc} 依赖Ycc库\n * @author xiaohei\n */\n\n\n\n/**\n * 裁剪图片\n * @param {*} imageUrl 图片地址\n * @param {*} options 配置参数\n * @param {*} options.canvasDom canvas容器\n * @param {*} options.wrapW 可视区宽度\n * @param {*} options.wrapH 可视区高度\n * @param {*} options.cropW 裁剪区的高\n * @param {*} options.cropH 裁剪区高度\n * @param {*} options.callback 完成/取消裁剪的回调\n * @constructor\n */\nfunction Cropper(imageUrl,options){\n    // 默认参数\n    options = _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.utils.extend({\n        appenv:'h5',\n        canvasDom:null,\n        wrapW:800,\n        wrapH:600,\n        cropW:200,\n        cropH:200,\n        maskColor:'rgba(0,0,0,0.6)',\n        lineColor:'#fff',\n        callback: function(){}\n    },options);\n\n    this.options = options;\n    this.imageUrl = imageUrl;\n    this.ycc = new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a({\n        appenv:options.appenv,\n        // debugDrawContainer:true\n    });\n    this.ycc.bindCanvas(this.ycc.createCanvas({canvasDom:options.canvasDom,width:options.wrapW,height:options.wrapH,dpiAdaptation:true}));\n    this.layer = this.ycc.layerManager.newLayer({enableEventManager:true});\n\n    // 图片UI\n    this.imageUI = null;\n\n    this.init();\n}\n\nCropper.prototype.init = function(){\n    var that = this;\n    this.ycc.loader.loadResOneByOne([{url:this.imageUrl}],function (resArr) {\n        console.log(\"loaded!\",this);\n        that._onImageLoad(resArr[0]);\n    },function (image,err,index) {\n        console.log('progress',index,image);\n    });\n\n    this.ycc.ticker.addFrameListener(function(){\n        that.ycc.layerManager.reRenderAllLayerToStage();\n    })\n\n    this.ycc.ticker.start(60);\n}\n\nCropper.prototype._onImageLoad = function(image){\n    this._addImage(image);\n    this._addCrop();\n}\n\nCropper.prototype._addCrop = function(){\n    var layer = this.layer;\n    layer.addUI(new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.UI.Rect({\n        rect:new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Rect(0,0,this.options.wrapW,this.options.wrapH/2-this.options.cropH/2),\n        color:this.options.maskColor,\n        ghost:true,\n    }));\n\n    layer.addUI(new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.UI.Rect({\n        rect:new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Rect(0,this.options.wrapH-(this.options.wrapH/2-this.options.cropH/2),this.options.wrapW,this.options.wrapH/2-this.options.cropH/2),\n        color:this.options.maskColor,\n        ghost:true,\n    }));\n\n    layer.addUI(new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.UI.Rect({\n        rect:new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Rect(0,this.options.wrapH/2-this.options.cropH/2,this.options.wrapW/2-this.options.cropW/2,this.options.cropH),\n        color:this.options.maskColor,\n        ghost:true,\n    }));\n    layer.addUI(new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.UI.Rect({\n        rect:new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Rect(this.options.wrapW-(this.options.wrapW/2-this.options.cropW/2),this.options.wrapH/2-this.options.cropH/2,this.options.wrapW/2-this.options.cropW/2,this.options.cropH),\n        color:this.options.maskColor,\n        ghost:true,\n    }));\n\n    // 横纵线条 1\n    layer.addUI(new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.UI.Rect({\n        rect:new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Rect(0,this.options.wrapH/2-this.options.cropH/2,this.options.wrapW,1),\n        color:this.options.lineColor,\n        ghost:true,\n    }));\n    // 横纵线条 2\n    layer.addUI(new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.UI.Rect({\n        rect:new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Rect(this.options.wrapW/2-this.options.cropW/2,0,1,this.options.wrapH),\n        color:this.options.lineColor,\n        ghost:true,\n    }));\n    // 横纵线条 3\n    layer.addUI(new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.UI.Rect({\n        rect:new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Rect(this.options.wrapW/2+this.options.cropW/2,0,1,this.options.wrapH),\n        color:this.options.lineColor,\n        ghost:true,\n    }));\n    // 横纵线条 4\n    layer.addUI(new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.UI.Rect({\n        rect:new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Rect(0,this.options.wrapH/2+this.options.cropH/2,this.options.wrapW,1),\n        color:this.options.lineColor,\n        ghost:true,\n    }));\n\n    // 边框\n    layer.addUI(new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.UI.Rect({\n        rect:new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Rect((this.options.wrapW/2-this.options.cropW/2),this.options.wrapH/2-this.options.cropH/2,this.options.cropW,this.options.cropH),\n        rectBorderWidth:1,\n        rectBorderColor:this.options.lineColor,\n        color:'transparent',\n        ghost:true,\n    }));\n}\n\n\n// 添加图片\nCropper.prototype._addImage = function(image){\n    var ycc = this.ycc;\n    var cropper = this;\n\n    var ratioW = image.res.width/this.options.wrapW;\n    var ratioH = image.res.height/this.options.wrapH;\n\n    var scaleRatio = 1;\n    var imageRect = null;\n    if(ratioW<ratioH){\n        scaleRatio = ratioH;\n        imageRect = new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Rect((this.options.wrapW-image.res.width/scaleRatio)/2,0,image.res.width/scaleRatio,image.res.height/scaleRatio);\n    }else{\n        scaleRatio = ratioW;\n        imageRect = new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Rect(0,(this.options.wrapH-image.res.height/scaleRatio)/2,image.res.width/scaleRatio,image.res.height/scaleRatio);\n    }\n\n    console.log('scaleRatio',scaleRatio,ratioW<ratioH)\n    this.imageUI = new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.UI.Image({\n        rect:imageRect,\n        fillMode:'scale',\n        res:image.res\n    });\n    // 添加图片至图层\n    this.layer.addUI(this.imageUI);\n\n\n    // 缩放前的临时区域\n    var tempRect = null;\n    // 监听手势事件\n    this.ycc.gesture.ondragstart = function(e) {\n        console.log(e,1111);\n        this.userData = {\n            startPos:new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Dot(e),\n            startRect:new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Rect(cropper.imageUI.rect)\n        }\n    };\n    this.ycc.gesture.ondragging = function(e){\n        if(this.ismutiltouching) return;\n        if(!this.userData) return;\n\n        var startPos = this.userData.startPos;\n        var startRect = this.userData.startRect;\n        let deltaX = (e.x-startPos.x);\n        let deltaY = (e.y-startPos.y);\n        cropper.imageUI.rect.x = startRect.x+deltaX;\n        cropper.imageUI.rect.y = startRect.y+deltaY;\n\n        // 固定锚点在图片正中心\n        cropper.imageUI.anchorX = imageRect.x+imageRect.width/2;\n        cropper.imageUI.anchorY = imageRect.y+imageRect.height/2;\n    }\n    this.ycc.gesture.onmultistart = function(e){\n        tempRect = new _datagetter_cn_ycc__WEBPACK_IMPORTED_MODULE_0___default.a.Math.Rect(cropper.imageUI.rect); \n        // 将userdata设置成null 阻止缩放后立即响应拖拽\n        this.userData = null;\n    };\n    // 绑定缩放事件\n    this.ycc.gesture.onzoom = function(e){\n        // alert('zoom '+e.zoomRate);\n        var rate = e.zoomRate;\n        imageRect.width = tempRect.width*rate;\n        imageRect.height =tempRect.height*rate;\n\n        // 固定锚点在图片正中心\n        imageRect.x = tempRect.x-(imageRect.width-tempRect.width)/2;\n        imageRect.y = tempRect.y-(imageRect.height-tempRect.height)/2;\n    };\n    this.ycc.gesture.onrotate = function(e){\n        var angle = e.angle;\n\n        cropper.imageUI.anchorX = imageRect.x+imageRect.width/2;\n        cropper.imageUI.anchorY = imageRect.y+imageRect.height/2;\n        cropper.imageUI.rotation += angle;\n    };\n\n}\n\n/**\n * 获取imagedata\n * @param {*} canvasId canvas的ID 仅当appenv为wxapp时需要\n */\nCropper.prototype.getCropImage = function(canvasId){\n    var x = (this.options.wrapW/2-this.options.cropW/2);\n    var y = this.options.wrapH/2-this.options.cropH/2;\n    var width = this.options.cropW;\n    var height = this.options.cropH;\n\n    if(this.options.appenv==='wxapp') return wx.canvasToTempFilePath({\n        canvasId:canvasId,\n        canvas:this.ycc.canvasDom,\n        x:x,\n        y:y,\n        width:width,\n        height:height,\n        destWidth:width,\n        destHeight:height,\n        fileType:'jpg',\n        quality:1\n    })\n\n\n    var ycc = this.ycc;\n    return ycc.ctx.getImageData(x*this.ycc.dpi,y*this.ycc.dpi,width*this.ycc.dpi,height*this.ycc.dpi);\n};\n\n/**\n * 清空画布\n */\nCropper.prototype.clear = function(){\n    this.ycc.layerManager.deleteAllLayer();\n    this.ycc.ticker.stop();\n}\n\n\n\n///////////// 兼容es5模式\nvar g;\nif(typeof window!==\"undefined\"){g=window}\nelse if(typeof global!==\"undefined\"){g=global}\nelse if(typeof self!==\"undefined\"){g=self}\nelse{g=undefined}\ng.Cropper = Cropper;\n\n// 导出模块\n/* harmony default export */ __webpack_exports__[\"default\"] = (Cropper);\n\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(3)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9saWIuanM/MzRlOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOijgeWJquexu+eahOWwgeijhVxuICogQHJlcXVpcmVzIHtZY2N9IOS+nei1llljY+W6k1xuICogQGF1dGhvciB4aWFvaGVpXG4gKi9cblxuaW1wb3J0IFljYyBmcm9tICdAZGF0YWdldHRlci5jbi95Y2MnO1xuXG4vKipcbiAqIOijgeWJquWbvueJh1xuICogQHBhcmFtIHsqfSBpbWFnZVVybCDlm77niYflnLDlnYBcbiAqIEBwYXJhbSB7Kn0gb3B0aW9ucyDphY3nva7lj4LmlbBcbiAqIEBwYXJhbSB7Kn0gb3B0aW9ucy5jYW52YXNEb20gY2FudmFz5a655ZmoXG4gKiBAcGFyYW0geyp9IG9wdGlvbnMud3JhcFcg5Y+v6KeG5Yy65a695bqmXG4gKiBAcGFyYW0geyp9IG9wdGlvbnMud3JhcEgg5Y+v6KeG5Yy66auY5bqmXG4gKiBAcGFyYW0geyp9IG9wdGlvbnMuY3JvcFcg6KOB5Ymq5Yy655qE6auYXG4gKiBAcGFyYW0geyp9IG9wdGlvbnMuY3JvcEgg6KOB5Ymq5Yy66auY5bqmXG4gKiBAcGFyYW0geyp9IG9wdGlvbnMuY2FsbGJhY2sg5a6M5oiQL+WPlua2iOijgeWJqueahOWbnuiwg1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIENyb3BwZXIoaW1hZ2VVcmwsb3B0aW9ucyl7XG4gICAgLy8g6buY6K6k5Y+C5pWwXG4gICAgb3B0aW9ucyA9IFljYy51dGlscy5leHRlbmQoe1xuICAgICAgICBhcHBlbnY6J2g1JyxcbiAgICAgICAgY2FudmFzRG9tOm51bGwsXG4gICAgICAgIHdyYXBXOjgwMCxcbiAgICAgICAgd3JhcEg6NjAwLFxuICAgICAgICBjcm9wVzoyMDAsXG4gICAgICAgIGNyb3BIOjIwMCxcbiAgICAgICAgbWFza0NvbG9yOidyZ2JhKDAsMCwwLDAuNiknLFxuICAgICAgICBsaW5lQ29sb3I6JyNmZmYnLFxuICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oKXt9XG4gICAgfSxvcHRpb25zKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xuICAgIHRoaXMueWNjID0gbmV3IFljYyh7XG4gICAgICAgIGFwcGVudjpvcHRpb25zLmFwcGVudixcbiAgICAgICAgLy8gZGVidWdEcmF3Q29udGFpbmVyOnRydWVcbiAgICB9KTtcbiAgICB0aGlzLnljYy5iaW5kQ2FudmFzKHRoaXMueWNjLmNyZWF0ZUNhbnZhcyh7Y2FudmFzRG9tOm9wdGlvbnMuY2FudmFzRG9tLHdpZHRoOm9wdGlvbnMud3JhcFcsaGVpZ2h0Om9wdGlvbnMud3JhcEgsZHBpQWRhcHRhdGlvbjp0cnVlfSkpO1xuICAgIHRoaXMubGF5ZXIgPSB0aGlzLnljYy5sYXllck1hbmFnZXIubmV3TGF5ZXIoe2VuYWJsZUV2ZW50TWFuYWdlcjp0cnVlfSk7XG5cbiAgICAvLyDlm77niYdVSVxuICAgIHRoaXMuaW1hZ2VVSSA9IG51bGw7XG5cbiAgICB0aGlzLmluaXQoKTtcbn1cblxuQ3JvcHBlci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIHRoaXMueWNjLmxvYWRlci5sb2FkUmVzT25lQnlPbmUoW3t1cmw6dGhpcy5pbWFnZVVybH1dLGZ1bmN0aW9uIChyZXNBcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJsb2FkZWQhXCIsdGhpcyk7XG4gICAgICAgIHRoYXQuX29uSW1hZ2VMb2FkKHJlc0FyclswXSk7XG4gICAgfSxmdW5jdGlvbiAoaW1hZ2UsZXJyLGluZGV4KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwcm9ncmVzcycsaW5kZXgsaW1hZ2UpO1xuICAgIH0pO1xuXG4gICAgdGhpcy55Y2MudGlja2VyLmFkZEZyYW1lTGlzdGVuZXIoZnVuY3Rpb24oKXtcbiAgICAgICAgdGhhdC55Y2MubGF5ZXJNYW5hZ2VyLnJlUmVuZGVyQWxsTGF5ZXJUb1N0YWdlKCk7XG4gICAgfSlcblxuICAgIHRoaXMueWNjLnRpY2tlci5zdGFydCg2MCk7XG59XG5cbkNyb3BwZXIucHJvdG90eXBlLl9vbkltYWdlTG9hZCA9IGZ1bmN0aW9uKGltYWdlKXtcbiAgICB0aGlzLl9hZGRJbWFnZShpbWFnZSk7XG4gICAgdGhpcy5fYWRkQ3JvcCgpO1xufVxuXG5Dcm9wcGVyLnByb3RvdHlwZS5fYWRkQ3JvcCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIGxheWVyID0gdGhpcy5sYXllcjtcbiAgICBsYXllci5hZGRVSShuZXcgWWNjLlVJLlJlY3Qoe1xuICAgICAgICByZWN0Om5ldyBZY2MuTWF0aC5SZWN0KDAsMCx0aGlzLm9wdGlvbnMud3JhcFcsdGhpcy5vcHRpb25zLndyYXBILzItdGhpcy5vcHRpb25zLmNyb3BILzIpLFxuICAgICAgICBjb2xvcjp0aGlzLm9wdGlvbnMubWFza0NvbG9yLFxuICAgICAgICBnaG9zdDp0cnVlLFxuICAgIH0pKTtcblxuICAgIGxheWVyLmFkZFVJKG5ldyBZY2MuVUkuUmVjdCh7XG4gICAgICAgIHJlY3Q6bmV3IFljYy5NYXRoLlJlY3QoMCx0aGlzLm9wdGlvbnMud3JhcEgtKHRoaXMub3B0aW9ucy53cmFwSC8yLXRoaXMub3B0aW9ucy5jcm9wSC8yKSx0aGlzLm9wdGlvbnMud3JhcFcsdGhpcy5vcHRpb25zLndyYXBILzItdGhpcy5vcHRpb25zLmNyb3BILzIpLFxuICAgICAgICBjb2xvcjp0aGlzLm9wdGlvbnMubWFza0NvbG9yLFxuICAgICAgICBnaG9zdDp0cnVlLFxuICAgIH0pKTtcblxuICAgIGxheWVyLmFkZFVJKG5ldyBZY2MuVUkuUmVjdCh7XG4gICAgICAgIHJlY3Q6bmV3IFljYy5NYXRoLlJlY3QoMCx0aGlzLm9wdGlvbnMud3JhcEgvMi10aGlzLm9wdGlvbnMuY3JvcEgvMix0aGlzLm9wdGlvbnMud3JhcFcvMi10aGlzLm9wdGlvbnMuY3JvcFcvMix0aGlzLm9wdGlvbnMuY3JvcEgpLFxuICAgICAgICBjb2xvcjp0aGlzLm9wdGlvbnMubWFza0NvbG9yLFxuICAgICAgICBnaG9zdDp0cnVlLFxuICAgIH0pKTtcbiAgICBsYXllci5hZGRVSShuZXcgWWNjLlVJLlJlY3Qoe1xuICAgICAgICByZWN0Om5ldyBZY2MuTWF0aC5SZWN0KHRoaXMub3B0aW9ucy53cmFwVy0odGhpcy5vcHRpb25zLndyYXBXLzItdGhpcy5vcHRpb25zLmNyb3BXLzIpLHRoaXMub3B0aW9ucy53cmFwSC8yLXRoaXMub3B0aW9ucy5jcm9wSC8yLHRoaXMub3B0aW9ucy53cmFwVy8yLXRoaXMub3B0aW9ucy5jcm9wVy8yLHRoaXMub3B0aW9ucy5jcm9wSCksXG4gICAgICAgIGNvbG9yOnRoaXMub3B0aW9ucy5tYXNrQ29sb3IsXG4gICAgICAgIGdob3N0OnRydWUsXG4gICAgfSkpO1xuXG4gICAgLy8g5qiq57q157q/5p2hIDFcbiAgICBsYXllci5hZGRVSShuZXcgWWNjLlVJLlJlY3Qoe1xuICAgICAgICByZWN0Om5ldyBZY2MuTWF0aC5SZWN0KDAsdGhpcy5vcHRpb25zLndyYXBILzItdGhpcy5vcHRpb25zLmNyb3BILzIsdGhpcy5vcHRpb25zLndyYXBXLDEpLFxuICAgICAgICBjb2xvcjp0aGlzLm9wdGlvbnMubGluZUNvbG9yLFxuICAgICAgICBnaG9zdDp0cnVlLFxuICAgIH0pKTtcbiAgICAvLyDmqKrnurXnur/mnaEgMlxuICAgIGxheWVyLmFkZFVJKG5ldyBZY2MuVUkuUmVjdCh7XG4gICAgICAgIHJlY3Q6bmV3IFljYy5NYXRoLlJlY3QodGhpcy5vcHRpb25zLndyYXBXLzItdGhpcy5vcHRpb25zLmNyb3BXLzIsMCwxLHRoaXMub3B0aW9ucy53cmFwSCksXG4gICAgICAgIGNvbG9yOnRoaXMub3B0aW9ucy5saW5lQ29sb3IsXG4gICAgICAgIGdob3N0OnRydWUsXG4gICAgfSkpO1xuICAgIC8vIOaoque6tee6v+adoSAzXG4gICAgbGF5ZXIuYWRkVUkobmV3IFljYy5VSS5SZWN0KHtcbiAgICAgICAgcmVjdDpuZXcgWWNjLk1hdGguUmVjdCh0aGlzLm9wdGlvbnMud3JhcFcvMit0aGlzLm9wdGlvbnMuY3JvcFcvMiwwLDEsdGhpcy5vcHRpb25zLndyYXBIKSxcbiAgICAgICAgY29sb3I6dGhpcy5vcHRpb25zLmxpbmVDb2xvcixcbiAgICAgICAgZ2hvc3Q6dHJ1ZSxcbiAgICB9KSk7XG4gICAgLy8g5qiq57q157q/5p2hIDRcbiAgICBsYXllci5hZGRVSShuZXcgWWNjLlVJLlJlY3Qoe1xuICAgICAgICByZWN0Om5ldyBZY2MuTWF0aC5SZWN0KDAsdGhpcy5vcHRpb25zLndyYXBILzIrdGhpcy5vcHRpb25zLmNyb3BILzIsdGhpcy5vcHRpb25zLndyYXBXLDEpLFxuICAgICAgICBjb2xvcjp0aGlzLm9wdGlvbnMubGluZUNvbG9yLFxuICAgICAgICBnaG9zdDp0cnVlLFxuICAgIH0pKTtcblxuICAgIC8vIOi+ueahhlxuICAgIGxheWVyLmFkZFVJKG5ldyBZY2MuVUkuUmVjdCh7XG4gICAgICAgIHJlY3Q6bmV3IFljYy5NYXRoLlJlY3QoKHRoaXMub3B0aW9ucy53cmFwVy8yLXRoaXMub3B0aW9ucy5jcm9wVy8yKSx0aGlzLm9wdGlvbnMud3JhcEgvMi10aGlzLm9wdGlvbnMuY3JvcEgvMix0aGlzLm9wdGlvbnMuY3JvcFcsdGhpcy5vcHRpb25zLmNyb3BIKSxcbiAgICAgICAgcmVjdEJvcmRlcldpZHRoOjEsXG4gICAgICAgIHJlY3RCb3JkZXJDb2xvcjp0aGlzLm9wdGlvbnMubGluZUNvbG9yLFxuICAgICAgICBjb2xvcjondHJhbnNwYXJlbnQnLFxuICAgICAgICBnaG9zdDp0cnVlLFxuICAgIH0pKTtcbn1cblxuXG4vLyDmt7vliqDlm77niYdcbkNyb3BwZXIucHJvdG90eXBlLl9hZGRJbWFnZSA9IGZ1bmN0aW9uKGltYWdlKXtcbiAgICB2YXIgeWNjID0gdGhpcy55Y2M7XG4gICAgdmFyIGNyb3BwZXIgPSB0aGlzO1xuXG4gICAgdmFyIHJhdGlvVyA9IGltYWdlLnJlcy53aWR0aC90aGlzLm9wdGlvbnMud3JhcFc7XG4gICAgdmFyIHJhdGlvSCA9IGltYWdlLnJlcy5oZWlnaHQvdGhpcy5vcHRpb25zLndyYXBIO1xuXG4gICAgdmFyIHNjYWxlUmF0aW8gPSAxO1xuICAgIHZhciBpbWFnZVJlY3QgPSBudWxsO1xuICAgIGlmKHJhdGlvVzxyYXRpb0gpe1xuICAgICAgICBzY2FsZVJhdGlvID0gcmF0aW9IO1xuICAgICAgICBpbWFnZVJlY3QgPSBuZXcgWWNjLk1hdGguUmVjdCgodGhpcy5vcHRpb25zLndyYXBXLWltYWdlLnJlcy53aWR0aC9zY2FsZVJhdGlvKS8yLDAsaW1hZ2UucmVzLndpZHRoL3NjYWxlUmF0aW8saW1hZ2UucmVzLmhlaWdodC9zY2FsZVJhdGlvKTtcbiAgICB9ZWxzZXtcbiAgICAgICAgc2NhbGVSYXRpbyA9IHJhdGlvVztcbiAgICAgICAgaW1hZ2VSZWN0ID0gbmV3IFljYy5NYXRoLlJlY3QoMCwodGhpcy5vcHRpb25zLndyYXBILWltYWdlLnJlcy5oZWlnaHQvc2NhbGVSYXRpbykvMixpbWFnZS5yZXMud2lkdGgvc2NhbGVSYXRpbyxpbWFnZS5yZXMuaGVpZ2h0L3NjYWxlUmF0aW8pO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdzY2FsZVJhdGlvJyxzY2FsZVJhdGlvLHJhdGlvVzxyYXRpb0gpXG4gICAgdGhpcy5pbWFnZVVJID0gbmV3IFljYy5VSS5JbWFnZSh7XG4gICAgICAgIHJlY3Q6aW1hZ2VSZWN0LFxuICAgICAgICBmaWxsTW9kZTonc2NhbGUnLFxuICAgICAgICByZXM6aW1hZ2UucmVzXG4gICAgfSk7XG4gICAgLy8g5re75Yqg5Zu+54mH6Iez5Zu+5bGCXG4gICAgdGhpcy5sYXllci5hZGRVSSh0aGlzLmltYWdlVUkpO1xuXG5cbiAgICAvLyDnvKnmlL7liY3nmoTkuLTml7bljLrln59cbiAgICB2YXIgdGVtcFJlY3QgPSBudWxsO1xuICAgIC8vIOebkeWQrOaJi+WKv+S6i+S7tlxuICAgIHRoaXMueWNjLmdlc3R1cmUub25kcmFnc3RhcnQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUsMTExMSk7XG4gICAgICAgIHRoaXMudXNlckRhdGEgPSB7XG4gICAgICAgICAgICBzdGFydFBvczpuZXcgWWNjLk1hdGguRG90KGUpLFxuICAgICAgICAgICAgc3RhcnRSZWN0Om5ldyBZY2MuTWF0aC5SZWN0KGNyb3BwZXIuaW1hZ2VVSS5yZWN0KVxuICAgICAgICB9XG4gICAgfTtcbiAgICB0aGlzLnljYy5nZXN0dXJlLm9uZHJhZ2dpbmcgPSBmdW5jdGlvbihlKXtcbiAgICAgICAgaWYodGhpcy5pc211dGlsdG91Y2hpbmcpIHJldHVybjtcbiAgICAgICAgaWYoIXRoaXMudXNlckRhdGEpIHJldHVybjtcblxuICAgICAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnVzZXJEYXRhLnN0YXJ0UG9zO1xuICAgICAgICB2YXIgc3RhcnRSZWN0ID0gdGhpcy51c2VyRGF0YS5zdGFydFJlY3Q7XG4gICAgICAgIGxldCBkZWx0YVggPSAoZS54LXN0YXJ0UG9zLngpO1xuICAgICAgICBsZXQgZGVsdGFZID0gKGUueS1zdGFydFBvcy55KTtcbiAgICAgICAgY3JvcHBlci5pbWFnZVVJLnJlY3QueCA9IHN0YXJ0UmVjdC54K2RlbHRhWDtcbiAgICAgICAgY3JvcHBlci5pbWFnZVVJLnJlY3QueSA9IHN0YXJ0UmVjdC55K2RlbHRhWTtcblxuICAgICAgICAvLyDlm7rlrprplJrngrnlnKjlm77niYfmraPkuK3lv4NcbiAgICAgICAgY3JvcHBlci5pbWFnZVVJLmFuY2hvclggPSBpbWFnZVJlY3QueCtpbWFnZVJlY3Qud2lkdGgvMjtcbiAgICAgICAgY3JvcHBlci5pbWFnZVVJLmFuY2hvclkgPSBpbWFnZVJlY3QueStpbWFnZVJlY3QuaGVpZ2h0LzI7XG4gICAgfVxuICAgIHRoaXMueWNjLmdlc3R1cmUub25tdWx0aXN0YXJ0ID0gZnVuY3Rpb24oZSl7XG4gICAgICAgIHRlbXBSZWN0ID0gbmV3IFljYy5NYXRoLlJlY3QoY3JvcHBlci5pbWFnZVVJLnJlY3QpOyBcbiAgICAgICAgLy8g5bCGdXNlcmRhdGHorr7nva7miJBudWxsIOmYu+atoue8qeaUvuWQjueri+WNs+WTjeW6lOaLluaLvVxuICAgICAgICB0aGlzLnVzZXJEYXRhID0gbnVsbDtcbiAgICB9O1xuICAgIC8vIOe7keWumue8qeaUvuS6i+S7tlxuICAgIHRoaXMueWNjLmdlc3R1cmUub256b29tID0gZnVuY3Rpb24oZSl7XG4gICAgICAgIC8vIGFsZXJ0KCd6b29tICcrZS56b29tUmF0ZSk7XG4gICAgICAgIHZhciByYXRlID0gZS56b29tUmF0ZTtcbiAgICAgICAgaW1hZ2VSZWN0LndpZHRoID0gdGVtcFJlY3Qud2lkdGgqcmF0ZTtcbiAgICAgICAgaW1hZ2VSZWN0LmhlaWdodCA9dGVtcFJlY3QuaGVpZ2h0KnJhdGU7XG5cbiAgICAgICAgLy8g5Zu65a6a6ZSa54K55Zyo5Zu+54mH5q2j5Lit5b+DXG4gICAgICAgIGltYWdlUmVjdC54ID0gdGVtcFJlY3QueC0oaW1hZ2VSZWN0LndpZHRoLXRlbXBSZWN0LndpZHRoKS8yO1xuICAgICAgICBpbWFnZVJlY3QueSA9IHRlbXBSZWN0LnktKGltYWdlUmVjdC5oZWlnaHQtdGVtcFJlY3QuaGVpZ2h0KS8yO1xuICAgIH07XG4gICAgdGhpcy55Y2MuZ2VzdHVyZS5vbnJvdGF0ZSA9IGZ1bmN0aW9uKGUpe1xuICAgICAgICB2YXIgYW5nbGUgPSBlLmFuZ2xlO1xuXG4gICAgICAgIGNyb3BwZXIuaW1hZ2VVSS5hbmNob3JYID0gaW1hZ2VSZWN0LngraW1hZ2VSZWN0LndpZHRoLzI7XG4gICAgICAgIGNyb3BwZXIuaW1hZ2VVSS5hbmNob3JZID0gaW1hZ2VSZWN0LnkraW1hZ2VSZWN0LmhlaWdodC8yO1xuICAgICAgICBjcm9wcGVyLmltYWdlVUkucm90YXRpb24gKz0gYW5nbGU7XG4gICAgfTtcblxufVxuXG4vKipcbiAqIOiOt+WPlmltYWdlZGF0YVxuICogQHBhcmFtIHsqfSBjYW52YXNJZCBjYW52YXPnmoRJRCDku4XlvZNhcHBlbnbkuLp3eGFwcOaXtumcgOimgVxuICovXG5Dcm9wcGVyLnByb3RvdHlwZS5nZXRDcm9wSW1hZ2UgPSBmdW5jdGlvbihjYW52YXNJZCl7XG4gICAgdmFyIHggPSAodGhpcy5vcHRpb25zLndyYXBXLzItdGhpcy5vcHRpb25zLmNyb3BXLzIpO1xuICAgIHZhciB5ID0gdGhpcy5vcHRpb25zLndyYXBILzItdGhpcy5vcHRpb25zLmNyb3BILzI7XG4gICAgdmFyIHdpZHRoID0gdGhpcy5vcHRpb25zLmNyb3BXO1xuICAgIHZhciBoZWlnaHQgPSB0aGlzLm9wdGlvbnMuY3JvcEg7XG5cbiAgICBpZih0aGlzLm9wdGlvbnMuYXBwZW52PT09J3d4YXBwJykgcmV0dXJuIHd4LmNhbnZhc1RvVGVtcEZpbGVQYXRoKHtcbiAgICAgICAgY2FudmFzSWQ6Y2FudmFzSWQsXG4gICAgICAgIGNhbnZhczp0aGlzLnljYy5jYW52YXNEb20sXG4gICAgICAgIHg6eCxcbiAgICAgICAgeTp5LFxuICAgICAgICB3aWR0aDp3aWR0aCxcbiAgICAgICAgaGVpZ2h0OmhlaWdodCxcbiAgICAgICAgZGVzdFdpZHRoOndpZHRoLFxuICAgICAgICBkZXN0SGVpZ2h0OmhlaWdodCxcbiAgICAgICAgZmlsZVR5cGU6J2pwZycsXG4gICAgICAgIHF1YWxpdHk6MVxuICAgIH0pXG5cblxuICAgIHZhciB5Y2MgPSB0aGlzLnljYztcbiAgICByZXR1cm4geWNjLmN0eC5nZXRJbWFnZURhdGEoeCp0aGlzLnljYy5kcGkseSp0aGlzLnljYy5kcGksd2lkdGgqdGhpcy55Y2MuZHBpLGhlaWdodCp0aGlzLnljYy5kcGkpO1xufTtcblxuLyoqXG4gKiDmuIXnqbrnlLvluINcbiAqL1xuQ3JvcHBlci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpe1xuICAgIHRoaXMueWNjLmxheWVyTWFuYWdlci5kZWxldGVBbGxMYXllcigpO1xuICAgIHRoaXMueWNjLnRpY2tlci5zdG9wKCk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vIOWFvOWuuWVzNeaooeW8j1xudmFyIGc7XG5pZih0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIil7Zz13aW5kb3d9XG5lbHNlIGlmKHR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiKXtnPWdsb2JhbH1cbmVsc2UgaWYodHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiKXtnPXNlbGZ9XG5lbHNle2c9dGhpc31cbmcuQ3JvcHBlciA9IENyb3BwZXI7XG5cbi8vIOWvvOWHuuaooeWdl1xuZXhwb3J0IGRlZmF1bHQgQ3JvcHBlcjtcblxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n")},function(module,exports){eval('var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function("return this")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === "object") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it\'s\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanM/Y2QwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n')}])}));